<!DOCTYPE html>
<!-- 
    Get this template from `pandoc -D html`
    pandoc version: 2.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Markdown Cheatsheet</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- 2021.8.25 by xieby1 created -->

  <style>
  *,
  div.sourceCode {
      margin: 0;
  }

  ul {
      padding-inline-start: 1em;
  }

  p > code, /* inline code */
  section > pre, /* unstyled code block */
  div.sourceCode /* styled code block */ {
      border: 1px solid #e7eaed;
      background-color: #f8f8f8;
      border-radius: 3px;
  }
  /* Hide scrollbar for Chrome, Safari and Opera */
  div.sourceCode::-webkit-scrollbar {
    display: none;
  }
  /* Hide scrollbar for IE, Edge and Firefox */
  div.sourceCode {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  code.sourceCode {
      white-space: pre-wrap;
  }

  #TOC > ul > li,
  section.level2 {
      margin: .5em 0 .5em 0;
      border: 1px solid #adb3b9;
      border-radius: 16px;
      box-shadow: #0c0d0e33 0 3px 0, #fff 0 0 0 6px inset;
      padding: .2em;

      display: flex;
      flex-wrap: wrap;
      align-items: stretch;
  }
  section.level3 {
      max-width: fit-content;
      max-height: fit-content;
      overflow: auto;
      margin: .2em;
      border: 1px solid #adb3b9;
      border-radius: 8px;
      box-shadow: #0c0d0e33 0 1px 0, #fff 0 0 0 2px inset;
      padding: .2em;
      flex-grow: 1;
  }
  h2 {
      width: 100%;
  }

  h2,
  h3 {
    margin: 0 0 0 0;
  }

  table,
  th,
  tr,
  td {
      border: 1px solid #999;
      border-collapse: collapse;
  }

  #TOC > ul > li > ul {
      /* multiple column in first level TOC */
      column-width: 6em;
      width: 100%;
      column-rule: 1px solid #adb3b9;
      /* no padding in first level TOC */
      padding: 0 0 0 0;
      word-wrap: break-word;
  }

  #TOC > ul > li > ul {
      /* no padding in second level TOC */
      padding: 0 0 0 0;
  }

  #TOC > ul > li,
  #TOC > ul > li > ul > li {
      /* no bullet */
      list-style-type: none;
  }

  /* first level toc content */
  #TOC > ul > li > a {
      font-weight: bold;
      zoom: 120%;
  }
  /* second level toc content */
  #TOC > ul > li > ul > li > a {
      background: #0c0d0e33;
  }
  </style>
</head>
<body>
<nav id="TOC">
<ul>
<li><a href="#general">General</a>
<ul>
<li><a href="#awk">awk</a>
<ul>
<li><a href="#print-nth-to-last">print nth to last</a></li>
<li><a href="#delimiter">delimiter</a></li>
<li><a href="#sum-column">sum column</a></li>
</ul></li>
<li><a href="#bash">bash</a>
<ul>
<li><a href="#args-length">args length</a></li>
<li><a href="#args-range">args range</a></li>
<li><a href="#commentable-string-concat">commentable string
concat</a></li>
<li><a href="#cd-last-dir">cd last dir</a></li>
<li><a href="#func-src-file">func src file</a></li>
<li><a href="#print-command">print command</a></li>
<li><a href="#read-file-lines">read file lines</a></li>
<li><a href="#test-a-var-is-num">test a var is num</a></li>
</ul></li>
<li><a href="#binfmt">binfmt</a>
<ul>
<li><a href="#i386">i386</a></li>
<li><a href="#qemu">qemu</a></li>
<li><a href="#x64">x64</a></li>
</ul></li>
<li><a href="#cmake">cmake</a>
<ul>
<li><a href="#compile_command.json">compile_command.json</a></li>
</ul></li>
<li><a href="#container">container</a>
<ul>
<li><a href="#ls-containers">ls containers</a></li>
<li><a href="#ls-imgs">ls imgs</a></li>
<li><a href="#prune">prune</a></li>
<li><a href="#rm-all-containers">rm all-containers</a></li>
<li><a href="#rm-all-imgs">rm all-imgs</a></li>
<li><a href="#rm-container">rm container</a></li>
<li><a href="#rm-img">rm img</a></li>
<li><a href="#rm-untagged-img">rm untagged-img</a></li>
<li><a href="#stop-containers">stop containers</a></li>
<li><a href="#build">build</a></li>
<li><a href="#image-mount">image mount</a></li>
<li><a href="#run">run</a></li>
<li><a href="#debugger">debugger</a></li>
</ul></li>
<li><a href="#dd">dd</a>
<ul>
<li><a href="#extract-bytes-from-file">extract bytes from file</a></li>
</ul></li>
<li><a href="#disk">disk</a>
<ul>
<li><a href="#dd-1">dd</a></li>
<li><a href="#disk-usage">disk usage</a></li>
<li><a href="#file-folder-size">file folder-size</a></li>
</ul></li>
<li><a href="#file">file</a>
<ul>
<li><a href="#查看meta-info例如pdf详细见man">查看meta
info，例如pdf，详细见man</a></li>
</ul></li>
<li><a href="#font">font</a>
<ul>
<li><a href="#list">list</a></li>
<li><a href="#google-fonts">google-fonts</a></li>
<li><a href="#grub">grub</a></li>
<li><a href="#tty">tty</a></li>
</ul></li>
<li><a href="#gcc">gcc</a>
<ul>
<li><a href="#inline-asm">inline asm</a></li>
<li><a href="#extended-inline-asm">extended inline asm</a></li>
<li><a href="#predefined-macros">predefined macros</a></li>
</ul></li>
<li><a href="#gdb">gdb</a>
<ul>
<li><a href="#frame">frame</a></li>
</ul></li>
<li><a href="#gem5">gem5</a>
<ul>
<li><a href="#terminology">terminology</a></li>
<li><a href="#cache">cache</a></li>
<li><a href="#generate-hh-from-py">generate hh from py</a></li>
<li><a href="#generate-doxygen">generate doxygen</a></li>
<li><a href="#se-syscall-emu">SE (syscall emu)</a></li>
</ul></li>
<li><a href="#git">git</a>
<ul>
<li><a href="#remote-branches">remote branches</a></li>
<li><a href="#查找删除某行的commit">查找删除某行的commit</a></li>
<li><a href="#clone-server-codes">clone server-Codes</a></li>
<li><a href="#clone-specific-tag">clone specific-tag</a></li>
<li><a href="#list-remote-tags">list remote-tags</a></li>
<li><a href="#server-codes">server Codes</a></li>
</ul></li>
<li><a href="#grep">grep</a>
<ul>
<li><a href="#only-filename">only filename</a></li>
</ul></li>
<li><a href="#headscale-tailscale">headscale tailscale</a>
<ul>
<li><a href="#exec-cmd">exec cmd</a></li>
<li><a href="#client-register">client register</a></li>
</ul></li>
<li><a href="#html">html</a>
<ul>
<li><a href="#detail">detail</a></li>
<li><a href="#span-color">span color</a></li>
<li><a href="#time-stamp">time stamp</a></li>
</ul></li>
<li><a href="#inkscape">Inkscape</a>
<ul>
<li><a href="#extract-pdf">extract pdf</a></li>
</ul></li>
<li><a href="#libreoffice">libreoffice</a>
<ul>
<li><a href="#editview-mode">edit/view mode</a></li>
</ul></li>
<li><a href="#licenses">Licenses</a>
<ul>
<li><a href="#mit">MIT</a></li>
</ul></li>
<li><a href="#linux">linux</a>
<ul>
<li><a href="#编译">编译</a></li>
<li><a href="#版本号">版本号</a></li>
<li><a href="#安装">安装</a></li>
<li><a href="#生成源码跳转文件">生成源码跳转文件</a></li>
<li><a href="#内部结构">内部结构</a></li>
<li><a href="#内核信息重定向">内核信息重定向</a></li>
</ul></li>
<li><a href="#make">make</a>
<ul>
<li><a href="#terminology-1">terminology</a></li>
<li><a href="#all-executables">all executables</a></li>
<li><a href="#clean-executables">clean executables</a></li>
<li><a href="#hash-dep">hash dep</a></li>
<li><a href="#implicit-rule">implicit rule</a></li>
<li><a href="#target依赖树">target依赖树</a></li>
<li><a href="#列出所有targets">列出所有targets</a></li>
</ul></li>
<li><a href="#maven">maven</a>
<ul>
<li><a href="#proxy">proxy</a></li>
</ul></li>
<li><a href="#mdbook">mdbook</a>
<ul>
<li><a href="#build-1">build</a></li>
</ul></li>
<li><a href="#network">network</a>
<ul>
<li><a href="#dns-resolve">dns resolve</a></li>
<li><a href="#scan-local">scan local</a></li>
<li><a href="#connect-hidden-wifi">connect hidden wifi</a></li>
</ul></li>
<li><a href="#ocr">ocr</a>
<ul>
<li><a href="#tesseract">tesseract</a></li>
<li><a href="#ocrmypdf">ocrmypdf</a></li>
</ul></li>
<li><a href="#pandoc">pandoc</a>
<ul>
<li><a href="#可用代码高亮">可用代码高亮</a></li>
<li><a href="#打印默认模板">打印默认模板</a></li>
</ul></li>
<li><a href="#pic">pic</a>
<ul>
<li><a href="#jpgs2pdf">jpgs2pdf</a></li>
<li><a href="#resize">resize</a></li>
</ul></li>
<li><a href="#pkg">pkg</a>
<ul>
<li><a href="#deb">deb</a></li>
<li><a href="#installed">installed</a></li>
<li><a href="#not-installed">not installed</a></li>
</ul></li>
<li><a href="#python">python</a>
<ul>
<li><a href="#debug-script">debug script</a></li>
<li><a href="#object-attr">object attr</a></li>
</ul></li>
<li><a href="#qemu-1">qemu</a>
<ul>
<li><a href="#smb">smb</a></li>
<li><a href="#system-file-disk">system file disk</a></li>
</ul></li>
<li><a href="#qemu-src">qemu-src</a>
<ul>
<li><a href="#tcg">tcg/</a></li>
</ul></li>
<li><a href="#revealjs">revealjs</a>
<ul>
<li><a href="#align">align</a></li>
<li><a href="#chalkboard">chalkboard</a></li>
<li><a href="#fragments-fade">fragments fade</a></li>
<li><a href="#fragments-highlight">fragments highlight</a></li>
<li><a href="#fragments-others">fragments others</a></li>
<li><a href="#fragments-order">fragments order</a></li>
<li><a href="#print-pdf">print pdf</a></li>
</ul></li>
<li><a href="#route">route</a>
<ul>
<li><a href="#add">add</a></li>
<li><a href="#del">del</a></li>
</ul></li>
<li><a href="#rust">rust</a>
<ul>
<li><a href="#installed-targets">installed targets</a></li>
<li><a href="#交叉编译">交叉编译</a></li>
</ul></li>
<li><a href="#scons">scons</a>
<ul>
<li><a href="#clean">clean</a></li>
</ul></li>
<li><a href="#sed">sed</a>
<ul>
<li><a href="#recursive-all-files">recursive all files</a></li>
<li><a href="#if-match">if match</a></li>
<li><a href="#new-line">new line</a></li>
<li><a href="#refer-to-match">refer to match</a></li>
</ul></li>
<li><a href="#sixu">sixu</a>
<ul>
<li><a href="#all">all</a></li>
<li><a href="#today">today</a></li>
</ul></li>
<li><a href="#systemd-unit">systemd unit</a>
<ul>
<li><a href="#afterbefore说明">After/Before说明</a></li>
<li><a href="#man-pages">man pages</a></li>
<li><a href="#user目录">user目录</a></li>
<li><a href="#service状态">service状态</a></li>
<li><a href="#service-output">service output</a></li>
<li><a href="#列举unit类">列举unit类</a></li>
</ul></li>
<li><a href="#tmux">tmux</a>
<ul>
<li><a href="#terminology-2">terminology</a></li>
<li><a href="#split">split</a></li>
</ul></li>
<li><a href="#wsl">WSL</a>
<ul>
<li><a href="#shrink-vdisk">shrink vdisk</a></li>
</ul></li>
<li><a href="#x11">x11</a>
<ul>
<li><a href="#restart-server">restart server</a></li>
<li><a href="#xephyr">Xephyr</a></li>
</ul></li>
<li><a href="#xdg">xdg</a>
<ul>
<li><a href="#xdg-mime">xdg-mime</a></li>
</ul></li>
<li><a href="#others">others</a>
<ul>
<li><a href="#crypt">crypt</a></li>
<li><a href="#dgen-sdl">dgen-sdl</a></li>
<li><a href="#gnome-autostart">gnome autostart</a></li>
<li><a href="#kitty-ssh">kitty ssh</a></li>
<li><a href="#pkg-config">pkg-config</a></li>
<li><a href="#pdftohtml">pdftohtml</a></li>
<li><a href="#pdftotext">pdftotext</a></li>
<li><a href="#进程树">进程树</a></li>
<li><a href="#new-user">new user</a></li>
<li><a href="#drawio-no-snapping">drawio no snapping</a></li>
<li><a href="#iconv">iconv</a></li>
<li><a href="#pipe-clipboard">pipe clipboard</a></li>
<li><a href="#shebang-with-arguments">shebang with arguments</a></li>
<li><a href="#sort-first-column">sort first column</a></li>
</ul></li>
</ul></li>
<li><a href="#vim">vim</a>
<ul>
<li><a href="#buffer">buffer</a>
<ul>
<li><a href="#list-all">list all</a></li>
<li><a href="#delete">delete</a></li>
<li><a href="#openedit">open/edit</a></li>
</ul></li>
<li><a href="#misc">Misc</a>
<ul>
<li><a href="#debug-log">debug log</a></li>
<li><a href="#explore-netrw">Explore (netrw)</a></li>
<li><a href="#explore-crash-netrw">Explore crash (netrw)</a></li>
<li><a href="#netrw-new-file">netrw new file</a></li>
<li><a href="#fold">fold</a></li>
<li><a href="#highlight-current-line">highlight current line</a></li>
<li><a href="#list-syntaxs">list syntaxs</a></li>
<li><a href="#markdown-toc">markdown toc</a></li>
<li><a href="#mapped-keys">mapped keys</a></li>
<li><a href="#popup-window">popup window</a></li>
<li><a href="#runtime-folder">runtime folder</a></li>
<li><a href="#split调整">split调整</a></li>
<li><a href="#set-filetype-nvim">set filetype (nvim)</a></li>
<li><a href="#set-syntax">set syntax</a></li>
<li><a href="#syntax">syntax</a></li>
<li><a href="#status-line">status line</a></li>
<li><a href="#jumplist">jumplist</a></li>
<li><a href="#cscope">cscope</a></li>
<li><a href="#mark">mark</a></li>
<li><a href="#ale-fix">ale-fix</a></li>
<li><a href="#wrap-line">wrap line</a></li>
<li><a href="#terminal-mode">terminal mode</a></li>
</ul></li>
<li><a href="#diff">diff</a>
<ul>
<li><a href="#diffthis">diffthis</a></li>
<li><a href="#gitgutter-diff">gitgutter-diff</a></li>
<li><a href="#diff-obtainput">diff obtain/put</a></li>
</ul></li>
<li><a href="#git-1">git</a>
<ul>
<li><a href="#blame-fugitive">blame [# fugitive]</a></li>
<li><a href="#historic-file-fugitive">historic file [#
fugitive]</a></li>
<li><a href="#显示commit信息-git-messenger">显示commit信息
[git-messenger]</a></li>
</ul></li>
<li><a href="#plugins">plugins</a>
<ul>
<li><a href="#ansiesc">AnsiEsc</a></li>
<li><a href="#config-local">config-local</a></li>
<li><a href="#lightspeed.nvim">lightspeed.nvim</a></li>
<li><a href="#tree-sitter-update">tree-sitter update</a></li>
<li><a href="#coc-disable">coc disable</a></li>
<li><a href="#coc-disable-diagnostic">coc disable diagnostic</a></li>
</ul></li>
<li><a href="#search">search</a>
<ul>
<li><a href="#by-column">by column</a></li>
</ul></li>
</ul></li>
<li><a href="#nix">nix</a>
<ul>
<li><a href="#binary-cache">binary cache</a>
<ul>
<li><a href="#paths">paths</a></li>
<li><a href="#query">query</a></li>
<li><a href="#importexport">import/export</a></li>
<li><a href="#copy">copy</a></li>
<li><a href="#copy-closure">copy closure</a></li>
</ul></li>
<li><a href="#misc-1">misc</a>
<ul>
<li><a href="#build-pkg">build pkg</a></li>
<li><a href="#cheatsheet">cheatsheet</a></li>
<li><a href="#eval">eval</a></li>
<li><a href="#gnome-extension">gnome extension</a></li>
<li><a href="#prefetch-url">prefetch url</a></li>
<li><a href="#prefetch-github">prefetch github</a></li>
<li><a href="#prefetch-sha256">prefetch sha256</a></li>
<li><a href="#sha256">sha256</a></li>
<li><a href="#size">size</a></li>
<li><a href="#show-drv">show drv</a></li>
<li><a href="#sys-garbage">sys garbage</a></li>
<li><a href="#usr-garbage">usr garbage</a></li>
<li><a href="#repl">repl</a></li>
<li><a href="#old-generations">old generations</a></li>
<li><a href="#path">path</a></li>
<li><a href="#version">version</a></li>
<li><a href="#nix-on-droid-sshd">nix-on-droid sshd</a></li>
</ul></li>
<li><a href="#funclib">func/lib</a>
<ul>
<li><a href="#fetch">fetch</a></li>
<li><a href="#mkderivation">mkDerivation</a></li>
</ul></li>
<li><a href="#lang">lang</a>
<ul>
<li><a href="#escape-indented-str">escape indented str</a></li>
</ul></li>
<li><a href="#nixos">nixos</a>
<ul>
<li><a href="#list-build-generations">list build-generations</a></li>
</ul></li>
<li><a href="#nix-shell">nix-shell</a>
<ul>
<li><a href="#build-input">build input</a></li>
<li><a href="#build-env">build env</a></li>
</ul></li>
<li><a href="#pkg-1">pkg</a>
<ul>
<li><a href="#dependency">dependency</a></li>
<li><a href="#not-in-nixpkgs">not in nixpkgs</a></li>
<li><a href="#priority">priority</a></li>
<li><a href="#search-file">search file</a></li>
</ul></li>
<li><a href="#repl-1">repl</a>
<ul>
<li><a href="#help">help</a></li>
<li><a href="#open-editor">open editor</a></li>
</ul></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#musl-libc">musl libc</a></li>
<li><a href="#static-compile">static compile</a></li>
<li><a href="#aarch64-cross">aarch64 cross</a></li>
</ul></li>
</ul></li>
<li><a href="#isa">ISA</a>
<ul>
<li><a href="#arm">Arm</a>
<ul>
<li><a href="#cond-flags">cond flags</a></li>
<li><a href="#ldst-align">ldst align</a></li>
<li><a href="#exception-levels">Exception levels</a></li>
</ul></li>
<li><a href="#arm-insts">Arm-Insts</a>
<ul>
<li><a href="#refs">refs</a></li>
<li><a href="#addr">addr</a></li>
<li><a href="#no-cmov">no cmov?</a></li>
<li><a href="#ptr-auth">ptr auth</a></li>
<li><a href="#ldtr-sttr">ldtr, sttr</a></li>
<li><a href="#ldnp-stnp">ldnp, stnp</a></li>
<li><a href="#ldaxr-stxr">ldaxr, stxr</a></li>
</ul></li>
<li><a href="#x86">x86</a>
<ul>
<li><a href="#rflagseflags">rflags/eflags</a></li>
<li><a href="#regs-ext">regs ext</a></li>
<li><a href="#legacy-encode">legacy encode</a></li>
<li><a href="#ext-encode">ext encode</a></li>
<li><a href="#modrm">modrm</a></li>
<li><a href="#sib">sib</a></li>
<li><a href="#mem-opr">mem opr</a></li>
<li><a href="#mem-opr-seg">mem opr: seg</a></li>
<li><a href="#mem-opr-off">mem opr: off</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1>
xieby1’s cheatsheet
</h1>
<section id="general" class="level1">
<h1>General</h1>
<p>符号</p>
<ul>
<li>’🐁’仅在我的配置下可用，并不通用</li>
</ul>
<section id="awk" class="level2">
<h2>awk</h2>
<section id="print-nth-to-last" class="level3">
<h3>print nth to last</h3>
<p><a href="https://stackoverflow.com/questions/2961635/">Using awk to
print all columns from the nth to the last</a></p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all but the first column</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;{$1=&quot;&quot;; print substr($0,2)}&#39;</span> somefile</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all but the fisrt two columns</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;{$1=$2=&quot;&quot;; print substr($0,3)}&#39;</span> somefile</span></code></pre></div>
</section>
<section id="delimiter" class="level3">
<h3>delimiter</h3>
<p><a href="https://stackoverflow.com/questions/12204192">SO: awk
delimiter</a></p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="at">-F</span><span class="st">&#39;[, ]&#39;</span> <span class="st">&#39;{print $1 &quot; &quot; $2}&#39;</span></span></code></pre></div>
</section>
<section id="sum-column" class="level3">
<h3>sum column</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;{sum+=$1} END {print sum}&#39;</span></span></code></pre></div>
</section>
</section>
<section id="bash" class="level2">
<h2>bash</h2>
<section id="args-length" class="level3">
<h3>args length</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">$#</span> <span class="co"># not include command</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> miao.sh wang <span class="co"># $# is 1</span></span></code></pre></div>
</section>
<section id="args-range" class="level3">
<h3>args range</h3>
<p>same to array</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="va">${@</span><span class="op">:</span><span class="dv">3</span><span class="op">:</span><span class="dv">2</span><span class="va">}</span> <span class="co"># from position 3, length 2</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="va">${@</span><span class="op">:</span><span class="dv">3</span><span class="va">}</span> <span class="co"># from position 3, to last</span></span></code></pre></div>
</section>
<section id="commentable-string-concat" class="level3">
<h3>commentable string concat</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="va">CMD</span><span class="op">=</span><span class="va">(</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;args&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;</span><span class="va">${OTHER_ARGS</span><span class="op">[@]</span><span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="va">)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="st">&quot;</span><span class="va">${CMD</span><span class="op">[@]</span><span class="va">}</span><span class="st">&quot;</span> <span class="co"># &quot;${CMD[*]}&quot;</span></span></code></pre></div>
</section>
<section id="cd-last-dir" class="level3">
<h3>cd last dir</h3>
<p>参考bash手册关于cd的说明</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 等价于cd $OLDPATH</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="at">-</span></span></code></pre></div>
</section>
<section id="func-src-file" class="level3">
<h3>func src file</h3>
<p><a href="https://superuser.com/questions/144772">SO: find definition
of bash func</a></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">shopt</span> <span class="at">-s</span> extdebug</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">declare</span> <span class="at">-F</span> <span class="op">&lt;</span>func<span class="op">&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">shopt</span> <span class="at">-u</span> extdebug</span></code></pre></div>
</section>
<section id="print-command" class="level3">
<h3>print command</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># see `help set`</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> <span class="at">-x</span> <span class="co"># turn on</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> +x <span class="co"># turn off</span></span></code></pre></div>
</section>
<section id="read-file-lines" class="level3">
<h3>read file lines</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="bu">read</span> <span class="va">line</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span> <span class="op">&lt;</span> file</span></code></pre></div>
</section>
<section id="test-a-var-is-num" class="level3">
<h3>test a var is num</h3>
<p><a href="https://stackoverflow.com/questions/806906/">How do I test
if a variable is a number in Bash?</a></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="va">re</span><span class="op">=</span><span class="st">&#39;^[0-9]+$&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="va">$yournumber</span> <span class="ot">=~</span> <span class="va">$re</span> <span class="kw">]]</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">then</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>   <span class="bu">echo</span> <span class="st">&quot;is a num!&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
</section>
</section>
<section id="binfmt" class="level2">
<h2>binfmt</h2>
<section id="i386" class="level3">
<h3>i386</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;:i386:M::\x7fELF\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x03:\xff\xff\xff\xff\xff\xfe\xfe\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff:/usr/local/bin/qemu-i386:&#39;</span> <span class="op">&gt;</span>/proc/sys/fs/binfmt_misc/register</span></code></pre></div>
</section>
<section id="qemu" class="level3">
<h3>qemu</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ./scripts/qemu-binfmt-conf.sh  <span class="at">--qemu-path</span> /usr/local/bin/qemu-x86_64 <span class="at">--systemd</span> x86_64</span></code></pre></div>
</section>
<section id="x64" class="level3">
<h3>x64</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;:x64:M::\x7fELF\x02\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x3e\x00:\xff\xff\xff\xff\xff\xfe\xfe\x00\xff\xff\xff\xff\xff\xff\xff\xff\xfe\xff\xff\xff:/usr/local/bin/qemu-x86_64:&#39;</span> <span class="op">&gt;</span>/proc/sys/fs/binfmt_misc/register</span></code></pre></div>
</section>
</section>
<section id="cmake" class="level2">
<h2>cmake</h2>
<section id="compile_command.json" class="level3">
<h3>compile_command.json</h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">-DCMAKE_EXPORT_COMPILE_COMMANDS=1</span></span></code></pre></div>
</section>
</section>
<section id="container" class="level2">
<h2>container</h2>
<section id="ls-containers" class="level3">
<h3>ls containers</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker ps <span class="at">-as</span></span></code></pre></div>
</section>
<section id="ls-imgs" class="level3">
<h3>ls imgs</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker images <span class="at">-a</span></span></code></pre></div>
</section>
<section id="prune" class="level3">
<h3>prune</h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker system prune</span></code></pre></div>
</section>
<section id="rm-all-containers" class="level3">
<h3>rm all-containers</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker ps <span class="at">-aq</span> <span class="kw">|</span> <span class="fu">sudo</span> xargs docker rm</span></code></pre></div>
</section>
<section id="rm-all-imgs" class="level3">
<h3>rm all-imgs</h3>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker images <span class="at">-aq</span> <span class="kw">|</span> <span class="fu">xargs</span> sudo docker rmi</span></code></pre></div>
</section>
<section id="rm-container" class="level3">
<h3>rm container</h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker rm <span class="op">&lt;</span>containers<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="rm-img" class="level3">
<h3>rm img</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker rmi <span class="op">&lt;</span>images<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="rm-untagged-img" class="level3">
<h3>rm untagged-img</h3>
<pre><code>podman images | grep &quot;^&lt;none&gt;&quot; | awk &#39;{print $3}&#39; | xargs podman rmi</code></pre>
</section>
<section id="stop-containers" class="level3">
<h3>stop containers</h3>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker stop <span class="op">&lt;</span>containers<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="build" class="level3">
<h3>build</h3>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> build <span class="at">--network</span><span class="op">=</span>host <span class="at">-t</span> <span class="op">&lt;</span>tag<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="image-mount" class="level3">
<h3>image mount</h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> unshare</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> image mount <span class="op">&lt;</span>image<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="run" class="level3">
<h3>run</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> run <span class="at">--rm</span> <span class="at">--network</span><span class="op">=</span>host <span class="at">-it</span> <span class="op">&lt;</span>image<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="debugger" class="level3">
<h3>debugger</h3>
<p><a href="https://stackoverflow.com/questions/42029834">SO: gdb in
docker</a></p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--cap-add=SYS_PTRACE</span></span></code></pre></div>
</section>
</section>
<section id="dd" class="level2">
<h2>dd</h2>
<section id="extract-bytes-from-file" class="level3">
<h3>extract bytes from file</h3>
<p>https://stackoverflow.com/questions/1423346</p>
<p>Noted: dd only take decimal number, 0x prefix does not work.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dd</span> skip=<span class="op">&lt;</span>start<span class="op">&gt;</span> count=<span class="op">&lt;</span>size<span class="op">&gt;</span> if=<span class="op">&lt;</span>input<span class="op">&gt;</span> of=<span class="op">&lt;</span>output<span class="op">&gt;</span> bs=1</span></code></pre></div>
</section>
</section>
<section id="disk" class="level2">
<h2>disk</h2>
<section id="dd-1" class="level3">
<h3>dd</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dd</span> if=<span class="op">&lt;</span>INPUT/PATH<span class="op">&gt;</span> of=/dev/<span class="op">&lt;</span>OUTPUT<span class="op">&gt;</span> status=progress</span></code></pre></div>
</section>
<section id="disk-usage" class="level3">
<h3>disk usage</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">df</span> <span class="at">-h</span></span></code></pre></div>
</section>
<section id="file-folder-size" class="level3">
<h3>file folder-size</h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">du</span> <span class="at">-sBM</span> <span class="pp">*</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre></div>
</section>
</section>
<section id="file" class="level2">
<h2>file</h2>
<section id="查看meta-info例如pdf详细见man" class="level3">
<h3>查看meta info，例如pdf，详细见man</h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">exiftool</span> <span class="at">-Title</span><span class="op">=&lt;</span>title<span class="op">&gt;</span> <span class="op">&lt;</span>file<span class="op">&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ex">exiftool</span> <span class="at">-Author</span><span class="op">=&lt;</span>author<span class="op">&gt;</span> <span class="op">&lt;</span>file<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="font" class="level2">
<h2>font</h2>
<section id="list" class="level3">
<h3>list</h3>
<p><a href="https://unix.stackexchange.com/questions/305931">SE: get
name of font</a></p>
<p><a href="https://stackoverflow.com/questions/68033662">SO: get name
of fonf</a></p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fc-list</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fc-scan</span></span></code></pre></div>
</section>
<section id="google-fonts" class="level3">
<h3>google-fonts</h3>
<p>repo: <a href="https://github.com/google/fonts">GH:
google/fonts</a>/ofl/</p>
<p>search: <a href="https://fonts.google.com/">fonts.google.com</a></p>
</section>
<section id="grub" class="level3">
<h3>grub</h3>
<p><a
href="https://unix.stackexchange.com/questions/31672/can-grub-font-size-be-customised">SE:
customize GRUB font size</a></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> grub-mkfont <span class="at">-s</span> 36 <span class="at">-o</span> /boot/grub/fonts/DejaVuSansMono.pf2 /usr/share/fonts/truetype/dejavu/DejaVuSansMono.ttf</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fc-list</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="ex">vim</span> /boot/grub/grub.cfg</span></code></pre></div>
</section>
<section id="tty" class="level3">
<h3>tty</h3>
<p><a
href="https://unix.stackexchange.com/questions/161890/how-can-i-make-a-psf-font-for-the-console-from-a-otf-one">SE:
otf to psf</a></p>
<p><a
href="https://www.reddit.com/r/linuxquestions/comments/7st7hz/any_way_to_convert_ttf_files_to_psf_files/">reddit:
ttf to psf</a></p>
<p><a href="https://www.sven.de/dpi/">dpi cal</a></p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">otf2bdf</span> <span class="at">-r</span> 242 <span class="at">-p</span> 36 /usr/share/fonts/truetype/dejavu/DejaVuSansMono.ttf <span class="at">-o</span> ~/Desktop/DejaVuSansMono.bdf</span></code></pre></div>
</section>
</section>
<section id="gcc" class="level2">
<h2>gcc</h2>
<section id="inline-asm" class="level3">
<h3>inline asm</h3>
<p>No clobber, may segment fault! Just an example.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>   asm<span class="op">(</span> <span class="st">&quot;mov a, %eax</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;mov b, %ebx</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;add %ebx, %eax</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;mov %eax, result&quot;</span><span class="op">);</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>   printf<span class="op">(</span><span class="st">&quot;the result is %d</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="extended-inline-asm" class="level3">
<h3>extended inline asm</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>   asm<span class="op">(</span> <span class="st">&quot;mov a, %%eax</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;mov b, %%ebx</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;add %%ebx, %%eax</span><span class="sc">\n\t</span><span class="st">&quot;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;mov %%eax, result&quot;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="co">/* no outputs*/</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="co">/* no inputs */</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="st">&quot;eax&quot;</span><span class="op">,</span> <span class="st">&quot;ebx&quot;</span><span class="op">);</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>   printf<span class="op">(</span><span class="st">&quot;the result is %d</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="predefined-macros" class="level3">
<h3>predefined macros</h3>
<p><a
href="https://stackoverflow.com/questions/10904873/anyway-to-see-list-of-preprocessor-defined-macros">2012.SO:
preprocessor defined macros</a></p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-dM</span> <span class="at">-E</span> <span class="at">-</span> <span class="op">&lt;</span> /dev/null</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> bla.c <span class="kw">&amp;&amp;</span> <span class="fu">gcc</span> <span class="at">-dM</span> <span class="at">-E</span> bla.c</span></code></pre></div>
</section>
</section>
<section id="gdb" class="level2">
<h2>gdb</h2>
<section id="frame" class="level3">
<h3>frame</h3>
<pre class="gdb"><code>bt
frame &lt;bt num&gt;
info frame &lt;bt num&gt;
info locals</code></pre>
</section>
</section>
<section id="gem5" class="level2">
<h2>gem5</h2>
<section id="terminology" class="level3">
<h3>terminology</h3>
<p>Simulation Mode</p>
<ul>
<li>Full System (FS)</li>
<li>Syscall Emulation (SE)</li>
</ul>
</section>
<section id="cache" class="level3">
<h3>cache</h3>
<ul>
<li>mshr: Miss Status Handle Register</li>
<li>tgt: ?[TODO]</li>
</ul>
</section>
<section id="generate-hh-from-py" class="level3">
<h3>generate hh from py</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate header from MyMemObject.py</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">scons</span> build/ARM/params/MyMemObject.hh</span></code></pre></div>
</section>
<section id="generate-doxygen" class="level3">
<h3>generate doxygen</h3>
<p>output: src/doxygen/html</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> src</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">doxygen</span></span></code></pre></div>
</section>
<section id="se-syscall-emu" class="level3">
<h3>SE (syscall emu)</h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem5.opt</span> configs/example/se.py <span class="at">--cmd</span> <span class="op">&lt;</span>CMD<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="git" class="level2">
<h2>git</h2>
<section id="remote-branches" class="level3">
<h3>remote branches</h3>
<p>列举remote的分支</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 无需联网</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-r</span> [-l <span class="op">&lt;</span>patthern<span class="op">&gt;</span>]</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 需要联网</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote show <span class="op">&lt;</span>remote<span class="op">&gt;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> ls-remote <span class="op">&lt;</span>remote<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="查找删除某行的commit" class="level3">
<h3>查找删除某行的commit</h3>
<p><a
href="https://stackoverflow.com/questions/12591247/how-to-find-commit-when-line-was-deleted-removed">SO:
find removed line</a></p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 面对merge节点似乎有问题</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-c</span> <span class="at">-S</span><span class="st">&#39;&lt;string&gt;&#39;</span> <span class="op">&lt;</span>file<span class="op">&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-c</span> <span class="at">-G</span><span class="st">&#39;&lt;regex&gt;&#39;</span> <span class="op">&lt;</span>file<span class="op">&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 然后搜索</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/</span><span class="op">&lt;</span>string<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="clone-server-codes" class="level3">
<h3>clone server-Codes</h3>
<div class="sourceCode" id="cb46"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone git://10.90.50.99/<span class="op">&lt;</span>REPO<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="clone-specific-tag" class="level3">
<h3>clone specific-tag</h3>
<div class="sourceCode" id="cb47"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">-b</span> <span class="op">&lt;</span>tag<span class="op">&gt;</span> --depth=1 <span class="op">&lt;</span>repo<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="list-remote-tags" class="level3">
<h3>list remote-tags</h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> ls-remote <span class="at">--tags</span> <span class="op">&lt;</span>repo<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="server-codes" class="level3">
<h3>server Codes</h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> daemon <span class="at">--base-path</span><span class="op">=</span>/home/xieby1/Codes/ <span class="at">--export-all</span></span></code></pre></div>
</section>
</section>
<section id="grep" class="level2">
<h2>grep</h2>
<section id="only-filename" class="level3">
<h3>only filename</h3>
<blockquote>
<p>Scanning each input file stops upon first match.</p>
</blockquote>
<p>Therefore, it is fast!</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-l</span></span></code></pre></div>
</section>
</section>
<section id="headscale-tailscale" class="level2">
<h2>headscale tailscale</h2>
<section id="exec-cmd" class="level3">
<h3>exec cmd</h3>
<div class="sourceCode" id="cb51"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> docker exec headscale headscale <span class="at">--help</span></span></code></pre></div>
</section>
<section id="client-register" class="level3">
<h3>client register</h3>
<div class="sourceCode" id="cb52"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tailscale up <span class="at">--login-server</span> URL[:PORT]</span></code></pre></div>
</section>
</section>
<section id="html" class="level2">
<h2>html</h2>
<section id="detail" class="level3">
<h3>detail</h3>
<p>fold/collapse/expand</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;details&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;summary&gt;</span>Details<span class="kw">&lt;/summary&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  miao</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/details&gt;</span></span></code></pre></div>
</section>
<section id="span-color" class="level3">
<h3>span color</h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;span</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;background: red; color: white; font-weight: bold;&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
</section>
<section id="time-stamp" class="level3">
<h3>time stamp</h3>
<div class="sourceCode" id="cb55"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;text-align:right; font-size:3em;&quot;</span><span class="kw">&gt;</span>2022.04.12<span class="kw">&lt;/div&gt;</span></span></code></pre></div>
</section>
</section>
<section id="inkscape" class="level2">
<h2>Inkscape</h2>
<section id="extract-pdf" class="level3">
<h3>extract pdf</h3>
<pre><code>Poppler/Cairo import (Huge size)
&lt;Ctrl&gt;&lt;Shift&gt;G # ungroup
! # invert selection
&lt;Ctrl&gt;&lt;Shift&gt;R # resize canvas
Extensions-&gt;Text-&gt;Replace Font</code></pre>
</section>
</section>
<section id="libreoffice" class="level2">
<h2>libreoffice</h2>
<section id="editview-mode" class="level3">
<h3>edit/view mode</h3>
<pre><code>ctrl+shift+m</code></pre>
</section>
</section>
<section id="licenses" class="level2">
<h2>Licenses</h2>
<section id="mit" class="level3">
<h3>MIT</h3>
<ul>
<li>随意使用</li>
<li>保留该MIT许可</li>
<li>作者不负责</li>
</ul>
</section>
</section>
<section id="linux" class="level2">
<h2>linux</h2>
<section id="编译" class="level3">
<h3>编译</h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> defconfig <span class="kw">&amp;&amp;</span> <span class="fu">make</span></span></code></pre></div>
</section>
<section id="版本号" class="level3">
<h3>版本号</h3>
<div class="sourceCode" id="cb59"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">include/config/kernel.release</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> menuconfig: General setup <span class="at">-</span><span class="op">&gt;</span> Local version</span></code></pre></div>
</section>
<section id="安装" class="level3">
<h3>安装</h3>
<div class="sourceCode" id="cb60"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> INSTALL_PATH=<span class="op">&lt;</span>path<span class="op">&gt;</span> install</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> INSTALL_MOD_PATH=<span class="op">&lt;</span>path<span class="op">&gt;</span> modules_install</span></code></pre></div>
</section>
<section id="生成源码跳转文件" class="level3">
<h3>生成源码跳转文件</h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 需要先编译</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="ex">./scripts/clang-tools/gen_compile_commands.py</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> ARCH=x86 COMPILED_SOURCE=1 cscope</span></code></pre></div>
</section>
<section id="内部结构" class="level3">
<h3>内部结构</h3>
<p>符号表<a href="https://en.wikipedia.org/wiki/System.map">WP:
System.map</a></p>
<p>由<code>nm</code>生成，符号类型见<code>man nm</code></p>
<ul>
<li>内核暴露的符号<code>/proc/kallsyms</code></li>
<li>或是由源码生成<code>System.map</code></li>
</ul>
<p>系统调用表<code>sys_call_table</code></p>
</section>
<section id="内核信息重定向" class="level3">
<h3>内核信息重定向</h3>
<p>ref: <a
href="https://www.linuxquestions.org/questions/linux-newbie-8/dmesg-output-to-tty-707524/">dmesg
output to tty</a></p>
<p>x86上不可靠：输出不全，几次就关闭了</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tty</span> <span class="co"># `who am i` may not output</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /proc/kmsg <span class="op">&gt;</span> <span class="op">&lt;</span>stdio dev file<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="make" class="level2">
<h2>make</h2>
<section id="terminology-1" class="level3">
<h3>terminology</h3>
<div class="sourceCode" id="cb63"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a rule</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="dv">target … :</span><span class="dt"> prerequisites …</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    recipe</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    …</span></code></pre></div>
</section>
<section id="all-executables" class="level3">
<h3>all executables</h3>
<div class="sourceCode" id="cb64"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="dt">EXECUTABLES</span><span class="ch">=$(</span><span class="kw">patsubst</span><span class="st"> %.cpp</span><span class="kw">,</span><span class="st"> %</span><span class="kw">,</span><span class="st"> </span><span class="ch">$(</span><span class="kw">wildcard</span><span class="st"> *.cpp</span><span class="ch">))</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">${</span><span class="dt">EXECUTABLES</span><span class="ch">}</span></span></code></pre></div>
</section>
<section id="clean-executables" class="level3">
<h3>clean executables</h3>
<p><a href="https://stackoverflow.com/questions/12528637/">SO: How do I
execute each command in a list?</a></p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="kw">define</span> \n</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="kw">endef</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="ch">$(</span><span class="kw">foreach</span><span class="st"> x</span><span class="kw">,</span><span class="ch">${</span><span class="dt">EXECUTABLES</span><span class="ch">}</span><span class="kw">,</span><span class="st">rm </span><span class="ch">${</span><span class="dt">x</span><span class="ch">}${</span><span class="dt">\n</span><span class="ch">})</span></span></code></pre></div>
</section>
<section id="hash-dep" class="level3">
<h3>hash dep</h3>
<p><a href="https://github.com/olipratt/hashdeps">GH: hashdeps</a></p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">include</span> hashdeps.mk</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="dv">combined.txt:</span><span class="dt"> </span><span class="ch">$(</span><span class="kw">call</span><span class="st"> hash_deps</span><span class="kw">,</span><span class="st">a.txt b.txt</span><span class="ch">)</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    echo <span class="st">&quot;Concatenating files&quot;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    cat <span class="ch">$(</span><span class="kw">call</span><span class="st"> unhash_deps</span><span class="kw">,</span><span class="ch">$^)</span> &gt; <span class="ch">$@</span></span></code></pre></div>
</section>
<section id="implicit-rule" class="level3">
<h3>implicit rule</h3>
<div class="sourceCode" id="cb67"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dv">%:</span><span class="dt">%.c</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$&lt;</span> -o <span class="ch">$@</span></span></code></pre></div>
</section>
<section id="target依赖树" class="level3">
<h3>target依赖树</h3>
<p><a
href="https://unix.stackexchange.com/questions/283478/how-to-display-dependencies-given-in-a-makefile-as-a-tree">SO:
makefile dependency tree</a></p>
<div class="sourceCode" id="cb68"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-nd</span> <span class="op">&lt;</span>target<span class="op">&gt;</span> <span class="kw">|</span> <span class="ex">make2graph</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co"># makefile2graph &lt;target&gt;</span></span></code></pre></div>
</section>
<section id="列出所有targets" class="level3">
<h3>列出所有targets</h3>
<div class="sourceCode" id="cb69"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">remake</span> <span class="at">--targets</span></span></code></pre></div>
</section>
</section>
<section id="maven" class="level2">
<h2>maven</h2>
<section id="proxy" class="level3">
<h3>proxy</h3>
<p>https://maven.apache.org/guides/mini/guide-proxies.html</p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">settings</span>&gt;</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">proxies</span>&gt;</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>   &lt;<span class="kw">proxy</span>&gt;</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">id</span>&gt;example-proxy&lt;/<span class="kw">id</span>&gt;</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">active</span>&gt;true&lt;/<span class="kw">active</span>&gt;</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">protocol</span>&gt;http&lt;/<span class="kw">protocol</span>&gt;</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">host</span>&gt;proxy.example.com&lt;/<span class="kw">host</span>&gt;</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">port</span>&gt;8080&lt;/<span class="kw">port</span>&gt;</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">username</span>&gt;proxyuser&lt;/<span class="kw">username</span>&gt;</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">password</span>&gt;somepassword&lt;/<span class="kw">password</span>&gt;</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">nonProxyHosts</span>&gt;www.google.com|*.example.com&lt;/<span class="kw">nonProxyHosts</span>&gt;</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">proxy</span>&gt;</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">proxies</span>&gt;</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">settings</span>&gt;</span></code></pre></div>
</section>
</section>
<section id="mdbook" class="level2">
<h2>mdbook</h2>
<section id="build-1" class="level3">
<h3>build</h3>
<p>同名md和html html优先</p>
</section>
</section>
<section id="network" class="level2">
<h2>network</h2>
<section id="dns-resolve" class="level3">
<h3>dns resolve</h3>
<div class="sourceCode" id="cb71"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="ex">host</span> <span class="op">&lt;</span>domain name<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="scan-local" class="level3">
<h3>scan local</h3>
<div class="sourceCode" id="cb72"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nmap</span> 192.168.1.0/24</span></code></pre></div>
</section>
<section id="connect-hidden-wifi" class="level3">
<h3>connect hidden wifi</h3>
<p><a href="https://unix.stackexchange.com/questions/555380">wpa_cli
connection to hidden ssid</a></p>
<pre><code>&gt; add_network x
&gt; set_network x ssid &quot;hidden_ssid&quot;
&gt; set_network x psk &quot;secret&quot;
// ALLOW CONNECT TO HIDDEN SSID 
&gt; set_network x scan_ssid 1
&gt; enable_network x
&gt; save_config
&gt; select_network x</code></pre>
</section>
</section>
<section id="ocr" class="level2">
<h2>ocr</h2>
<section id="tesseract" class="level3">
<h3>tesseract</h3>
<div class="sourceCode" id="cb74"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列支持的语言</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tesseract</span> <span class="at">--list-langs</span></span></code></pre></div>
</section>
<section id="ocrmypdf" class="level3">
<h3>ocrmypdf</h3>
<p>详细见<code>ocrmypdf.md</code></p>
<p>ocr会将原pdf栅格化，</p>
<p>所以需要分离文本和图片</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除文本</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gs</span> <span class="at">-o</span> notext.pdf <span class="at">-dFILTERTEXT</span> <span class="dt">\</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>-sDEVICE=pdfwrite <span class="op">&lt;</span>input.pdf<span class="op">&gt;</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 运行ocr</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ocrmypdf</span> <span class="at">--force-ocr</span> <span class="at">--output-type</span> pdf <span class="dt">\</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>-l <span class="va">$lang</span> notext.pdf ocr.pdf</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除图片仅保留文本</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gs</span> <span class="at">-o</span> textonly.pdf <span class="at">-dFILTERIMAGE</span> <span class="dt">\</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>-dFILTERVECTOR <span class="at">-sDEVICE</span><span class="op">=</span>pdfwrite ocr.pdf</span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 叠加文本</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="ex">qpdf</span> notext.pdf <span class="at">--overlay</span> <span class="dt">\</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>textonly.pdf <span class="at">--</span> <span class="op">&lt;</span>output.pdf<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="pandoc" class="level2">
<h2>pandoc</h2>
<section id="可用代码高亮" class="level3">
<h3>可用代码高亮</h3>
<p><a href="https://pandoc.org/MANUAL.html#syntax-highlighting">pandoc:
syntax highlighting</a></p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--list-highlight-languages</span></span></code></pre></div>
</section>
<section id="打印默认模板" class="level3">
<h3>打印默认模板</h3>
<div class="sourceCode" id="cb77"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-D</span> <span class="op">&lt;</span>FORMAT<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="pic" class="level2">
<h2>pic</h2>
<section id="jpgs2pdf" class="level3">
<h3>jpgs2pdf</h3>
<div class="sourceCode" id="cb78"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">convert</span> input1.jpg input2.jpg input3.jpg output.pdf</span></code></pre></div>
</section>
<section id="resize" class="level3">
<h3>resize</h3>
<div class="sourceCode" id="cb79"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">convert</span> input.xxx <span class="at">-resize</span> 100x200<span class="dt">\!</span> output.xxx</span></code></pre></div>
</section>
</section>
<section id="pkg" class="level2">
<h2>pkg</h2>
<section id="deb" class="level3">
<h3>deb</h3>
<div class="sourceCode" id="cb80"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dpkg-deb</span> <span class="at">-c</span> <span class="op">&lt;</span>package_name.deb<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="installed" class="level3">
<h3>installed</h3>
<div class="sourceCode" id="cb81"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dpkg-query</span> <span class="at">-L</span> <span class="op">&lt;</span>package_name<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="not-installed" class="level3">
<h3>not installed</h3>
<div class="sourceCode" id="cb82"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-file</span> list <span class="op">&lt;</span>package_name<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="python" class="level2">
<h2>python</h2>
<section id="debug-script" class="level3">
<h3>debug script</h3>
<div class="sourceCode" id="cb83"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdb</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>pdb.set_trace()</span></code></pre></div>
</section>
<section id="object-attr" class="level3">
<h3>object attr</h3>
<div class="sourceCode" id="cb84"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span>()</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="bu">vars</span>()</span></code></pre></div>
</section>
</section>
<section id="qemu-1" class="level2">
<h2>qemu</h2>
<section id="smb" class="level3">
<h3>smb</h3>
<div class="sourceCode" id="cb85"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mount</span> <span class="at">-t</span> cifs <span class="at">-o</span> user=miao%miao //10.0.2.4/qemu Host/</span></code></pre></div>
</section>
<section id="system-file-disk" class="level3">
<h3>system file disk</h3>
<div class="sourceCode" id="cb86"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[qemu-sys]</span> <span class="at">-m</span> 16 <span class="at">-nographic</span> <span class="at">-fda</span> [file]</span></code></pre></div>
</section>
</section>
<section id="qemu-src" class="level2">
<h2>qemu-src</h2>
<section id="tcg" class="level3">
<h3>tcg/</h3>
<ul>
<li>tcg.c, tcg-op.c: generate tcg</li>
<li><arch>/: tcg =&gt; <arch></li>
<li>tci.c: tcg =&gt; interpreting</li>
<li>README: tcg syntax intro</li>
</ul>
</section>
</section>
<section id="revealjs" class="level2">
<h2>revealjs</h2>
<section id="align" class="level3">
<h3>align</h3>
<p><a
href="https://stackoverflow.com/questions/13091433/center-child-divs-inside-parent-div">SO:
center child divs inside parent div</a></p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>:::{style=&quot;display:inline-block; text-align:left;&quot;}</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>things here are all</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>left aligned</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>!</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>:::</span></code></pre></div>
</section>
<section id="chalkboard" class="level3">
<h3>chalkboard</h3>
<pre><code>del: clear current
backspace: clear all
c: note canva
b: chalkboard
d: download drawings
x: previous color
y: next color
right click: eraser</code></pre>
</section>
<section id="fragments-fade" class="level3">
<h3>fragments fade</h3>
<p><a href="https://revealjs.com/fragments/">revealjs fragments</a></p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>fade-out</td>
<td>Start visible, fade out</td>
</tr>
<tr class="even">
<td>fade-up</td>
<td>Slide up while fading in</td>
</tr>
<tr class="odd">
<td>fade-down</td>
<td>Slide down while fading in</td>
</tr>
<tr class="even">
<td>fade-left</td>
<td>Slide left while fading in</td>
</tr>
<tr class="odd">
<td>fade-right</td>
<td>Slide right while fading in</td>
</tr>
<tr class="even">
<td>fade-in-then-out</td>
<td>Fades in, then out on the next step</td>
</tr>
<tr class="odd">
<td>fade-in-then-semi-out</td>
<td>Fades in, then to 50% on the next step</td>
</tr>
<tr class="even">
<td>semi-fade-out</td>
<td>Fade out to 50%</td>
</tr>
</tbody>
</table>
</section>
<section id="fragments-highlight" class="level3">
<h3>fragments highlight</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>highlight-red</td>
<td>Turn text red</td>
</tr>
<tr class="even">
<td>highlight-green</td>
<td>Turn text green</td>
</tr>
<tr class="odd">
<td>highlight-blue</td>
<td>Turn text blue</td>
</tr>
<tr class="even">
<td>highlight-current-red</td>
<td>Turn text red, then back to original on next step</td>
</tr>
<tr class="odd">
<td>highlight-current-green</td>
<td>Turn text green, then back to original on next step</td>
</tr>
<tr class="even">
<td>highlight-current-blue</td>
<td>Turn text blue, then back to original on next step</td>
</tr>
</tbody>
</table>
</section>
<section id="fragments-others" class="level3">
<h3>fragments others</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>grow</td>
<td>Scale up</td>
</tr>
<tr class="even">
<td>shrink</td>
<td>Scale down</td>
</tr>
<tr class="odd">
<td>strike</td>
<td>Strike through</td>
</tr>
</tbody>
</table>
</section>
<section id="fragments-order" class="level3">
<h3>fragments order</h3>
<div class="sourceCode" id="cb89"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fragment&quot;</span> <span class="er">data-fragment-index</span><span class="ot">=</span><span class="st">&quot;3&quot;</span><span class="kw">&gt;</span>Appears last<span class="kw">&lt;/p&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fragment&quot;</span> <span class="er">data-fragment-index</span><span class="ot">=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;</span>Appears first<span class="kw">&lt;/p&gt;</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;fragment&quot;</span> <span class="er">data-fragment-index</span><span class="ot">=</span><span class="st">&quot;2&quot;</span><span class="kw">&gt;</span>Appears second<span class="kw">&lt;/p&gt;</span></span></code></pre></div>
</section>
<section id="print-pdf" class="level3">
<h3>print pdf</h3>
<p>Append <code>?print-pdf</code> to URL.</p>
</section>
</section>
<section id="route" class="level2">
<h2>route</h2>
<section id="add" class="level3">
<h3>add</h3>
<div class="sourceCode" id="cb90"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> route add <span class="at">-net</span> 172.17.103.0 <span class="dt">\</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>gw 10.90.50.254 <span class="dt">\</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>netmask 255.255.255.0 <span class="dt">\</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>metric 1000 <span class="dt">\</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>dev enp9s0</span></code></pre></div>
</section>
<section id="del" class="level3">
<h3>del</h3>
<div class="sourceCode" id="cb91"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> route del <span class="at">-net</span> 172.17.103.0 <span class="dt">\</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>gw 10.90.50.254</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="ex">netmask</span> 255.255.255.0 <span class="dt">\</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>dev enp9s0</span></code></pre></div>
</section>
</section>
<section id="rust" class="level2">
<h2>rust</h2>
<section id="installed-targets" class="level3">
<h3>installed targets</h3>
<div class="sourceCode" id="cb92"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rustup</span> show</span></code></pre></div>
</section>
<section id="交叉编译" class="level3">
<h3>交叉编译</h3>
<div class="sourceCode" id="cb93"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rustc</span> <span class="at">--print</span> target-list</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rustup</span> target add <span class="op">&lt;</span>TARGET<span class="op">&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="ex">cargo</span> build <span class="at">--target</span><span class="op">=&lt;</span>TARGET<span class="op">&gt;</span> --release</span></code></pre></div>
</section>
</section>
<section id="scons" class="level2">
<h2>scons</h2>
<section id="clean" class="level3">
<h3>clean</h3>
<div class="sourceCode" id="cb94"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">scons</span> <span class="at">-c</span></span></code></pre></div>
</section>
</section>
<section id="sed" class="level2">
<h2>sed</h2>
<section id="recursive-all-files" class="level3">
<h3>recursive all files</h3>
<p><a href="https://stackoverflow.com/questions/1583219">SO</a></p>
<ul>
<li><p><code>-print0</code></p>
<p>results separated by null char</p></li>
</ul>
<div class="sourceCode" id="cb95"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> . <span class="at">-type</span> f <span class="at">-print0</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xargs</span> <span class="at">-0</span> sed <span class="at">-i</span> <span class="st">&#39;s/.../.../g&#39;</span></span></code></pre></div>
</section>
<section id="if-match" class="level3">
<h3>if match</h3>
<p>if match return 1</p>
<p>else return 0</p>
<div class="sourceCode" id="cb96"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="st">&#39;/&lt;pattern&gt;/Q 1&#39;</span></span></code></pre></div>
</section>
<section id="new-line" class="level3">
<h3>new line</h3>
<p><a href="https://stackoverflow.com/questions/1251999/">SO: How
replace a newline</a></p>
<div class="sourceCode" id="cb97"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-z</span> <span class="st">&#39;s/\nwang\nmiao\n//g&#39;</span></span></code></pre></div>
</section>
<section id="refer-to-match" class="level3">
<h3>refer to match</h3>
<div class="sourceCode" id="cb98"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="st">&#39;s/\(.*\)miao/\1wang/g&#39;</span></span></code></pre></div>
</section>
</section>
<section id="sixu" class="level2">
<h2>sixu</h2>
<section id="all" class="level3">
<h3>all</h3>
<div class="sourceCode" id="cb99"><pre
class="sourceCode dot"><code class="sourceCode dot"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">// command line:</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">//   dot -Tsvg -O sixu.dot</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="kw">digraph</span> <span class="ot">{</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co">// attributes</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co">/// graph</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="at">rankdir</span><span class="ot">=</span><span class="va">BT</span><span class="ot">;</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co">/// subgraph</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="va">newrank</span><span class="ot">=</span><span class="va">true</span><span class="ot">;</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="at">style</span><span class="ot">=</span><span class="va">filled</span><span class="ot">;</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="co">//// color name: https://graphviz.org/doc/info/colors.html</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="at">color</span><span class="ot">=</span><span class="va">whitesmoke</span><span class="ot">;</span></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="co">/// node</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a><span class="kw">node</span><span class="ot">[</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="at">shape</span><span class="ot">=</span><span class="va">box</span><span class="co">,</span></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a><span class="at">style</span><span class="ot">=</span><span class="st">&quot;filled, solid&quot;</span><span class="co">,</span></span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a><span class="at">color</span><span class="ot">=</span><span class="va">black</span><span class="co">,</span></span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a><span class="at">fillcolor</span><span class="ot">=</span><span class="va">white</span><span class="co">,</span></span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a><span class="ot">];</span></span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a><span class="co">/// edge</span></span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a><span class="kw">edge</span><span class="ot">[</span></span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a><span class="at">minlen</span><span class="ot">=</span><span class="dv">1</span><span class="co">,</span></span>
<span id="cb99-24"><a href="#cb99-24" aria-hidden="true" tabindex="-1"></a><span class="co">//weight=1,</span></span>
<span id="cb99-25"><a href="#cb99-25" aria-hidden="true" tabindex="-1"></a><span class="co">// If false, the edge is not used in ranking the nodes.</span></span>
<span id="cb99-26"><a href="#cb99-26" aria-hidden="true" tabindex="-1"></a><span class="co">//constraint=true,</span></span>
<span id="cb99-27"><a href="#cb99-27" aria-hidden="true" tabindex="-1"></a><span class="ot">];</span></span>
<span id="cb99-28"><a href="#cb99-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-29"><a href="#cb99-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-30"><a href="#cb99-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-31"><a href="#cb99-31" aria-hidden="true" tabindex="-1"></a><span class="ot">}</span></span></code></pre></div>
</section>
<section id="today" class="level3">
<h3>today</h3>
<div class="sourceCode" id="cb100"><pre
class="sourceCode dot"><code class="sourceCode dot"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;22Apr12+&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;22Apr12-&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;22Apr12+&quot;</span><span class="ot">;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="kw">subgraph</span> <span class="va">cluster_22Apr12</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="ot">{</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="va">x22Apr12_</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="ot">}</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="ot">{</span><span class="at">rank</span><span class="ot">=</span><span class="va">same</span><span class="ot">;</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;22Apr12-&quot;</span><span class="ot">;</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="va">x22Apr12_</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="ot">}</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="ot">{</span><span class="at">rank</span><span class="ot">=</span><span class="va">same</span><span class="ot">;</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;22Apr12+&quot;</span><span class="ot">;</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="ot">}</span></span></code></pre></div>
</section>
</section>
<section id="systemd-unit" class="level2">
<h2>systemd unit</h2>
<section id="afterbefore说明" class="level3">
<h3>After/Before说明</h3>
<div class="sourceCode" id="cb101"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">man</span> systemd.unit</span></code></pre></div>
</section>
<section id="man-pages" class="level3">
<h3>man pages</h3>
<ul>
<li>systemd</li>
<li>systemd.unit</li>
<li>systemd.syntax</li>
<li>systemd.service</li>
</ul>
</section>
<section id="user目录" class="level3">
<h3>user目录</h3>
<p><code>man systemd.unit</code></p>
<p><code>~/.config/systemd/</code></p>
</section>
<section id="service状态" class="level3">
<h3>service状态</h3>
<div class="sourceCode" id="cb102"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> <span class="at">--user</span> status <span class="op">&lt;</span>service<span class="op">&gt;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="ex">journalctl</span> <span class="at">--user</span> <span class="at">-u</span> <span class="op">&lt;</span>service<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="service-output" class="level3">
<h3>service output</h3>
<div class="sourceCode" id="cb103"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sys</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="ex">journalctl</span> <span class="at">-f</span> <span class="at">-u</span> <span class="op">&lt;</span>service<span class="op">&gt;</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co"># user</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="ex">journalctl</span> <span class="at">--user</span> <span class="at">-f</span> <span class="at">-u</span> <span class="op">&lt;</span>service<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="列举unit类" class="level3">
<h3>列举unit类</h3>
<div class="sourceCode" id="cb104"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 例如列出list</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> list-units <span class="at">--type</span> target</span></code></pre></div>
</section>
</section>
<section id="tmux" class="level2">
<h2>tmux</h2>
<section id="terminology-2" class="level3">
<h3>terminology</h3>
<p><code>man tmux</code>: Description</p>
<ul>
<li>session
<ul>
<li>window
<ul>
<li>pane = pseudo terminal (pty)</li>
</ul></li>
</ul></li>
</ul>
<p>Any number of tmux instances can</p>
<p>cnnect to the same session.</p>
</section>
<section id="split" class="level3">
<h3>split</h3>
<pre><code>&lt;C-b&gt; &quot; // vertical
&lt;C-b&gt; % // horizontal</code></pre>
</section>
</section>
<section id="wsl" class="level2">
<h2>WSL</h2>
<section id="shrink-vdisk" class="level3">
<h3>shrink vdisk</h3>
<div class="sourceCode" id="cb106"><pre
class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>wsl <span class="op">--</span>shutdown</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>diskpart</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span> vdisk \</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>file<span class="op">=</span><span class="st">&quot;C:\Users\&lt;User&gt;\AppData\Local\ \</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>Packages\CanonicalGroupLimited<span class="op">.</span><span class="fu">UbuntuonWindows</span><span class="op">...</span> \</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>\LocalState\ext4<span class="op">.</span><span class="fu">vhdx</span><span class="st">&quot;</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>compact vdisk</span></code></pre></div>
</section>
</section>
<section id="x11" class="level2">
<h2>x11</h2>
<section id="restart-server" class="level3">
<h3>restart server</h3>
<pre><code>Alt-F2
r</code></pre>
</section>
<section id="xephyr" class="level3">
<h3>Xephyr</h3>
<div class="sourceCode" id="cb108"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Xephyr</span> :2 <span class="at">-resizeable</span>  <span class="at">-dpi</span> 48 <span class="at">-host-cursor</span></span></code></pre></div>
<div class="sourceCode" id="cb109"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">DISPLAY</span><span class="op">=</span>:2 <span class="op">&lt;</span>command<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="xdg" class="level2">
<h2>xdg</h2>
<section id="xdg-mime" class="level3">
<h3>xdg-mime</h3>
<div class="sourceCode" id="cb110"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="ex">xdg-mime</span> query filetype <span class="op">&lt;</span>file<span class="op">&gt;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="ex">xdg-mime</span> query default <span class="op">&lt;</span>type<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="others" class="level2">
<h2>others</h2>
<section id="crypt" class="level3">
<h3>crypt</h3>
<div class="sourceCode" id="cb111"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> <span class="at">-e</span> <span class="st">&quot;print crypt(&#39;wjxby&#39;,&#39;xb&#39;);&quot;</span></span></code></pre></div>
</section>
<section id="dgen-sdl" class="level3">
<h3>dgen-sdl</h3>
<div class="sourceCode" id="cb112"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dgen</span> <span class="op">&lt;</span>path<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="gnome-autostart" class="level3">
<h3>gnome autostart</h3>
<p><a
href="https://www.addictivetips.com/ubuntu-linux-tips/autostart-programs-on-gnome-shell/">gnome
autostart programs</a></p>
<p>mov desktop file to</p>
<p><code>~/.config/autostart/</code></p>
</section>
<section id="kitty-ssh" class="level3">
<h3>kitty ssh</h3>
<p><a href="https://unix.stackexchange.com/questions/470676">SO: tmux
kitty</a></p>
<div class="sourceCode" id="cb113"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kitty</span> +kitten ssh myserver</span></code></pre></div>
</section>
<section id="pkg-config" class="level3">
<h3>pkg-config</h3>
<div class="sourceCode" id="cb114"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取package的名字</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pkg-config</span> <span class="at">--list-all</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="op">&lt;</span>xxx<span class="op">&gt;</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取c编译、链接参数</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="ex">pkg-config</span> <span class="at">--cflags</span> <span class="at">--libs</span> <span class="op">&lt;</span>pkg<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="pdftohtml" class="level3">
<h3>pdftohtml</h3>
<div class="sourceCode" id="cb115"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftotext</span> <span class="at">-noframes</span> <span class="at">-i</span> <span class="at">-q</span> <span class="at">-p</span> <span class="at">-c</span> <span class="op">&lt;</span>pdf<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="pdftotext" class="level3">
<h3>pdftotext</h3>
<div class="sourceCode" id="cb116"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftotext</span> <span class="at">-q</span> <span class="op">&lt;</span>pdf<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="进程树" class="level3">
<h3>进程树</h3>
<div class="sourceCode" id="cb117"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-jHg</span> <span class="op">&lt;</span>pid<span class="op">&gt;</span> # 进程子树</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pstree</span> <span class="at">-psal</span> <span class="op">&lt;</span>pid<span class="op">&gt;</span> # 完整树</span></code></pre></div>
</section>
<section id="new-user" class="level3">
<h3>new user</h3>
<div class="sourceCode" id="cb118"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="ex">adduser</span> xieby1</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="ex">usermod</span> <span class="at">-aG</span> sudo xieby1</span></code></pre></div>
</section>
<section id="drawio-no-snapping" class="level3">
<h3>drawio no snapping</h3>
<p><a
href="https://webapps.stackexchange.com/questions/124103/how-do-i-prevent-arrows-from-snapping-when-moving-them-on-draw-io">SE:
no arrows snapping</a></p>
<p>hold <code>ctrl</code> + <code>shift</code></p>
</section>
<section id="iconv" class="level3">
<h3>iconv</h3>
<pre><code># 文本编码转换
iconv -f gb18030 -t utf-8 &lt;output&gt;</code></pre>
</section>
<section id="pipe-clipboard" class="level3">
<h3>pipe clipboard</h3>
<pre><code> | xclip -selection clipboard</code></pre>
</section>
<section id="shebang-with-arguments" class="level3">
<h3>shebang with arguments</h3>
<p><a href="https://unix.stackexchange.com/questions/399690/">SE:
Multiple arguments in shebang</a></p>
<pre><code>#!/usr/bin/env -S cmd arg1 arg2 ...</code></pre>
</section>
<section id="sort-first-column" class="level3">
<h3>sort first column</h3>
<div class="sourceCode" id="cb122"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span> <span class="at">-s</span> <span class="at">-n</span> <span class="at">-k</span> 1,1</span></code></pre></div>
</section>
</section>
</section>
<section id="vim" class="level1">
<h1>vim</h1>
<section id="buffer" class="level2">
<h2>buffer</h2>
<section id="list-all" class="level3">
<h3>list all</h3>
<pre class="vim"><code>:buffers &quot; or
:ls &quot; or
:files</code></pre>
</section>
<section id="delete" class="level3">
<h3>delete</h3>
<pre class="vim"><code>:bdelete</code></pre>
</section>
<section id="openedit" class="level3">
<h3>open/edit</h3>
<pre class="vim"><code>&quot; tab key works
:buffer &lt;name&gt;</code></pre>
</section>
</section>
<section id="misc" class="level2">
<h2>Misc</h2>
<section id="debug-log" class="level3">
<h3>debug log</h3>
<p><a href="https://stackoverflow.com/questions/3025615">SO: runtime
log</a></p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="ex">vim</span> <span class="at">-V9myVim.log</span></span></code></pre></div>
</section>
<section id="explore-netrw" class="level3">
<h3>Explore (netrw)</h3>
<pre class="vim"><code>; open current file&#39;s dir
:E[xplore]</code></pre>
</section>
<section id="explore-crash-netrw" class="level3">
<h3>Explore crash (netrw)</h3>
<div class="sourceCode" id="cb128"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> ~/.local/share/nvim/.netrwhist</span></code></pre></div>
</section>
<section id="netrw-new-file" class="level3">
<h3>netrw new file</h3>
<pre class="vim"><code># in netrw mode
%</code></pre>
</section>
<section id="fold" class="level3">
<h3>fold</h3>
<pre class="vim"><code>&quot; set
zf{motion} &quot; :h motion.txt
&quot; toggle
za
&quot; range
:{range}fo[ld]</code></pre>
</section>
<section id="highlight-current-line" class="level3">
<h3>highlight current line</h3>
<pre class="vim"><code>:set cursorline</code></pre>
</section>
<section id="list-syntaxs" class="level3">
<h3>list syntaxs</h3>
<div class="sourceCode" id="cb132"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="op">&lt;</span><span class="va">$VIMRUNTIME</span><span class="op">&gt;</span>/syntax/</span></code></pre></div>
</section>
<section id="markdown-toc" class="level3">
<h3>markdown toc</h3>
<pre class="vim"><code>:GenTocGFM</code></pre>
</section>
<section id="mapped-keys" class="level3">
<h3>mapped keys</h3>
<p><a
href="Is%20there%20any%20way%20to%20view%20the%20currently%20mapped%20keys%20in%20Vim?">SO</a></p>
<pre class="vim"><code>&quot;:n/v/imap
:map
:h inex</code></pre>
</section>
<section id="popup-window" class="level3">
<h3>popup window</h3>
<pre class="vim"><code>🐁 &lt;leader&gt;[</code></pre>
</section>
<section id="runtime-folder" class="level3">
<h3>runtime folder</h3>
<pre class="vim"><code>:echo $VIMRUNTIME</code></pre>
</section>
<section id="split调整" class="level3">
<h3>split调整</h3>
<pre class="vim"><code>c-w _ ; max height
1c-w _ ;min height
c-w = ;same height
:on ; close others
c-w o ;same above</code></pre>
</section>
<section id="set-filetype-nvim" class="level3">
<h3>set filetype (nvim)</h3>
<p>it can control syntax and coc</p>
<pre class="vim"><code>set filetype=python</code></pre>
</section>
<section id="set-syntax" class="level3">
<h3>set syntax</h3>
<pre class="vim"><code>:set syntax=</code></pre>
</section>
<section id="syntax" class="level3">
<h3>syntax</h3>
<pre class="vim"><code>; set
:set syntax=html
; get
:set syntax</code></pre>
</section>
<section id="status-line" class="level3">
<h3>status line</h3>
<pre class="vim"><code>set laststatus=2</code></pre>
</section>
<section id="jumplist" class="level3">
<h3>jumplist</h3>
<pre class="vim"><code>:ju &quot; 列出jumplist
&lt;C-o&gt; &quot; 退
&lt;C-i&gt; &quot; 进</code></pre>
</section>
<section id="cscope" class="level3">
<h3>cscope</h3>
<pre class="vim"><code>; cs querytype
🐁 &lt;C-\&gt;[sgdcteFia]</code></pre>
<p>重新加载</p>
<pre class="vim"><code>:!cscope -R
:cs reset</code></pre>
</section>
<section id="mark" class="level3">
<h3>mark</h3>
<pre class="vim"><code>&lt;leader&gt;m &quot; 标记/取消标记
{N}&lt;leader&gt;m &quot; 给第N组添加标记词
{N}&lt;leader&gt;n &quot; 取消第N组的标记
&lt;leader&gt;M &quot; 显示标记颜色和标记词
🐁 &lt;leader&gt;&lt;F3&gt; &quot; 取消所有标记</code></pre>
</section>
<section id="ale-fix" class="level3">
<h3>ale-fix</h3>
<p>ale支持的fix位于</p>
<p><code>autoload/ale/fix/registry.vim</code></p>
<p>所有fixer的调用脚本位于</p>
<p><code>autoload/ale/fixers/</code></p>
</section>
<section id="wrap-line" class="level3">
<h3>wrap line</h3>
<pre class="vim"><code>; 🐁toggle
&lt;F9&gt;</code></pre>
</section>
<section id="terminal-mode" class="level3">
<h3>terminal mode</h3>
<p><code>:h :terminal</code></p>
<pre><code># exit temrinal mode
&lt;C-\&gt;&lt;C-N&gt;
# enter temrinal mode
i</code></pre>
</section>
</section>
<section id="diff" class="level2">
<h2>diff</h2>
<section id="diffthis" class="level3">
<h3>diffthis</h3>
<p>diff两个竖分buffers</p>
<pre class="vim"><code>; 分别在两个buffer里
:difft[his]
; 关闭，分别
:diffoff</code></pre>
</section>
<section id="gitgutter-diff" class="level3">
<h3>gitgutter-diff</h3>
<pre class="vim"><code>let g:gitgutter_diff_base = &#39;&#39;
:GitGutterDiffOrig</code></pre>
</section>
<section id="diff-obtainput" class="level3">
<h3>diff obtain/put</h3>
<pre class="vim"><code>&quot; obtain
do
&quot; put
dp</code></pre>
</section>
</section>
<section id="git-1" class="level2">
<h2>git</h2>
<section id="blame-fugitive" class="level3">
<h3>blame [# fugitive]</h3>
<p>和git相同的略。fugitive的特性：</p>
<pre class="vim"><code>:Git blame &quot; blame整个文件
:Gedit &quot; 跳转光标下到对应的object（某个版本的某个文件）</code></pre>
</section>
<section id="historic-file-fugitive" class="level3">
<h3>historic file [# fugitive]</h3>
<pre class="vim"><code>Gedit &lt;refname&gt;
enter &quot; opon
o &quot; horizon open
O &quot; new tab open
&lt;num&gt;gt &quot; switch tag</code></pre>
</section>
<section id="显示commit信息-git-messenger" class="level3">
<h3>显示commit信息 [git-messenger]</h3>
<pre class="vim"><code>&lt;leader&gt;gm &quot; 在popup窗口显示commit信息</code></pre>
</section>
</section>
<section id="plugins" class="level2">
<h2>plugins</h2>
<section id="ansiesc" class="level3">
<h3>AnsiEsc</h3>
<pre class="vim"><code>:AnsiEsc</code></pre>
</section>
<section id="config-local" class="level3">
<h3>config-local</h3>
<p><code>~/.local/share/nvim/config-local</code></p>
<pre class="vim"><code>:ConfigSource
:ConfigEdit
:ConfigTrust
:ConfigIgnore</code></pre>
</section>
<section id="lightspeed.nvim" class="level3">
<h3>lightspeed.nvim</h3>
<pre class="vim"><code>s ; forward
S ; backward</code></pre>
</section>
<section id="tree-sitter-update" class="level3">
<h3>tree-sitter update</h3>
<p><a
href="https://github.com/nvim-treesitter/nvim-treesitter/issues/759">GH
Issue: query.lua query: error at position #759</a></p>
<pre class="vim"><code>:TSUpdate</code></pre>
</section>
<section id="coc-disable" class="level3">
<h3>coc disable</h3>
<pre class="vim"><code>:CocDisable
:CocEnable</code></pre>
</section>
<section id="coc-disable-diagnostic" class="level3">
<h3>coc disable diagnostic</h3>
<p><code>:e</code> reload file is neccessary</p>
<pre class="vim"><code>:let b:coc_diagnostic_disable=1
:e</code></pre>
</section>
</section>
<section id="search" class="level2">
<h2>search</h2>
<section id="by-column" class="level3">
<h3>by column</h3>
<p><code>:h /\%c</code></p>
<pre class="vim"><code>\%23c   Matches in a specific column.
\%&lt;23c  Matches before a specific column.
\%&gt;23c  Matches after a specific column.
\%.c    Matches at the cursor column.
\%&lt;.c   Matches before the cursor column.
\%&gt;.c   Matches after the cursor column.</code></pre>
</section>
</section>
</section>
<section id="nix" class="level1">
<h1>nix</h1>
<section id="binary-cache" class="level2">
<h2>binary cache</h2>
<section id="paths" class="level3">
<h3>paths</h3>
<p><code>&lt;nix channel url&gt;/store-path.xz</code></p>
<p>e.g. https://mirror.tuna.tsinghua.edu.cn/nix-channels/nixos-21.11/store-paths.xz</p>
</section>
<section id="query" class="level3">
<h3>query</h3>
<p>refers to <a
href="https://discourse.nixos.org/t/is-it-possible-to-query-the-binary-cache/7893">Discourse:
Is it possible to query the binary cache?</a></p>
<div class="sourceCode" id="cb161"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix</span> path-info <span class="dt">\</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>--store https://cache.nixos.org/ <span class="dt">\</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>-f <span class="st">&#39;&lt;nixpkgs&gt;&#39;</span> <span class="dt">\</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>--argstr system x86_64-linux <span class="dt">\</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>pkgs-name<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="importexport" class="level3">
<h3>import/export</h3>
<pre><code># import may need sudo
nix-store --import/--export</code></pre>
</section>
<section id="copy" class="level3">
<h3>copy</h3>
<p><a
href="https://discourse.nixos.org/t/how-to-use-a-local-directory-as-a-nix-binary-cache/655">How
to use a local directory as a nix binary cache?</a></p>
<pre class="nix"><code>nix copy --no-check-sigs \
--to &lt;output/path&gt; &lt;/nixstore/path&gt;
nix-env -i &lt;output/path&gt;</code></pre>
</section>
<section id="copy-closure" class="level3">
<h3>copy closure</h3>
<div class="sourceCode" id="cb164"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nix-copy-closure <span class="at">--from</span> <span class="op">&lt;</span>user@ssh<span class="op">&gt;</span> <span class="op">&lt;</span>path<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="misc-1" class="level2">
<h2>misc</h2>
<section id="build-pkg" class="level3">
<h3>build pkg</h3>
<div class="sourceCode" id="cb165"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-build</span> <span class="st">&#39;&lt;nixpkgs&gt;&#39;</span> <span class="at">-A</span> <span class="op">&lt;</span>pkg<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="cheatsheet" class="level3">
<h3>cheatsheet</h3>
<p><a href="https://nixos.wiki/wiki/Cheatsheet">NixOS Wiki
Cheatsheet</a></p>
</section>
<section id="eval" class="level3">
<h3>eval</h3>
<div class="sourceCode" id="cb166"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix</span> eval <span class="st">&quot;()&quot;</span></span></code></pre></div>
</section>
<section id="gnome-extension" class="level3">
<h3>gnome extension</h3>
<p><code>pkgs/desktops/gnome/extensions/extensions.json</code></p>
</section>
<section id="prefetch-url" class="level3">
<h3>prefetch url</h3>
<div class="sourceCode" id="cb167"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-prefetch-url</span></span></code></pre></div>
</section>
<section id="prefetch-github" class="level3">
<h3>prefetch github</h3>
<div class="sourceCode" id="cb168"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-prefetch-url</span> <span class="at">--unpack</span> <span class="dt">\</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>https://github.com/<span class="op">&lt;</span>owner<span class="op">&gt;</span>/</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>repo<span class="op">&gt;</span>/archive/<span class="op">&lt;</span>rev<span class="op">&gt;</span>.tar.gz</span></code></pre></div>
</section>
<section id="prefetch-sha256" class="level3">
<h3>prefetch sha256</h3>
<p><a href="https://github.com/NixOS/nix/issues/1880">GH</a></p>
<div class="sourceCode" id="cb169"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-prefetch-url</span> <span class="at">--unpack</span></span></code></pre></div>
</section>
<section id="sha256" class="level3">
<h3>sha256</h3>
<div class="sourceCode" id="cb170"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-hash</span> <span class="at">--type</span> sha256 <span class="dt">\</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>--flat <span class="at">--base32</span> <span class="op">&lt;</span>file<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="size" class="level3">
<h3>size</h3>
<p><code>man nix3-path-info</code></p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix</span> path-info <span class="at">-Sh</span> <span class="op">&lt;</span>path<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="show-drv" class="level3">
<h3>show drv</h3>
<div class="sourceCode" id="cb172"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix</span> show-derivation <span class="op">&lt;</span>.drv<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="sys-garbage" class="level3">
<h3>sys garbage</h3>
<div class="sourceCode" id="cb173"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nix-collect-garbage <span class="at">-d</span></span></code></pre></div>
</section>
<section id="usr-garbage" class="level3">
<h3>usr garbage</h3>
<div class="sourceCode" id="cb174"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-collect-garbage</span> <span class="at">-d</span></span></code></pre></div>
</section>
<section id="repl" class="level3">
<h3>repl</h3>
<pre class="nix"><code>pkgs = import &lt;nixpkgs&gt; {}</code></pre>
</section>
<section id="old-generations" class="level3">
<h3>old generations</h3>
<p><a href="https://nixos.wiki/wiki/Storage_optimization">Nix Wiki:
Storage Opt</a></p>
<div class="sourceCode" id="cb176"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nix-env <span class="at">-p</span> /nix/var/nix/profiles/system <span class="at">--list-generations</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nix-collect-garbage <span class="at">-d</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="co"># User Generations (Home-Manager)</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-collect-garbage</span> <span class="at">-d</span></span></code></pre></div>
</section>
<section id="path" class="level3">
<h3>path</h3>
<p><a
href="https://nixos.org/guides/nix-pills/nix-search-paths.html">Nix
Pills: search Paths</a></p>
<div class="sourceCode" id="cb177"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-instantiate</span> <span class="at">--eval</span> <span class="at">-E</span> <span class="st">&quot;&lt;path&gt;&quot;</span></span></code></pre></div>
</section>
<section id="version" class="level3">
<h3>version</h3>
<div class="sourceCode" id="cb178"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-version</span> <span class="at">--hash</span></span></code></pre></div>
</section>
<section id="nix-on-droid-sshd" class="level3">
<h3>nix-on-droid sshd</h3>
<div class="sourceCode" id="cb179"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sshd-start</span></span></code></pre></div>
</section>
</section>
<section id="funclib" class="level2">
<h2>func/lib</h2>
<section id="fetch" class="level3">
<h3>fetch</h3>
<p>pkgs/build-support/fetch.*/</p>
</section>
<section id="mkderivation" class="level3">
<h3>mkDerivation</h3>
<p>https://nixos.org/manual/nix/stable/expressions/advanced-attributes.html</p>
<p>pkgs/stdenv/generic/make-derivation.nix</p>
</section>
</section>
<section id="lang" class="level2">
<h2>lang</h2>
<section id="escape-indented-str" class="level3">
<h3>escape indented str</h3>
<div class="sourceCode" id="cb180"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&#39;</span><span class="va">${bash_var}</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span></code></pre></div>
</section>
</section>
<section id="nixos" class="level2">
<h2>nixos</h2>
<section id="list-build-generations" class="level3">
<h3>list build-generations</h3>
<div class="sourceCode" id="cb181"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nix-env <span class="at">-p</span> /nix/var/nix/profiles/system <span class="at">--list-generations</span></span></code></pre></div>
</section>
</section>
<section id="nix-shell" class="level2">
<h2>nix-shell</h2>
<section id="build-input" class="level3">
<h3>build input</h3>
<div class="sourceCode" id="cb182"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="st">&#39;&lt;nixpkgs&gt;&#39;</span> <span class="at">-A</span></span></code></pre></div>
</section>
<section id="build-env" class="level3">
<h3>build env</h3>
<div class="sourceCode" id="cb183"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="st">&#39;&lt;nixpkgs&gt;&#39;</span> <span class="at">-A</span> <span class="op">&lt;</span>pkg<span class="op">&gt;</span></span></code></pre></div>
</section>
</section>
<section id="pkg-1" class="level2">
<h2>pkg</h2>
<section id="dependency" class="level3">
<h3>dependency</h3>
<pre><code># all dependencies
nix-store --query --requisites &lt;/nix/store/path&gt;
## or
nix-store --query -R &lt;/nix/store/path&gt;
# nested tree
nix-store --query --tree &lt;/nix/store/path&gt;
# only immediate dependencies
nix-store --query --references &lt;/nix/store/path&gt;</code></pre>
</section>
<section id="not-in-nixpkgs" class="level3">
<h3>not in nixpkgs</h3>
<div class="sourceCode" id="cb185"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="at">-E</span> <span class="st">&quot;with import &lt;nixpkgs&gt; {}; callPackage ./default.nix {}&quot;</span></span></code></pre></div>
</section>
<section id="priority" class="level3">
<h3>priority</h3>
<pre class="nix"><code>lib.lowPrio &lt;pkg&gt;</code></pre>
</section>
<section id="search-file" class="level3">
<h3>search file</h3>
<div class="sourceCode" id="cb187"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-locate</span> <span class="st">&#39;bin/hello&#39;</span></span></code></pre></div>
</section>
</section>
<section id="repl-1" class="level2">
<h2>repl</h2>
<section id="help" class="level3">
<h3>help</h3>
<pre class="nix"><code>:?</code></pre>
</section>
<section id="open-editor" class="level3">
<h3>open editor</h3>
<pre class="nix"><code>:e &lt;expr&gt;</code></pre>
</section>
</section>
<section id="usage" class="level2">
<h2>Usage</h2>
<section id="musl-libc" class="level3">
<h3>musl libc</h3>
<p>Support -static</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="at">-p</span> pkgsCross.musl64.stdenv.cc</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="ex">x86_64-unknown-linux-musl-gcc</span> <span class="at">-static</span> hello.c</span></code></pre></div>
</section>
<section id="static-compile" class="level3">
<h3>static compile</h3>
<p>Nix currently use musl-gcc</p>
<div class="sourceCode" id="cb191"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="at">-p</span> pkgsStatic.stdenv.cc</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="ex">x86_64-unknown-linux-musl-gcc</span> <span class="at">-static</span> hello.c</span></code></pre></div>
</section>
<section id="aarch64-cross" class="level3">
<h3>aarch64 cross</h3>
<div class="sourceCode" id="cb192"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="at">-p</span> pkgsCross.aarch64-multiplatform.stdenv.cc</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aarch64-unknown-linux-gnu-gcc</span></span></code></pre></div>
</section>
</section>
</section>
<section id="isa" class="level1">
<h1>ISA</h1>
<section id="arm" class="level2">
<h2>Arm</h2>
<section id="cond-flags" class="level3">
<h3>cond flags</h3>
<p>2021.armv8.pdf: B1.2.2 2021.armv8.pdf: C5.2.9</p>
<pre><code>// 6     333222       | N: Negative
// 3 ... 210987 ... 0 | Z: Zero
//  RES0  NZCV  RES0  | C: Carry (unsigned)
//                    | V: Overflow (signed)
//
mrs x1, NZCV // get NZCV
msr NZCV, x1 // set NZCV</code></pre>
</section>
<section id="ldst-align" class="level3">
<h3>ldst align</h3>
<p>2021.armv8.pdf</p>
<p>B2.5.2</p>
<ul>
<li>Load or Store of Single or Multiple regs</li>
<li>Load/Store-Exclusive and Atomic insts</li>
<li>Non-atomic Load-Acquire/Store-Release insts</li>
</ul>
</section>
<section id="exception-levels" class="level3">
<h3>Exception levels</h3>
<table>
<thead>
<tr class="header">
<th>EL</th>
<th>Description</th>
<th>Typical</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EL0</td>
<td>unprivileged execution</td>
<td>Applications</td>
</tr>
<tr class="even">
<td>EL1</td>
<td>privileged execution</td>
<td>OS kernel</td>
</tr>
<tr class="odd">
<td>EL2</td>
<td>virtualization</td>
<td>Hypervisor</td>
</tr>
<tr class="even">
<td>EL3</td>
<td>switching between Secure/Non-secure state</td>
<td>Secure monitor</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="arm-insts" class="level2">
<h2>Arm-Insts</h2>
<section id="refs" class="level3">
<h3>refs</h3>
<p>📑 Arm Architecture Reference Manual Armv8</p>
</section>
<section id="addr" class="level3">
<h3>addr</h3>
<ul>
<li>normal: <code>[x1]</code></li>
<li>offset: <code>[x1, #12]</code></li>
<li>pre-index: <code>[x1, #12]!</code> // x1+=12, addr=x1</li>
<li>post-index: <code>[x1], #12</code> // addr=x1, x1+=12</li>
</ul>
</section>
<section id="no-cmov" class="level3">
<h3>no cmov?</h3>
<p><a href="https://stackoverflow.com/questions/22168992">2014: SO: arm
no conditinal execution</a></p>
</section>
<section id="ptr-auth" class="level3">
<h3>ptr auth</h3>
<ul>
<li><a href="https://lwn.net/Articles/718888/">2017: LWN</a></li>
<li>§ Pointer authentication in AArch64 state</li>
</ul>
<p>arm linux only use bottom 40 bits of a pointer</p>
<pre><code>pointer[63:40] = PAC(pointer[39:40], key, modifier)
AUT(pointer[63:40], pointer[39:40], key, modifier)</code></pre>
<p>five separate keys:</p>
<ul>
<li>two for executable (instruction) pointers</li>
<li>two for data pointers</li>
<li>one generic pointers</li>
</ul>
</section>
<section id="ldtr-sttr" class="level3">
<h3>ldtr, sttr</h3>
<p><a href="https://stackoverflow.com/questions/59287799/">SO:
Load/Store unprivileged</a></p>
</section>
<section id="ldnp-stnp" class="level3">
<h3>ldnp, stnp</h3>
<p>ARMv8</p>
<p><a
href="https://developer.arm.com/documentation/den0024/a/Memory-Ordering/Barriers/Non-temporal-load-and-store-pair">Non-temporal
load and store pair</a></p>
<p>Hint mem system no cache, typically in streaming data.</p>
</section>
<section id="ldaxr-stxr" class="level3">
<h3>ldaxr, stxr</h3>
<p><a href="https://dynamorio.org/page_ldstex.html">DynamoRIO: Exclusive
Monitor</a></p>
<p>E.g. an atomic subtract</p>
<pre><code>1f404:   ldaxr   w1, [x0]
1f408:   sub     w2, w1, #0x1
1f40c:   stxr    w3, w2, [x0]
1f410:   cbnz    w3, 1f404</code></pre>
<p>cannot be nested,</p>
<p>as each hardware thread supports only one monitor.</p>
</section>
</section>
<section id="x86" class="level2">
<h2>x86</h2>
<section id="rflagseflags" class="level3">
<h3>rflags/eflags</h3>
<p>2020.amd64.pdf: 3.1.4</p>
<pre><code>// 11           | Overflow  Direction
// 10..76.4.2.0 | Sign      Zero
// OD  SZ A P C | Auxiliary Parity
//              | Carry
pushf // get
popf  // set</code></pre>
</section>
<section id="regs-ext" class="level3">
<h3>regs ext</h3>
<p>2020.amd64.pdf: 3.1.2</p>
<ul>
<li>byte(8) &amp; word(16) oprs not modify high 56 or 48 bits</li>
<li>dword(32) oprs zero-extended to 64 bits.</li>
</ul>
</section>
<section id="legacy-encode" class="level3">
<h3>legacy encode</h3>
<p>2020.amd64.pdf: Figure 1-2</p>
<p>2018.intel64.pdf: Figure 2-1</p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>B</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Legacy Prefix</td>
<td>≤5</td>
<td>optional</td>
</tr>
<tr class="even">
<td>REX</td>
<td>1</td>
<td>64-bit mode only</td>
</tr>
<tr class="odd">
<td>Escape</td>
<td>2</td>
<td>optional</td>
</tr>
<tr class="even">
<td>Opcode</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>ModRM</td>
<td>1</td>
<td>optional</td>
</tr>
<tr class="even">
<td>SIB</td>
<td>1</td>
<td>optional</td>
</tr>
<tr class="odd">
<td>Displacement</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Immediate</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ext-encode" class="level3">
<h3>ext encode</h3>
<p>2020.amd64.pdf: Figure 1-2</p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>B</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Legacy Prefix</td>
<td>≤4</td>
<td>optional</td>
</tr>
<tr class="even">
<td>VEX/XOP</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>RXB.map+Select</td>
<td>1</td>
<td>not for VEX C5</td>
</tr>
<tr class="even">
<td>W.vvvv.L.pp</td>
<td>1</td>
<td>not for VEX C5</td>
</tr>
<tr class="odd">
<td>R.vvvv.L.pp</td>
<td>1</td>
<td>for VEX C5</td>
</tr>
<tr class="even">
<td>Opcode</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>ModRM</td>
<td>1</td>
<td>optional</td>
</tr>
<tr class="even">
<td>SIB</td>
<td>1</td>
<td>optional</td>
</tr>
<tr class="odd">
<td>Displacement</td>
<td>1,2,4,8</td>
<td>8B Disp &amp; 8B Imm mutual exclusive</td>
</tr>
<tr class="even">
<td>Immediate</td>
<td>1,2,4,8</td>
<td>8B Disp &amp; 8B Imm mutual exclusive</td>
</tr>
</tbody>
</table>
</section>
<section id="modrm" class="level3">
<h3>modrm</h3>
<p>2020.amd64.pdf: Table 1-10</p>
<p>ModRM = mod[2] : reg[3] : r/m[3]</p>
<p>M: MMX, X: XMM, Y: YMM</p>
<table>
<thead>
<tr class="header">
<th>b</th>
<th>reg</th>
<th>r/m (mod=11b)</th>
<th>r/m (mod!=11b)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>000</td>
<td>rAX,M0,X0,Y0</td>
<td>rAX,M0,X0,Y0</td>
<td>[rAX]</td>
</tr>
<tr class="even">
<td>001</td>
<td>rCX,M1,X1,Y1</td>
<td>rCX,M1,X1,Y1</td>
<td>[rCX]</td>
</tr>
<tr class="odd">
<td>010</td>
<td>rDX,M2,X2,Y2</td>
<td>rDX,M2,X2,Y2</td>
<td>[rDX]</td>
</tr>
<tr class="even">
<td>011</td>
<td>rBX,M3,X3,Y3</td>
<td>rBX,M3,X3,Y3</td>
<td>[rBX]</td>
</tr>
<tr class="odd">
<td>100</td>
<td>AH,rSP,M4,X4,Y4</td>
<td>AH,rSP,M4,X4,Y4</td>
<td>SIB</td>
</tr>
<tr class="even">
<td>101</td>
<td>CH,rBP,M5,X5,Y5</td>
<td>CH,rBP,M5,X5,Y5</td>
<td>[rBP]*</td>
</tr>
<tr class="odd">
<td>110</td>
<td>DH,rSI,M6,X6,Y6</td>
<td>DH,rSI,M6,X6,Y6</td>
<td>[rSI]</td>
</tr>
<tr class="even">
<td>111</td>
<td>BH,rDI,M7,X7,Y7</td>
<td>BH,rDI,M7,X7,Y7</td>
<td>[rDI]</td>
</tr>
</tbody>
</table>
</section>
<section id="sib" class="level3">
<h3>sib</h3>
<p>2020.amd64.pdf: Table 1-12</p>
<p>SIB = scale[2] : index[3] : base[3]</p>
<p>scale = 2^(SIB.scale)</p>
<table>
<thead>
<tr class="header">
<th>b</th>
<th>index</th>
<th>base</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>000</td>
<td>[rAX]</td>
<td>[rAX]</td>
</tr>
<tr class="even">
<td>001</td>
<td>[rCX]</td>
<td>[rCX]</td>
</tr>
<tr class="odd">
<td>010</td>
<td>[rDX]</td>
<td>[rDX]</td>
</tr>
<tr class="even">
<td>011</td>
<td>[rBX]</td>
<td>[rBX]</td>
</tr>
<tr class="odd">
<td>100</td>
<td>(none)1</td>
<td>[rSP]</td>
</tr>
<tr class="even">
<td>101</td>
<td>[rBP]</td>
<td>[rBP], (none)2</td>
</tr>
<tr class="odd">
<td>110</td>
<td>[rSI]</td>
<td>DH, [rSI]</td>
</tr>
<tr class="even">
<td>111</td>
<td>[rDI]</td>
<td>BH, [rDI]</td>
</tr>
</tbody>
</table>
</section>
<section id="mem-opr" class="level3">
<h3>mem opr</h3>
<ul>
<li>Seg Selector: 16</li>
<li>Offset (or Linear Addr): 32/64</li>
</ul>
</section>
<section id="mem-opr-seg" class="level3">
<h3>mem opr: seg</h3>
<p>2018.intel64.pdf: Table 3-5</p>
<p>Default Segment Selection</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 5%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="header">
<th>Ref Type</th>
<th>Reg</th>
<th>Default Rule</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Inst</td>
<td>CS</td>
<td>All inst fetches</td>
</tr>
<tr class="even">
<td>Stack</td>
<td>SS</td>
<td>All pushes &amp; pops</td>
</tr>
<tr class="odd">
<td>Local Data</td>
<td>DS</td>
<td>All data, except relative to stack or string destination</td>
</tr>
<tr class="even">
<td>Destination Strings</td>
<td>ES</td>
<td>Destination string inst</td>
</tr>
</tbody>
</table>
</section>
<section id="mem-opr-off" class="level3">
<h3>mem opr: off</h3>
<p>2018.intel64.pdf: Table 3-5</p>
<pre><code>Offset =
  Base  + (Index * Scale) + Displacement
  +- -+   +- -+     +-+      +------+
  |eax|   |eax|     |1|      |None  |
  |ebx|   |ebx|     |2|      |8-bit |
  |ecx|   |ecx|     |4|      |16-bit|
  |edx| + |edx|  *  |8|   +  |32-bit|
  |esp|   |ebp|     | |      |      |
  |ebp|   |esi|     | |      |      |
  |esi|   |edi|     | |      |      |
  |edi|   |   |     | |      |      |
  +- -+   +---+     +-+      +------+</code></pre>
</section>
</section>
</section>
</body>
</html>

% Doc Thoughts
% ğŸ¤“xieby1
% â³2022.6.17

# åŠ¨æœº

<!-- Number of slides is huge, so toc is huge -->
<style>
[role="doc-toc"] {zoom: 60%;}
[role="doc-toc"] > ul {column-width: 400px;}
</style>

## äºŒè¿›åˆ¶ç¿»è¯‘

::: {.container}
:::: {.col}
<img src="./pictures/2022_6.bt.svg" style="zoom: 200%;">
::::
:::: {.col}
äºŒè¿›åˆ¶ç¿»è¯‘å¯ä»¥åˆ†ä¸º

ç”¨æˆ·çº§å’Œç³»ç»Ÿçº§ï¼ˆå·¦å›¾ï¼‰

---

åœ¨äºŒè¿›åˆ¶ç¿»è¯‘ä¸­

æœ‰ä¸¤ç±»å®¢æˆ·æŒ‡ä»¤

ç¿»è¯‘éš¾åº¦é«˜

1. é—´æ¥è·³è½¬æŒ‡ä»¤
2. è®¿å­˜æŒ‡ä»¤
::::
:::

## é—´æ¥è·³è½¬æŒ‡ä»¤

<img src="./pictures/2022_6.indirect_jump.svg" style="zoom: 150%;">

é—´æ¥è·³è½¬çš„ç›®æ ‡*GReg

æ— æ³•åœ¨ç¿»è¯‘æ—¶å¾—åˆ°ï¼Œåœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°

å› æ­¤

éœ€è¦è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆä¸Šå›¾è“çº¿ï¼‰

éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œåœ°å€æŸ¥è¯¢

:::{style="zoom: 50%; text-align:left;"}
Refs:

* Federico, Alessandro Di and Giovanni Agosta. â€œA jump-target identification method for multi-architecture static binary translation.â€ 2016 International Conference on Compliers, Architectures, and Sythesis of Embedded Systems (CASES) (2016): 1-10.
:::

## è®¿å­˜æŒ‡ä»¤

::: {.container}
:::: {.col}
<h4>ç³»ç»Ÿçº§</h4>

æŒ‡ä»¤è†¨èƒ€10x~100x[1]

<img src="./pictures/2022_6.sys_mem.svg" style="zoom: 150%;">
::::
:::: {.col}
<h4>ç”¨æˆ·çº§</h4>

å†…å­˜ç©ºé—´æŒ¤å 

<img src="./pictures/2022_6.usr_mem.svg" style="zoom: 150%;">
::::
:::

:::{style="zoom: 50%; text-align:left;"}
Refs:

1. 2014.espt, 2015.dual_tlb, 2015.hspt, 2021.btmmu
:::

## å¯å‘

<h3>ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼ˆHardware Virtualizationï¼‰</h3>

::: {.container}
:::: {.col}
æ“ä½œç³»ç»ŸçŠ¶æ€ï¼š

* ç”¨æˆ·çŠ¶æ€
* ç‰¹æƒçŠ¶æ€
* ğŸ†•è™šæ‹ŸåŒ–çŠ¶æ€
  * CPUè™šæ‹ŸåŒ–
  * å†…å­˜è™šæ‹ŸåŒ–
  * è®¾å¤‡è™šæ‹ŸåŒ–
::::
:::: {.col}
<img src="./pictures/2022_6.kvm_exec_loop.svg" style="zoom: 100%;">
::::
:::

:::{style="zoom: 50%; text-align:left;"}
Refs:

* Kivity, Avi. â€œkvm : the Linux Virtual Machine Monitor.â€ (2007).
:::

## å€Ÿé‰´

::: {.container}
:::: {.col}
* CPUè™šæ‹ŸåŒ–
  * æŒ‡ä»¤ç›´æ¥æ‰§è¡Œçš„å‡è±¡
    * ç›´æ¥æ‰§è¡Œ
    * é€€å‡ºè™šæ‹ŸåŒ–æ¨¡å¼

      å¤„ç†å®Œæˆå

      è¿”å›è™šæ‹ŸåŒ–æ¨¡å¼
* å†…å­˜è™šæ‹ŸåŒ–
  * ç‹¬å ç‰©ç†å†…å­˜çš„å‡è±¡
::::
:::: {.col .fragment}
* CPUè™šæ‹ŸåŒ–â†’é—´æ¥è·³è½¬æŒ‡ä»¤

  å¯ä»¥ç›´æ¥æ‰§è¡ŒæŒ‡ä»¤
    * ğŸˆšç¼“å­˜ç¿»è¯‘å‡ºçš„å®¿ä¸»ä»£ç 
    * ğŸˆšæ‰€æœ‰è·³è½¬ç›®æ ‡æŸ¥è¡¨
    * ğŸˆšç¿»è¯‘å™¨çš„ä¸Šä¸‹æ–‡åˆ‡æ¢
* å†…å­˜è™šæ‹ŸåŒ–â†’è®¿å­˜æŒ‡ä»¤

  æ‹¥æœ‰ç‹¬ç«‹çš„ç‰©ç†/è™šæ‹Ÿåœ°å€ç©ºé—´
  * ğŸ‰‘ï¼ˆç³»ç»Ÿçº§ï¼‰æŒ‡ä»¤è†¨èƒ€å°
  * ğŸˆšï¼ˆç”¨æˆ·çº§ï¼‰ç©ºé—´æŒ¤å çš„é—®é¢˜
::::
:::


## æ€»ç»“

::: {.container}
:::: {.col}
<h3>äºŒè¿›åˆ¶ç¿»è¯‘ä¸­çš„éš¾é¢˜</h3>

* é—´æ¥è·³è½¬æŒ‡ä»¤

  ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€

  è·³è½¬ç›®æ ‡æŸ¥è¡¨å¼€é”€

* è®¿å­˜æŒ‡ä»¤

  æŒ‡ä»¤è†¨èƒ€

  å†…å­˜ç©ºé—´æŒ¤å 
::::
:::: {.col}
<h3>ç¡¬ä»¶è™šæ‹ŸåŒ–çš„å¯å‘</h3>

è®©å®¢æˆ·ï¼ˆguestï¼‰

* èƒ½å¤Ÿç›´æ¥æ‰§è¡ŒæŒ‡ä»¤
* æ‹¥æœ‰ç‹¬ç«‹çš„ç‰©ç†/è™šæ‹Ÿåœ°å€ç©ºé—´
::::
:::

# è®¾è®¡æ„æƒ³

::: {.container}
:::: {.col}
æ“ä½œç³»ç»ŸçŠ¶æ€ï¼š

* ç”¨æˆ·çŠ¶æ€
* ç‰¹æƒçŠ¶æ€
* è™šæ‹ŸåŒ–çŠ¶æ€
* ğŸ†•ç¿»è¯‘çŠ¶æ€

  (Translation Mode)
::::
:::: {.col}
| ç¿»è¯‘                 | è™šæ‹ŸåŒ–       | å½±å“             |
|:--------------------:|:------------:|:-----------------|
| ç³»ç»Ÿçº§**&ç”¨æˆ·çº§**    | ç³»ç»Ÿçº§       | æ‰§è¡Œæµç¨‹å­˜åœ¨åŒºåˆ« |
| ç›´æ¥æ‰§è¡Œ**å®¢æˆ·**æŒ‡ä»¤ | ç›´æ¥æ‰§è¡ŒæŒ‡ä»¤ | æŒ‡ä»¤é›†å­˜åœ¨åŒºåˆ«   |
::::
:::

## æ‰§è¡Œæµç¨‹

<img src="./pictures/2022_6.btmode_exec_loop.svg" style="zoom:150%;">


## æŒ‡ä»¤é›†

ç›´æ¥æ‰§è¡Œ[å®¢æˆ·]{style="font-size: 1.5em; font-weight: bold;"}æŒ‡ä»¤çš„å‡è±¡

:::{.fragment}
å¤ç”¨&æ‹“å±•

å®¿ä¸»æŒ‡ä»¤é›†(Host ISA)

ä»¥æ”¯æŒå®¢æˆ·æŒ‡ä»¤é›†(Guest ISA)
:::

## å¤ç”¨&æ‹“å±•

::: {.container}
:::: {.col}
å®¿ä¸»æŒ‡ä»¤é›†+å®¢æˆ·æŒ‡ä»¤é›†

<img src="./pictures/2022_6.add_isa.svg" style="zoom: 120%;">

æ³•å¾‹é—®é¢˜

ä¸ä¼˜é›…
::::
:::: {.col}
è®¾è®¡ä¸€å¥—å¾®ç 

<img src="./pictures/2022_6.union_isa.svg" style="zoom: 120%;">

[å¤ç”¨]{.fragment .highlight-red}&æ‹“å±•

å°½å¯èƒ½æŒ–æ˜å…¬å…±éƒ¨åˆ†
::::
:::

## ç¿»è¯‘ğŸ†šå¾®ç 

äºŒè¿›åˆ¶ç¿»è¯‘ï¼ˆå·¦ï¼‰
å¾®ç +ç¿»è¯‘çŠ¶æ€ï¼ˆå³ï¼‰

::: {.container}
:::: {.col}
<img src="./pictures/2022_6.bt_arch.svg" style="zoom: 150%;">
::::
:::: {.col}
<img src="./pictures/2022_6.uop_arch.svg" style="zoom: 150%;">
::::
:::: {.col}
* â€œ1â€å‹å˜ä¸ºâ€œYâ€å‹
* ğŸ“ˆå®¢æˆ·æŒ‡ä»¤æ•ˆç‡
* ğŸ“‰å®¿ä¸»æŒ‡ä»¤æ•ˆç‡
::::
:::

## å¼¥è¡¥å®¿ä¸»

::: {.container}
:::: {.col}
å¤šæ ¸[1]

* åŒæŒ‡ä»¤é›†å¤šæ ¸
* åŒæŒ‡ä»¤é›†å¼‚æ„å¤šæ ¸[2]
* å¤šæŒ‡ä»¤é›†å¼‚æ„å¤šæ ¸[3]
::::
:::: {.col}
<img src="./pictures/2022_6.ht_cores.svg" style="zoom: 150%;">
::::
:::

:::{style="zoom:50%; text-align:left;"}
Refs:

1. Mitra, Tulika. â€œHeterogeneous Multi-core Architectures.â€ IPSJ Trans. Syst. LSI Des. Methodol. 8 (2015): 51-62.
2. Peter Greenhalgh. big.LITTLE Processing with ARM Cortex-A15 & Cortex-A7. Technical report, ARM, 2011
3. Venkat, Ashish. â€œBreaking the ISA Barrier in Modern Computing.â€ (2018).
:::

## æ€»ç»“

* æ“ä½œç³»ç»ŸçŠ¶æ€ï¼šğŸ†•ç¿»è¯‘çŠ¶æ€(Translation Mode)
* ä½¿ç”¨å¾®ç (uops)å¤ç”¨&æ‹“å±•å®¿ä¸»æŒ‡ä»¤é›†ä»¥æ”¯æŒå®¢æˆ·æŒ‡ä»¤é›†
* åŸç”Ÿå¤šæ ¸å¼¥è¡¥ç¿»è¯‘å¢å¼ºæ ¸(Translation Enchanged Core)

# å¾®ç è®¾è®¡

<img src="./pictures/2022_6.union_isa.svg" style="zoom: 200%;">

[å¤ç”¨]{style="color: red;"}&æ‹“å±•

## ç±»æ¯”

| çº¿æ€§ä»£æ•°           | å¾®ç è®¾è®¡                    |
|--------------------|-----------------------------|
| å‘é‡é›†ç”²å’Œå‘é‡é›†ä¹™ | å®¿ä¸»æŒ‡ä»¤é›†å’Œå®¢æˆ·æŒ‡ä»¤é›†      |
| å‘é‡ç©ºé—´           | æŒ‡ä»¤ç©ºé—´                    |
| åŸºåº•               | ä¸­é—´è¡¨ç¤º                    |
| æ±‚æ ‡å‡†æ­£äº¤åŸºåº•     | [è¿›è¡Œé‡ç»„orç²¾ç®€]{.fragment} |

<!-- | çº¿æ€§ä»£æ•°                  | å¾®ç è®¾è®¡                 | -->
<!-- |---------------------------|--------------------------| -->
<!-- | å‘é‡é›†Vå’Œå‘é‡é›†W          | å®¿ä¸»æŒ‡ä»¤é›†Hå’Œå®¢æˆ·æŒ‡ä»¤é›†G | -->
<!-- | å‘é‡ç©ºé—´Space(.)          | æŒ‡ä»¤ç©ºé—´                 | -->
<!-- | åŸºåº•B                     | ä¸­é—´è¡¨ç¤ºIR               | -->
<!-- | æ ‡å‡†æ­£äº¤åŸºåº•OrthoBasis(.) | éœ€è¦è¿›è¡Œé‡ç»„orç²¾ç®€       | -->

<!-- Space(VâˆªW) âŠ‹ Space(B) -->

<!-- Space(HâˆªG) âŠ‹ Space(IR) -->

## ä¸­é—´è¡¨ç¤º

| ç¿»è¯‘/ç¼–è¯‘å™¨  | è¯­ä¹‰åˆ†æ                                         | è¯´æ˜          |
|--------------|--------------------------------------------------|---------------|
| LLVM[6], TCG | cakeml[1], ACL2, K[2], FuzzBall[3], sail\[4\][5] | å¸¸è§é¡¹ç›®      |
| byte         | bit                                              | ç²¾åº¦é«˜ä½      |
| å®¢æˆ·&å®¿ä¸»    | å®¢æˆ·                                             | å®¢æˆ·/å®¿ä¸»è®¿å­˜ |
| æ¨¡æ‹Ÿè¯­ä¹‰     | éªŒè¯è¯­ä¹‰                                         | åå‘è½¯ä»¶/ç¡¬ä»¶ |

:::{style="zoom: 50%; text-align:left;"}
Refs:

1. Kumar, Ramana et al. â€œCakeML: a verified implementation of ML.â€ Proceedings of the 41st ACM SIGPLAN-SIGACT (2014).
2. Dasgupta, Sandeep et al. â€œA complete formal semantics of x86-64 user-level instruction set architecture.â€ Proceedings of the 40th ACM SIGPLAN (2019).
3. https://github.com/bitblaze-fuzzball/fuzzball
4. Gray, Kathryn E. et al. â€œAn integrated concurrency and core-ISA architectural envelope definition, and test oracle, for IBM POWER multiprocessors.â€ 48th MICRO (2015): 635-646.
5. Armstrong, Alasdair et al. â€œDetailed Models of Instruction Set Architectures : From Pseudocode to Formal Semantics.â€ (2018).
6. Lattner, Chris and Vikram S. Adve. â€œLLVM: a compilation framework for lifelong program analysis & transformation.â€ International Symposium on Code Generation and Optimization, 2004. CGO 2004. (2004): 75-86.
:::

## æ•°æ®æµå›¾

::: {.container}
:::: {.col .fragment}
arm64å€Ÿä½å‡æ³•

å®¢æˆ·æŒ‡ä»¤

```
sbc x1, x2, x3
```

ä¸­é—´è¡¨ç¤º

```
not tmp,x3
add x1,x2,tmp
add x1,x1,CF
```
::::
:::: {.col .fragment style="zoom: 200%;"}
â¬Œ
::::
:::: {.col .fragment}
<img src="./pictures/2022_6.sbc.svg" style="zoom: 200%;">
::::
:::: {.col .fragment style="zoom: 200%;"}
â¡
::::
:::: {.col .fragment}
<img src="./pictures/2022_6.sbc_subgraphs.svg" style="zoom: 200%;">
::::
:::

:::{style="zoom: 50%; text-align:left;"}
æ³¨ï¼šå‡†ç¡®ç§°å‘¼æ˜¯â€œè¿é€šå¯¼å‡ºå­å›¾â€ï¼ˆConnected Induced Subgraphï¼‰
https://en.wikipedia.org/wiki/Induced_subgraph
:::

## å­å›¾è¦†ç›–

| çº¿æ€§ä»£æ•°           | å¾®ç è®¾è®¡               | å›¾             |
|--------------------|------------------------|----------------|
| å‘é‡é›†ç”²å’Œå‘é‡é›†ä¹™ | å®¿ä¸»æŒ‡ä»¤é›†å’Œå®¢æˆ·æŒ‡ä»¤é›† | å›¾é›†ç”²å’Œå›¾é›†ä¹™ |
| å‘é‡ç©ºé—´           | æŒ‡ä»¤ç©ºé—´               | å­å›¾é›†         |
| åŸºåº•               | ä¸­é—´è¡¨ç¤º               | å­å›¾           |
| æ±‚æ ‡å‡†æ­£äº¤åŸºåº•     | è¿›è¡Œé‡ç»„orç²¾ç®€         | å­å›¾è¦†ç›–       |

## è¦†ç›–ç®—æ³•

<!-- https://stackoverflow.com/questions/13091433/center-child-divs-inside-parent-div -->
:::{style="display:inline-block; text-align:left;"}
::::{.fragment data-fragment-index="1"}
`for` æ¯ä¸€æ¡æŒ‡ä»¤ `in` æŒ‡ä»¤é›†

{
::::
ä¸€æ¡æŒ‡ä»¤â¡ä¸€å¹…å›¾é›†â¡ä¸€ä¸ªå­å›¾é›†

[}]{.fragment data-fragment-index="1"}[â¡]{.fragment data-fragment-index="2"}

[å¸¦æƒé‡ï¼ˆæ¯”å¦‚é¢‘ç‡ï¼‰çš„å­å›¾é›†]{.fragment data-fragment-index="2"}

::::{.fragment data-fragment-index="3"}
â¡

æ ¹æ®æƒé‡é€‰å‡ºæœ€å°è¦†ç›–å›¾é›†
::::
::::{.fragment data-fragment-index="4"}
â¡

å¾®ç é›†
::::
:::

## æ€»ç»“

* ä½¿ç”¨ä¸­é—´è¡¨ç¤ºå°†æŒ‡ä»¤è½¬æ¢ä¸ºå›¾
* ç”¨å›¾è¦†ç›–ç®—æ³•ç­›é€‰å‡ºæœ€å°è¦†ç›–é›†
* æœ€å°è¦†ç›–é›†å³æ˜¯å¾®ç é›†

# å®éªŒå’Œæ•°æ®

## a64æŒ‡ä»¤

::: {.container style="zoom:50%;"}
:::: {.col}
<h3>å‚ä¸è¦†ç›–çš„æŒ‡ä»¤</h3>

250ç§859æ¡

adc
adcs
add
adds
adr
adrp
and
ands
asr
autda
autdb
autdza
autdzb
autia
autia1716
autiasp
autiaz
autib
autib1716
autibsp
autibz
autiza
autizb
bfc
bfi
bfxil
bic
bics
cas
casa
casab
casah
casal
casalb
casalh
casb
cash
casl
caslb
caslh
casp
caspa
caspal
caspl
cfinv
clrex
cls
clz
cmn
cmp
crc32b
crc32cb
crc32ch
crc32cw
crc32cx
crc32h
crc32w
crc32x
eon
eor
extr
ldadd
ldadda
ldaddab
ldaddah
ldaddal
ldaddalb
ldaddalh
ldaddb
ldaddh
ldaddl
ldaddlb
ldaddlh
ldclr
ldclra
ldclrab
ldclrah
ldclral
ldclralb
ldclralh
ldclrb
ldclrh
ldclrl
ldclrlb
ldclrlh
ldeor
ldeora
ldeorab
ldeorah
ldeoral
ldeoralb
ldeoralh
ldeorb
ldeorh
ldeorl
ldeorlb
ldeorlh
ldlar
ldlarb
ldlarh
ldnp
ldp
ldpsw
ldr
ldraa
ldrab
ldrb
ldrh
ldrsb
ldrsw
ldset
ldseta
ldsetab
ldsetah
ldsetal
ldsetalb
ldsetalh
ldsetb
ldseth
ldsetl
ldsetlb
ldsetlh
ldsmax
ldsmaxa
ldsmaxab
ldsmaxah
ldsmaxal
ldsmaxalb
ldsmaxalh
ldsmaxb
ldsmaxh
ldsmaxl
ldsmaxlb
ldsmaxlh
ldsmin
ldsmina
ldsminab
ldsminah
ldsminal
ldsminalb
ldsminalh
ldsminb
ldsminh
ldsminl
ldsminlb
ldsminlh
ldtr
ldtrb
ldtrh
ldtrsb
ldtrsh
ldtrsw
ldumax
ldumaxa
ldumaxab
ldumaxah
ldumaxal
ldumaxalb
ldumaxalh
ldumaxb
ldumaxh
ldumaxl
ldumaxlb
ldumaxlh
ldumin
ldumina
lduminab
lduminah
lduminal
lduminalb
lduminalh
lduminb
lduminh
lduminl
lduminlb
lduminlh
ldur
ldurb
ldurh
ldursb
ldursh
ldursw
ldxp
ldxr
ldxrb
ldxrh
lsl
lsr
madd
mneg
mov
msub
mul
mvn
neg
negs
ngc
ngcs
orn
orr
pacda
pacdb
pacdza
pacdzb
pacga
rbit
rev
rev16
rev32
ror
sbc
sbcs
sbfiz
sbfx
sdiv
setf16
setf8
smaddl
smnegl
smsubl
smulh
smull
stp
str
strb
sttr
sttrb
sttrh
stur
sturb
sturh
sub
subs
sxtb
sxth
sxtw
tst
ubfiz
ubfx
udiv
umaddl
umnegl
umsubl
umulh
umull
uxtb
uxth
xpacd
xpaci
xpaclri
::::
:::: {.col}
<h3>è¢«è¿‡æ»¤æ‰çš„æŒ‡ä»¤</h3>

39ç§207æ¡

at
br
brk
ccmn
ccmp
cinc
cinv
csdb
csel
cset
csetm
csinc
csinv
csneg
dc
dcps1
dcps2
dcps3
dmb
drps
dsb
eret
esb
hint
hlt
hvc
ic
isb
mrs
msr
smc
stxp
stxr
stxrb
stxrh
svc
sys
tlbi
::::
:::

## x64æŒ‡ä»¤

::: {.container style="zoom:40%;"}
:::: {.col}
<h3>å‚ä¸è¦†ç›–çš„æŒ‡ä»¤</h3>

285ç§ï¼ˆæ“ä½œæ•°å¤§å°ä¸åŒè§†ä¸ºä¸åŒï¼‰861æ¡

adcb
adcl
adcq
adcw
addb
addl
addq
addw
andb
andl
andq
andw
blcfillq
blcicq
blciq
blcmskq
blcsq
blsfillq
blsicq
bsfl
bsfq
bsfw
bsrl
bsrq
bsrw
bswapl
bswapq
bswapw
btcl
btcq
btcw
btl
btq
btrl
btrq
btrw
btsl
btsq
btsw
btw
cbtw
clc
cld
cltd
cltq
cmc
cmovael
cmovaeq
cmovaew
cmoval
cmovaq
cmovaw
cmovbel
cmovbeq
cmovbew
cmovbl
cmovbq
cmovbw
cmovel
cmoveq
cmovew
cmovgel
cmovgeq
cmovgew
cmovgl
cmovgq
cmovgw
cmovlel
cmovleq
cmovlew
cmovll
cmovlq
cmovlw
cmovnel
cmovneq
cmovnew
cmovnol
cmovnoq
cmovnow
cmovnpl
cmovnpq
cmovnpw
cmovnsl
cmovnsq
cmovnsw
cmovol
cmovoq
cmovow
cmovpl
cmovpq
cmovpw
cmovsl
cmovsq
cmovsw
cmpb
cmpl
cmpq
cmpsb
cmpsl
cmpsq
cmpsw
cmpw
cmpxchgb
cmpxchgl
cmpxchgq
cmpxchgw
cqto
cwtd
cwtl
decb
decl
decq
decw
enter
imulb
imull
imulq
imulw
incb
incl
incq
incw
lahf
leal
leaq
leave
leaw
llwpcb
lodsb
lodsl
lodsq
lodsw
lsll
lzcntl
lzcntq
lzcntw
movabsq
movb
movl
movntil
movntiq
movq
movsb
movsbl
movsbq
movsbw
movsl
movslq
movsq
movsw
movswl
movswq
movw
movzbl
movzbq
movzbw
movzwl
movzwq
mulb
mull
mulq
mulw
negb
negl
negq
negw
notb
notl
notq
notw
orb
orl
orq
orw
popq
popw
pushfq
pushfw
pushq
pushw
rclb
rcll
rclq
rclw
rcrb
rcrl
rcrq
rcrw
rdpkru
rolb
roll
rolq
rolw
rorb
rorl
rorq
rorw
sahf
sarb
sarl
sarq
sarw
sbbb
sbbl
sbbq
sbbw
scasb
scasl
scasq
scasw
seta
setae
setb
setbe
sete
setg
setge
setl
setle
setne
setno
setnp
setns
seto
setp
sets
sgdtq
shlb
shldl
shldq
shldw
shll
shlq
shlw
shrb
shrdl
shrdq
shrdw
shrl
shrq
shrw
sidtq
sldtl
sldtq
sldtw
slwpcb
smswl
smswq
smsww
stc
std
stosb
stosl
stosq
stosw
strl
strq
strw
subb
subl
subq
subw
t1mskcq
testb
testl
testq
testw
tzcntl
tzcntq
tzcntw
tzmskq
xabort
xaddb
xaddl
xaddq
xaddw
xchgb
xchgl
xchgq
xchgw
xlatb
xorb
xorl
xorq
xorw
::::
:::: {.col}
<h3>è¢«è¿‡æ»¤æ‰çš„æŒ‡ä»¤</h3>

189ç§ï¼ˆæ“ä½œæ•°å¤§å°ä¸åŒè§†ä¸ºä¸åŒï¼‰234æ¡

adcxl
adcxq
adoxl
adoxq
andnl
andnq
bextrl
bextrq
blsil
blsiq
blsmskl
blsmskq
blsrl
blsrq
bzhil
bzhiq
clac
cldemote
clflush
clgi
cli
clts
clzero
cmpxchg16b
cmpxchg8b
cpuid
crc32b
crc32l
crc32q
crc32w
divb
divl
divq
divw
endbr32
endbr64
fxrstor
fxrstor64
fxsave
fxsave64
fxtract
getsec
hlt
idivb
idivl
idivq
idivw
inb
incsspd
incsspq
inl
insb
insl
insw
int
int3
invd
invlpga
inw
iretl
iretq
iretw
larl
larw
lcalll
lcallq
lcallw
ldmxcsr
lfence
lfsl
lfsq
lfsw
lgs
lgsl
lgsw
ljmpl
ljmpq
ljmpw
lldtw
lmsww
lretl
lslq
lslw
lssl
lssq
lssw
ltrw
mfence
monitor
monitorx
mulxl
mulxq
mwait
mwaitx
nop
nopl
nopq
nopw
outb
outl
outsb
outsl
outsw
outw
pause
pconfig
pdepl
pdepq
pextl
pextq
popfq
popfw
prefetch
prefetchnta
prefetcht0
prefetcht1
prefetcht2
prefetchw
prefetchwt1
ptwritel
ptwriteq
rdfsbasel
rdfsbaseq
rdgsbasel
rdgsbaseq
rdmsr
rdpid
rdpmc
rdrandl
rdrandq
rdrandw
rdseedl
rdseedq
rdseedw
rdsspd
rdsspq
rdtsc
rdtscp
retq
sarxl
sarxq
saveprevssp
setssbsy
sfence
shlxl
shlxq
shrxl
shrxq
skinit
stac
stgi
sti
stmxcsr
swapgs
syscall
sysenter
sysexitl
sysexitq
sysretl
sysretq
tpause
ud0
ud1
ud2
umonitor
umwait
verr
verw
vmcall
vmfunc
vmlaunch
vmload
vmmcall
vmresume
vmrun
vmsave
wbinvd
wbnoinvd
wrfsbasel
wrfsbaseq
wrgsbasel
wrgsbaseq
wrmsr
wrpkru
xend
xgetbv
xsetbv
xtest
::::
:::

## ä¸­é—´è¡¨ç¤º

ï¼ˆè¿‡æ»¤å‰ï¼‰æŒ‡ä»¤ç¿»è¯‘åˆ°TCGçš„è†¨èƒ€ç‡

::: {.container style="zoom:70%;"}
:::: {.col}
a64

| é¢‘æ¬¡ | TCG |  | é¢‘æ¬¡ | TCG |
|------|-----|--|------|-----|
| 37   | 0   |  | 13   | 10  |
| 209  | 1   |  | 12   | 11  |
| 168  | 2   |  | 14   | 12  |
| 93   | 3   |  | 9    | 13  |
| 150  | 4   |  | 11   | 14  |
| 167  | 5   |  | 6    | 15  |
| 86   | 6   |  | 11   | 16  |
| 9    | 7   |  | 7    | 17  |
| 23   | 8   |  | 2    | 18  |
| 40   | 9   |  |      |     |
::::
:::: {.col}
x64

| é¢‘æ¬¡ | TCG |  | é¢‘æ¬¡ | TCG |  | é¢‘æ¬¡ | TCG |
|------|-----|--|------|-----|--|------|-----|
| 47   | 0   |  | 98   | 10  |  | 4    | 20  |
| 27   | 1   |  | 69   | 11  |  | 1    | 21  |
| 48   | 2   |  | 55   | 12  |  | 1    | 22  |
| 46   | 3   |  | 17   | 13  |  |      |     |
| 349  | 4   |  | 10   | 14  |  |      |     |
| 30   | 5   |  | 8    | 15  |  |      |     |
| 84   | 6   |  | 8    | 16  |  |      |     |
| 153  | 7   |  | 6    | 17  |  |      |     |
| 81   | 8   |  | 13   | 18  |  |      |     |
| 161  | 9   |  | 3    | 19  |  |      |     |
::::
:::

## å›¾è¦†ç›–

* å…±27356ä¸ªå­å›¾
* æœ€å°è¦†ç›–é›†åŒ…å«çš„å­å›¾æ•°é‡
  * ä»…ç”¨äºè¦†ç›–a64ï¼š130
  * ç”¨äºè¦†ç›–a64å’Œx64ï¼š97
  * ä»…ç”¨äºè¦†ç›–x64ï¼š129
* å¹³å‡è¦†ç›–æ‰€éœ€å­å›¾æ•°ï¼ˆå¹³å‡è†¨èƒ€ç‡ï¼‰
  * a64ï¼š2.86
  * x64ï¼š3.66

## äººå·¥å¤æ ¸

::: {.container}
:::: {.col}
a64è†¨èƒ€ç‡[1]

| é¢‘æ¬¡ | æ•°é‡ |
|------|------|
| 9    | 0    |
| 153  | 1    |
| 55   | 2    |
| 13   | 3    |
::::
:::: {.col}
x64è†¨èƒ€ç‡[2]

| é¢‘æ¬¡ | æ•°é‡ |  | é¢‘æ¬¡ | æ•°é‡ |
|------|------|--|------|------|
| 37   | 1    |  | 8    | 5    |
| 15   | 2    |  | 1    | 6    |
| 20   | 3    |  | 1    | 8    |
| 14   | 4    |  | 1    | 9    |
::::
:::: {.col}
* æœ€å°è¦†ç›–é›†çš„å­å›¾æ•°é‡[3]
  * ä»…ç”¨äºè¦†ç›–a64ï¼š55
  * ç”¨äºè¦†ç›–a64å’Œx64ï¼š29
  * ä»…ç”¨äºè¦†ç›–x64ï¼š20
::::
:::

:::{style="zoom: 50%; text-align:left;"}
æ³¨ï¼š

1. å¤æ ¸a64æ—¶è·³è¿‡äº†éƒ¨åˆ†æ“ä½œæ•°é‡è½½ç±»å‹çš„æŒ‡ä»¤
2. å¤æ ¸x64æ—¶è·³è¿‡äº†å¤§å¤šæ“ä½œæ•°é‡è½½ç±»å‹çš„æŒ‡ä»¤
3. å»é™¤äº†ç«‹å³æ•°ã€ä½å®½ã€æ‰©å±•ã€ç¬¦å·è®¡ç®—ï¼Œè¿™äº›æš‚æ—¶ç”±äººå·¥æ¯”å¯¹
:::

# è°¢è°¢

[ğŸ±]{style="zoom:400%;"}

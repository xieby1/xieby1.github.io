<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>qemu-wine-logs.md - xieby1&#x27;s notes</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../..//fonts/lxgwwenkai-regular.css" />
        <link rel="stylesheet" href="../..//fonts/lxgwwenkaimono-regular.css" />
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../index.html">Welcome</a></li><li class="chapter-item "><a href="../../Essays.html">Essays</a></li><li class="chapter-item "><a href="../../abbreviations.html">abbreviations</a></li><li class="chapter-item affix "><li class="part-title">xieby1's notes</li><li class="chapter-item "><div>ABI</div></li><li class="chapter-item "><div>Algo</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Graph</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Algo/Graph/1998.distance.bunke.prl.775.html">1998.distance.bunke.prl.775.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2002.inexact_match.bengoetxea.doc_thesis.107.html">2002.inexact_match.bengoetxea.doc_thesis.107.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2014.attributed.zhang.cvpr.19.html">2014.attributed.zhang.cvpr.19.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2016.survey.yan.icmr.108.html">2016.survey.yan.icmr.108.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2021.igraphmatch.qiao..0.html">2021.igraphmatch.qiao..0.md</a></li></ol></li></ol></li><li class="chapter-item "><div>analysis</div></li><li class="chapter-item "><div>Arch</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>HT</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/HT/2005.cell.kahle.ibmjrd.1093.html">2005.cell.kahle.ibmjrd.1093.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2012.process_migration.devuyst.asplos.83.html">2012.process_migration.devuyst.asplos.83.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2014.isa_explore.venkat.isca.112.html">2014.isa_explore.venkat.isca.112.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2015.overview.mitra.jip.15.html">2015.overview.mitra.jip.15.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2018.process_migration.venkat.doc_thesis.5.html">2018.process_migration.venkat.doc_thesis.5.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2019.composite_isa.venkat.hpca.17.html">2019.composite_isa.venkat.hpca.17.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2020.byoc_framework.balkind.asplos.3.html">2020.byoc_framework.balkind.asplos.3.md</a></li><li class="chapter-item "><a href="../../Arch/HT/doc_thoughts.html">doc_thoughts.md</a></li></ol></li><li class="chapter-item "><div>reconf</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/reconf/1997.chimaera.hauck.fccm.461.html">1997.chimaera.hauck.fccm.461.md</a></li><li class="chapter-item "><a href="../../Arch/reconf/2008.reconf_acc.beck.date.97.html">2008.reconf_acc.beck.date.97.md</a></li></ol></li><li class="chapter-item "><div>VLIW</div></li></ol></li><li class="chapter-item "><div>Benchmarks</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Benchmarks/coremark.html">coremark.md</a></li><li class="chapter-item "><div>herdtools7</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Benchmarks/herdtools7/overview.html">å†…å­˜æ¨¡å‹æµ‹è¯•â€”â€”DIYï¼ˆHerdtoolsï¼‰</a></li></ol></li><li class="chapter-item "><a href="../../Benchmarks/spec/index.html">spec</a></li><li class="chapter-item "><a href="../../Benchmarks/spec2000.html">spec2000.md</a></li></ol></li><li class="chapter-item "><div>BT</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>algo</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/2006.lib.æ¨æµ©.è®¡ç®—æœºç ”ç©¶ä¸å‘å±•.0.html">2006.lib.æ¨æµ©.è®¡ç®—æœºç ”ç©¶ä¸å‘å±•.0.md</a></li><li class="chapter-item "><a href="../../BT/algo/2016.static_identify_jump_target.federico.cases.9.html">2016.static_identify_jump_target.federico.cases.9.md</a></li><li class="chapter-item "><div>bt_rules</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/bt_rules/2006.peephole_superopt.bansal.asplos.134.html">2006.peephole_superopt.bansal.asplos.134.md</a></li><li class="chapter-item "><a href="../../BT/algo/bt_rules/2018.learn.wwwang.asplos.11.html">2018.learn.wwwang.asplos.11.md</a></li></ol></li><li class="chapter-item "><div>offload</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/offload/2010.distribit.guan.hpdc.5.html">2010.distribit.guan.hpdc.5.md</a></li></ol></li><li class="chapter-item "><div>reg</div></li><li class="chapter-item "><div>smc</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/smc/2015.detect.hawkins.cgo.24.html">2015.detect.hawkins.cgo.24.md</a></li></ol></li><li class="chapter-item "><div>trace</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/trace/1994.opt_profiling_tracing.ball.toplas.580.html">1994.opt_profiling_tracing.ball.toplas.580.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2000.net.duesterwald.asplos.141.html">2000.net.duesterwald.asplos.141.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2005.edge_profile.ç™½ç«¥å¿ƒ.è®¡ç®—æœºå·¥ç¨‹.2.html">2005.edge_profile.ç™½ç«¥å¿ƒ.è®¡ç®—æœºå·¥ç¨‹.2.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2005.lei_net.hiniker.micro.39.html">2005.lei_net.hiniker.micro.39.md</a></li></ol></li></ol></li><li class="chapter-item "><div>analysis</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/analysis/2014.simulators_harm.nowatki..19.html">2014.simulators_harm.nowatki..19.md</a></li><li class="chapter-item "><a href="../../BT/analysis/2020.perfdbt.wu.iccd.2.html">2020.perfdbt.wu.iccd.2.md</a></li></ol></li><li class="chapter-item "><div>application</div></li><li class="chapter-item "><div>Box86</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/Box86/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><div>dynamic</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/dynamic/2017.mambox64.dantras.pldi.18.html">2017.mambox64.dantras.pldi.18.md</a></li></ol></li><li class="chapter-item "><div>Emulator</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Emulator_Design</div></li></ol></li><li class="chapter-item "><a href="../../BT/exagear.html">exagear.md</a></li><li class="chapter-item "><div>HQEMU</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HQEMU/codeReading-deprecated.html">codeReading-deprecated.md</a></li><li class="chapter-item "><a href="../../BT/HQEMU/codeReading.html">codeReading.md</a></li></ol></li><li class="chapter-item "><div>HW</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/2008.coprocessor.li.amasbt.3.html">2008.coprocessor.li.amasbt.3.md</a></li><li class="chapter-item "><a href="../../BT/HW/2009.godson3_x86_emu.hu.micro.84.html">2009.godson3_x86_emu.hu.micro.84.md</a></li><li class="chapter-item "><div>codeCache</div></li><li class="chapter-item "><div>reconf</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/reconf/2013.x86_mips_reconf.junior.jsa.4.html">2013.x86_mips_reconf.junior.jsa.4.md</a></li></ol></li><li class="chapter-item "><div>VLIW</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/VLIW/2015.denver.nvidia.micro.36.html">2015.denver.nvidia.micro.36.md</a></li><li class="chapter-item "><a href="../../BT/HW/VLIW/2019.hybrid_dbt.rokicki.cadics.2.html">2019.hybrid_dbt.rokicki.cadics.2.md</a></li><li class="chapter-item "><div>crusoe</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/VLIW/crusoe/2000.crusoe.klaiber.transmeta.118.html">2000.crusoe.klaiber.transmeta.118.md</a></li></ol></li><li class="chapter-item "><div>daisy</div></li></ol></li></ol></li><li class="chapter-item "><div>kernel</div></li><li class="chapter-item "><a href="../../BT/libDBT/index.html">libDBT</a></li><li class="chapter-item "><div>lift</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>IR</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>LLBT</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/LLBT/LLBTè°ƒç ”.html">LLBTè°ƒç ”</a></li><li class="chapter-item "><a href="../../BT/lift/IR/LLBT/äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Šï¼ˆLLBTç›¸å…³ï¼‰.html">äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Šï¼ˆLLBTç›¸å…³ï¼‰.md</a></li></ol></li><li class="chapter-item "><div>mcsema</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/2019.mcsema_dyninst.korencik...html">2019.mcsema_dyninst.korencik...md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/2019.mcsema.researchLogs.html">2019.mcsema.researchLogs.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/remill.html">remill.md</a></li></ol></li><li class="chapter-item "><div>mctoll</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/2019.mctoll.yadavalli.lctes.5.html">2019.mctoll.yadavalli.lctes.5.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/codesReading.html">codesReading.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/run.html">run.md</a></li></ol></li><li class="chapter-item "><a href="../../BT/lift/IR/overview.html">overview.md</a></li><li class="chapter-item "><div>REVNG</div></li></ol></li></ol></li><li class="chapter-item "><div>Mem</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/Mem/2008.thread_safe_by_tm.chung.hpca.51.html">2008.thread_safe_by_tm.chung.hpca.51.md</a></li><li class="chapter-item "><a href="../../BT/Mem/2016.atomic.rigo.taco.6.html">2016.atomic.rigo.taco.6.md</a></li></ol></li><li class="chapter-item "><div>oldProj</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/oldProj/1993.mips2alphaaxp.sites.cacm.267.html">1993.mips2alphaaxp.sites.cacm.267.md</a></li><li class="chapter-item "><a href="../../BT/oldProj/1998.fx32.chernoff.micro.217.html">1998.fx32.chernoff.micro.217.md</a></li><li class="chapter-item "><div>dbt4AndStatic</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/DBT4ä»£ç é˜…è¯»ç¬”è®°.html">DBT4ä»£ç é˜…è¯»ç¬”è®°</a></li><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/dbt-static.html">dbt-static.md</a></li><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/å»é™¤orcå·¥ä½œé‡å’Œéš¾åº¦.html">ORCçš„CGIR</a></li></ol></li></ol></li><li class="chapter-item "><div>others</div></li><li class="chapter-item "><div>overview</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/overview/2001.bt_opt_challenges.altman.pieee.38.html">2001.bt_opt_challenges.altman.pieee.38.md</a></li><li class="chapter-item "><a href="../../BT/overview/2004.bibliography_of_simulators.html">2004.bibliography_of_simulators.md</a></li></ol></li><li class="chapter-item "><div>QEMU</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/QEMU/16k.html">16k.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/2005.qemu.bellard.usenix.2217.html">2005.qemu.bellard.usenix.2217.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/2017.qemu_multi_cores.cota.cgo.8.html">2017.qemu_multi_cores.cota.cgo.8.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/LA-backend.html">LA-backend.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user-32.html">linux-user-32.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user.html">linux-user.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user-memory_region.html">linux-user-memory_region.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/logs.html">logs.md</a></li><li class="chapter-item "><div>lx</div></li><li class="chapter-item "><a href="../../BT/QEMU/mt-tcg.html">mt-tcg.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/qemu-wine.html">qemu-wine.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/signal.html">signal.md</a></li><li class="chapter-item "><div>target</div></li><li class="chapter-item "><a href="../../BT/QEMU/test.html">test.md</a></li></ol></li><li class="chapter-item "><div>rewrite</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/rewrite/2018.superset_disassembly.bauman.ndss.40.html">2018.superset_disassembly.bauman.ndss.40.md</a></li><li class="chapter-item "><div>instru</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/rewrite/instru/2009.mt.hazelwood.ismm.28.html">2009.mt.hazelwood.ismm.28.md</a></li><li class="chapter-item "><a href="../../BT/rewrite/instru/mem_count.html">mem_count.md</a></li></ol></li></ol></li><li class="chapter-item "><div>security</div></li><li class="chapter-item "><div>static</div></li><li class="chapter-item "><div>sys</div></li><li class="chapter-item "><div>Tarmac</div></li><li class="chapter-item "><div>test</div></li><li class="chapter-item "><div>x86-qemu-mips</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/x86-qemu-mips/check_manual.html">x86-qemu-mips checkæ‰‹å†Œ</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/check.html">check.md</a></li><li class="chapter-item "><div>debugs</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/x86-qemu-mips/debugs/OPEN.unknown-loop-in-bios.html">OPEN.unknown-loop-in-bios.md</a></li></ol></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/linux-user.html">x86-qemu-mipsåšå‡ºçš„ä¿®æ”¹</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/mips-llvm.html">mips-llvm.md</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/mt-tcg.html">mt-tcg.md</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/tr_miscä¿®æ”¹è®°å½•.html">tr_miscä¿®æ”¹è®°å½•.md</a></li></ol></li><li class="chapter-item "><div>X86toMips</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/X86toMips/dbtæµ‹è¯•ç»“æœ.html">dbtæµ‹è¯•ç»“æœ.md</a></li><li class="chapter-item "><a href="../../BT/X86toMips/Pseudo-README.html">Pseudo-README.md</a></li><li class="chapter-item "><a href="../../BT/X86toMips/X86toMipsè°ƒç ”.html">æ­¦æˆå²—</a></li><li class="chapter-item "><a href="../../BT/X86toMips/X86toMipsè°ƒç ”-ç»­.html">X86toMipsè°ƒç ”-ç»­.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Build</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Autotools</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Autotools/2012.autotools_criticism.kamp..html">2012.autotools_criticism.kamp..md</a></li><li class="chapter-item "><a href="../../Build/Autotools/autotools.html">autotools.md</a></li></ol></li><li class="chapter-item "><div>CMake</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/CMake/Notes.html">CMkake Notes</a></li></ol></li><li class="chapter-item "><div>Compiler</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/1992.hyperblock.mahlke.micro.html">1992.hyperblock.mahlke.micro.md</a></li><li class="chapter-item "><div>llvm</div></li><li class="chapter-item "><div>mingw</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/mingw/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>ORC</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/ORC/2004.ORC-LCPC04-Tutorial.html">2004.ORC-LCPC04-Tutorial.md</a></li><li class="chapter-item "><a href="../../Build/Compiler/ORC/2004.overview_orc.wuchengyong.iwlcpc.html">2004.overview_orc.wuchengyong.iwlcpc.md</a></li></ol></li><li class="chapter-item "><div>trans</div></li></ol></li><li class="chapter-item "><div>Disassemble</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Disassemble/2002.disassembly.bschwarz.pieee.html">2002.disassembly.bschwarz.pieee.md</a></li></ol></li><li class="chapter-item "><a href="../../Build/ELF/index.html">ELF</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/ELF/ELFè°ƒç ”.html">å‰æ²¿</a></li><li class="chapter-item "><a href="../../Build/ELF/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>Linker_Loader</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Linker_Loader/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Build/mingw.html">Windows Development Environment on Linux</a></li></ol></li><li class="chapter-item "><a href="../../cheatsheet.html">cheatsheet.md</a></li><li class="chapter-item "><div>CLI</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CLI/term_pty_sh.html">term_pty_sh.md</a></li></ol></li><li class="chapter-item expanded "><div>CompatLayer</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/2006.linuxulator.divacky.freebsd..html">2006.linuxulator.divacky.freebsd..md</a></li><li class="chapter-item "><a href="../../CompatLayer/Alky.html">Alky.md</a></li><li class="chapter-item "><div>UML</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/UML/user_mode_linux.html">user_mode_linux.md</a></li></ol></li><li class="chapter-item expanded "><div>WINE</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/WINE/2020_6_25.emu_win_syscall.corbet.lwn.html">2020_6_25.emu_win_syscall.corbet.lwn.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Design_of_WINE.html">wineä¸­çš„å„ç±»è®¾è®¡</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/optimizable.html">optimizable.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/others.html">others.md</a></li><li class="chapter-item expanded "><a href="../../CompatLayer/WINE/qemu-wine-logs.html" class="active">qemu-wine-logs.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-wine.html">qemu-wine.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-winetest_debug_logs.html">qemu-winetest_debug_logs.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-wineç¯å¢ƒæ­å»º.html">qemu-wineç¯å¢ƒæ­å»º.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/References.html">Wineç›¸å…³èµ„æ–™</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Winegccè°ƒç ”.html">æœ€ç»ˆç›®æ ‡</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Winelibè°ƒç ”æŠ¥å‘Š.html">Winelibè°ƒç ”æŠ¥å‘Š.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/WINEè®¾å¤‡é©±åŠ¨è°ƒç ”.html">èƒŒæ™¯</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/WINEè°ƒç ”.html">Wineè°ƒç ”</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Š_FX32_Wine.html">äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Š_FX32_Wine.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Š_Wine.html">äºŒè¿›åˆ¶ç¿»è¯‘è°ƒç ”æŠ¥å‘Š_Wine.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Connect</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/index.html">Bluetooth</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>bluez</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/bluez/profile_input.html">æ€»ä½“æ¶æ„</a></li></ol></li><li class="chapter-item "><div>btkbdd</div></li><li class="chapter-item "><div>dbus</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/dbus/Overview.html">Overview.md</a></li></ol></li><li class="chapter-item "><div>Essays</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>2005.bluez_intro.albert</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/Essays/2005.bluez_intro.albert/An_Introduction_to_Bluetooth_Programming.html">An Introduction to Bluetooth Programming</a></li></ol></li><li class="chapter-item "><a href="../../Connect/Bluetooth/Essays/é˜…è¯»è®°å½•.html">HID_v1.1.1</a></li></ol></li><li class="chapter-item "><div>hidclient</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/hidclient/logs.html">logs.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Network</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>bittorrent</div></li><li class="chapter-item "><div>nginx</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Network/nginx/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><a href="../../Connect/Network/p2p.html">p2p.md</a></li><li class="chapter-item "><a href="../../Connect/Network/streaming_server.html">streaming_server.md</a></li></ol></li><li class="chapter-item "><div>NFC</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Essays</div></li></ol></li></ol></li><li class="chapter-item "><div>dataViz</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dataViz/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>Distro</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Distro/JingOS.html">JingOS.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/index.html">Nix</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Distro/Nix/32bit.html">æ‰“åŒ…/ç¼–è¯‘32ä½ç¨‹åº</a></li><li class="chapter-item "><a href="../../Distro/Nix/android.html">åœ¨NixOSä¸Šä½¿ç”¨Androidç¨‹åº</a></li><li class="chapter-item "><a href="../../Distro/Nix/cross.html">Nixäº¤å‰ç¼–è¯‘å’Œè·¨å¹³å°ç¨‹åº</a></li><li class="chapter-item "><a href="../../Distro/Nix/feishu.html">æ‰“åŒ…é£ä¹¦</a></li><li class="chapter-item "><a href="../../Distro/Nix/gnome.html">Gnome in NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/nixpkgs.html">nixpkgs.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/node.html">node.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/productivity.html">productivity.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/python.html">Python in Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/README-en.html">Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/vim.html">Vim in Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/weird.html">Weird Things in Nix/NixOS</a></li></ol></li></ol></li><li class="chapter-item "><div>EPaper</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../EPaper/laptop.html">laptop.md</a></li></ol></li><li class="chapter-item "><div>fonts</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>files</div></li></ol></li><li class="chapter-item "><div>FPGA</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../FPGA/iverilog.html">iverilog.md</a></li></ol></li><li class="chapter-item "><div>hackthon</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../hackthon/Untitled.html">Untitled.md</a></li></ol></li><li class="chapter-item "><div>Input</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Input/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><div>ISA</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/2013.power_of_risc_cisc.blem.hpca.144.html">2013.power_of_risc_cisc.blem.hpca.144.md</a></li><li class="chapter-item "><div>arm</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/arm/aarch64.html">aarch64.md</a></li></ol></li><li class="chapter-item "><div>enhance</div></li><li class="chapter-item "><div>mips</div></li><li class="chapter-item "><div>mips_lx</div></li><li class="chapter-item "><div>riscv</div></li><li class="chapter-item "><a href="../../ISA/Semantics/index.html">Semantics</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Semantics/2013.locate.lakhotia.pprew.75.html">2013.locate.lakhotia.pprew.75.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2014.lem.mulligan.icfp.79.html">2014.lem.mulligan.icfp.79.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2015.sail.gray.micro.31.html">2015.sail.gray.micro.31.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2016.learn.heule.pldi.56.html">2016.learn.heule.pldi.56.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2018.sail.armstrong..3.html">2018.sail.armstrong..3.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2019.x64_validation.dasgupta.sigplan.24.html">2019.x64_validation.dasgupta.sigplan.24.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2021.sail.armstrong.manual.html">2021.sail.armstrong.manual.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/asmjit.html">AsmJit</a></li><li class="chapter-item "><div>k</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Semantics/k/logs.html">logs.md</a></li></ol></li></ol></li><li class="chapter-item "><div>ultrasparc</div></li><li class="chapter-item "><div>Uop</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Uop/1990.nec_intel.elkins...html">1990.nec_intel.elkins...md</a></li><li class="chapter-item "><a href="../../ISA/Uop/1996.palcode..manual..html">1996.palcode..manual..md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2003.ucache.solomon.tvlsi.13.html">2003.ucache.solomon.tvlsi.13.md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2019.reverse_engineer.koppe.usenix_security.16.html">2019.reverse_engineer.koppe.usenix_security.16.md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2020.improve_ucache.kotra.micro.1.html">2020.improve_ucache.kotra.micro.1.md</a></li></ol></li><li class="chapter-item "><div>x86</div></li></ol></li><li class="chapter-item "><div>JIT</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../JIT/2008.llvm_sim.brandner..29.html">2008.llvm_sim.brandner..29.md</a></li><li class="chapter-item "><a href="../../JIT/2011.llvm_sim.helmstetter.imecs.6.html">2011.llvm_sim.helmstetter.imecs.6.md</a></li><li class="chapter-item "><div>dynarmic</div></li><li class="chapter-item "><div>opt</div></li></ol></li><li class="chapter-item "><div>Kernel</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/2020_9_9.prepare_new_feat.edge.lwn-lpc.html">2020_9_9.prepare_new_feat.edge.lwn-lpc.md</a></li><li class="chapter-item "><div>Driver</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Driver/2019.linux_win_printer.é‡‘èé€š.è½¯ä»¶æ‰€ç¡•å£«.html">2019.linux_win_printer.é‡‘èé€š.è½¯ä»¶æ‰€ç¡•å£«.md</a></li></ol></li><li class="chapter-item "><div>exo</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/exo/1995.intro.engler.sosp.1259.html">1995.intro.engler.sosp.1259.md</a></li></ol></li><li class="chapter-item "><div>Linux</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/2002.rcu.mckenney..216.html">2002.rcu.mckenney..216.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2016.sched_bug.lozi.eurosys.120.html">2016.sched_bug.lozi.eurosys.120.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2018.concurrency.alglave.asplos.31.html">2018.concurrency.alglave.asplos.31.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2020.rcu.mckenney...html">2020.rcu.mckenney...md</a></li><li class="chapter-item "><div>Android</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/Android/anbox.html">anbox.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/to_mainline.html">to_mainline.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/Waydroid.html">Waydroid.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Linux/cache_alias.html">ğŸš§cacheåˆ«åã€é¡µç€è‰²</a></li><li class="chapter-item "><a href="../../Kernel/Linux/cache_alias_page_color.html">cache_alias_page_color.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/docsReading.html">docsReading.md</a></li><li class="chapter-item "><div>drivers</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/drivers/ioctl.html">ioctl.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/drivers/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Linux/idle.html">idle.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/lx.html">lx.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/memory_mapping.html">memory_mapping.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/module.logs.html">module.logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/mtlb.logs.html">mtlb.logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/page_fault.html">do_page_faultæºç åˆ†æ</a></li><li class="chapter-item "><a href="../../Kernel/Linux/page_size.html">page_size.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/QnA-alpine.html">QnA-alpine.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/startup.html">startup.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/syscalls.html">syscalls.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/memory.html">memory.md</a></li><li class="chapter-item "><div>micro</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/micro/1995.u_kernel.lietdke.sosp.308.html">1995.u_kernel.lietdke.sosp.308.md</a></li><li class="chapter-item "><a href="../../Kernel/micro/2013.l3_sel4.elphinstone.sosp.126.html">2013.l3_sel4.elphinstone.sosp.126.md</a></li></ol></li><li class="chapter-item "><div>multi</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/multi/2009.intro.baumann.sosp.856.html">2009.intro.baumann.sosp.856.md</a></li></ol></li><li class="chapter-item "><div>syscall</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/syscall/2020_9_8.extensible_syscall.corbet.lwn-lpc.html">2020_9_8.extensible_syscall.corbet.lwn-lpc.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/transkernel.html">transkernel.md</a></li><li class="chapter-item "><div>unikernel</div></li><li class="chapter-item "><div>WinCmptbl</div></li><li class="chapter-item "><div>Windows</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Windows/compilation.html">compilation.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/index.html">driver</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Windows/driver/ddiwrapper.html">ddiwrapper.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/logs-1.html">logs-1.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/logs.html">logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/ndis.html">ndis.md</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>err</div></li></ol></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/printer.html">é©±åŠ¨å®‰è£…åŒ…æ„æˆ</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/types.html">types.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Windows/nameConventions.html">Windowså‘½åé£æ ¼</a></li><li class="chapter-item "><a href="../../Kernel/Windows/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/ReactOS/index.html">ReactOS</a></li><li class="chapter-item "><a href="../../Kernel/Windows/service.html">service.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/subsystem.html">subsystem.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/syscall.html">syscall.md</a></li></ol></li><li class="chapter-item "><div>XNU</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Darling</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/XNU/Darling/overview.html">overview.md</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><div>Lang</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Asm</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Asm/asm.html">asm.md</a></li><li class="chapter-item "><div>riscv</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Asm/riscv/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../Lang/awk.html">AWK</a></li><li class="chapter-item "><a href="../../Lang/bc.html">BC</a></li><li class="chapter-item "><div>C.f</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/C.f/macro.html">macro.md</a></li></ol></li><li class="chapter-item "><div>Dot</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Dot/overview.html">overview.md</a></li><li class="chapter-item "><a href="../../Lang/Dot/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>IR</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/IR/1999.JVM_Specification.html">1999.JVM_Specification.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2000.llvm.lattner.master_thesis.241.html">2000.llvm.lattner.master_thesis.241.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2004.llvm.lattner.cgo.4340.html">2004.llvm.lattner.cgo.4340.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2013.importance.chow...html">2013.importance.chow...md</a></li><li class="chapter-item "><div>Common2</div></li><li class="chapter-item "><a href="../../Lang/IR/LLVM-IR.html">LLVM-IR.md</a></li><li class="chapter-item "><a href="../../Lang/IR/MapleIRDesign.html">Introduction </a></li></ol></li><li class="chapter-item "><div>JS</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/JS/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>Latex</div></li><li class="chapter-item "><div>Lisp</div></li><li class="chapter-item "><div>Py</div></li><li class="chapter-item "><div>SMT-LIB</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/SMT-LIB/2012.smt_lib_v2.cok..47.html">2012.smt_lib_v2.cok..47.md</a></li></ol></li><li class="chapter-item "><div>WebAsm</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/WebAsm/2017.intro.haas.pldi.194.html">2017.intro.haas.pldi.194.md</a></li><li class="chapter-item "><a href="../../Lang/WebAsm/overview.html">overview.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Lib</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>Glibc</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/Glibc/glibc.html">glibc.md</a></li><li class="chapter-item "><a href="../../Lib/Glibc/mmap.html">mmapç‰¹æ€§</a></li><li class="chapter-item "><a href="../../Lib/Glibc/pthread.html">pthread.md</a></li><li class="chapter-item "><a href="../../Lib/Glibc/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>igraph</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/igraph/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>Libc</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/Libc/Musl/index.html">Musl</a></li></ol></li></ol></li><li class="chapter-item "><div>Mem</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Mem/cat.html">cat.md</a></li><li class="chapter-item "><div>model</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Mem/model/2017.memalloy.wickerson.popl.77.html">2017.memalloy.wickerson.popl.77.md</a></li></ol></li><li class="chapter-item "><a href="../../Mem/order.html">C++11è®¿å­˜é¡ºåº</a></li><li class="chapter-item "><a href="../../Mem/test.html">test.md</a></li></ol></li><li class="chapter-item "><div>Opinions</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Opinions/notes.html">notes.md</a></li><li class="chapter-item "><a href="../../Opinions/openEcoSys.html">openEcoSys.md</a></li></ol></li><li class="chapter-item "><div>other_read_list</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../other_read_list/cambridge.html">Cambrige Advanced Topics in Computer Architecture Reading List</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/index.html">stanford</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../other_read_list/stanford/1999.codesigned_vm.smith.iwia.html">1999.codesigned_vm.smith.iwia.md</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/2001.vm_intro.smith.html">2001.vm_intro.smith.md</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/2002.vector_vs_ss.kozyrakis.micro.html">2002.vector_vs_ss.kozyrakis.micro.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Perf</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Perf/flamegraph.html">flamegraph.md</a></li></ol></li><li class="chapter-item "><div>PoSh</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../PoSh/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Proj/index.html">Proj</a></li><li class="chapter-item "><div>Pwr</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pwr/2009.mcpat.li.micro.2319.html">2009.mcpat.li.micro.2319.md</a></li></ol></li><li class="chapter-item "><a href="../../QnA-Daliy.html">QnA-Daliy.md</a></li><li class="chapter-item "><div>Repos</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Repos/llvm-tutor.html">llvm-tutor.md</a></li></ol></li><li class="chapter-item "><div>Sandbox</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Sandbox/chroot.html">chroot.md</a></li><li class="chapter-item "><div>Docker</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Sandbox/Docker/Overview.html">Overview.md</a></li><li class="chapter-item "><a href="../../Sandbox/Docker/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Sandbox/proot.html">proot.md</a></li></ol></li><li class="chapter-item "><a href="../../scripts/index.html">scripts</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>bash</div></li><li class="chapter-item "><div>nix</div></li></ol></li><li class="chapter-item "><div>security</div></li><li class="chapter-item "><div>SftwStack</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SftwStack/applications_arch.html">applications_arch.md</a></li><li class="chapter-item "><a href="../../SftwStack/linux_desktop.html">linux_desktop.md</a></li></ol></li><li class="chapter-item "><div>Sim</div></li><li class="chapter-item "><div>Softwares</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Softwares/ocrmypdf.html">ocrmypdf.md</a></li><li class="chapter-item "><a href="../../Softwares/pandoc.html">pandoc.md</a></li><li class="chapter-item "><a href="../../Softwares/tree_timeline_note.html">tree_timeline_note.md</a></li><li class="chapter-item "><div>Vim</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Softwares/Vim/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../SPIN.html">SPIN.md</a></li><li class="chapter-item "><div>SQL</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SQL/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>SymExec</div></li><li class="chapter-item "><div>Temp</div></li><li class="chapter-item "><div>uArch</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>TLB</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../uArch/TLB/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Virt</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/1988.386.smith.programmers_journal..html">1988.386.smith.programmers_journal..md</a></li><li class="chapter-item "><a href="../../Virt/2002.esx.waldspurger.opsr.1402.html">2002.esx.waldspurger.opsr.1402.md</a></li><li class="chapter-item "><a href="../../Virt/2003.xen.barham.opsr.6475.html">2003.xen.barham.opsr.6475.md</a></li><li class="chapter-item "><a href="../../Virt/2003.xen.barham.opsr.6475.sync-conflict-20211220-085833-2SHHM4X.html">2003.xen.barham.opsr.6475.sync-conflict-20211220-085833-2SHHM4X.md</a></li><li class="chapter-item "><a href="../../Virt/2006.cmp_soft_hard_x86.adams.asplos.700.html">2006.cmp_soft_hard_x86.adams.asplos.700.md</a></li><li class="chapter-item "><a href="../../Virt/2012.dune.belay.osdi.215.html">2012.dune.belay.osdi.215.md</a></li><li class="chapter-item "><div>addr_trans</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/addr_trans/2018.1_qemu_dune_2_lkm.faravelon.doc_thesis.1.html">2018.1_qemu_dune_2_lkm.faravelon.doc_thesis.1.md</a></li></ol></li><li class="chapter-item "><div>BT</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/BT/2016.cross_arch_captive.spink.taco.3.html">2016.cross_arch_captive.spink.taco.3.md</a></li><li class="chapter-item "><a href="../../Virt/BT/2019.cross_arch_captive.spink.usenix.1.html">2019.cross_arch_captive.spink.usenix.1.md</a></li></ol></li><li class="chapter-item "><a href="../../Virt/overview.html">overview.md</a></li><li class="chapter-item "><div>virtualBox</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/virtualBox/install.html">install.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Write</div></li><li class="chapter-item "><a href="../../X11/index.html">X11</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../X11/windowManage.html">windowManage.md</a></li></ol></li><li class="chapter-item "><div>è¡Œä¸šæŠ¥å‘Š</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>LF</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../è¡Œä¸šæŠ¥å‘Š/LF/2020-Linux-Foundation-Annual-Report_120520.html">2020-Linux-Foundation-Annual-Report_120520.md</a></li><li class="chapter-item "><a href="../../è¡Œä¸šæŠ¥å‘Š/LF/FINOS-business-value-of-open-source.html">FINOS-business-value-of-open-source.md</a></li></ol></li><li class="chapter-item "><div>Nix</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../è¡Œä¸šæŠ¥å‘Š/Nix/2021.summur.html">2021.summur.md</a></li></ol></li><li class="chapter-item "><div>ä¼ä¸šå¹´æŠ¥</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div>apple</div></li><li class="chapter-item "><div>åä¸º</div></li><li class="chapter-item "><div>æµ·ä¿¡</div></li><li class="chapter-item "><div>è”æƒ³</div></li></ol></li><li class="chapter-item "><div>ä¿¡é€šé™¢</div></li><li class="chapter-item "><div>å›½å®¶</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../è¡Œä¸šæŠ¥å‘Š/å›½å®¶/2006_2022.å›½å®¶ä¸­é•¿æœŸç§‘å­¦å’ŒæŠ€æœ¯å‘å±•è§„åˆ’çº²è¦.html">å›½å®¶ä¸­é•¿æœŸç§‘å­¦å’ŒæŠ€æœ¯å‘å±•è§„åˆ’çº²è¦ï¼ˆ2006â”2020å¹´ï¼‰</a></li></ol></li><li class="chapter-item "><div>ç½‘ä¿¡è‡ªä¸»åˆ›æ–°</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../è¡Œä¸šæŠ¥å‘Š/ç½‘ä¿¡è‡ªä¸»åˆ›æ–°/2020.html">2020.md</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="shuimitao">æ°´èœœæ¡ƒ</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">xieby1&#x27;s notes</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/xieby1/xieby1.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><strong>å‰è¨€</strong>ï¼šä»¥ä¸‹å·¥ä½œï¼Œè‹¥æ— ç‰¹åˆ«æ ‡æ³¨ï¼Œå‡åœ¨é¾™èŠ¯ä¸Šç”¨qemu-i386è¿è¡Œwineï¼ˆ32ä½ï¼‰ç„¶åæ‰§è¡Œwin32ç¨‹åºã€‚</p>
<div style="text-align:right; font-size:3em;">2020.7.9</div>
<h2 id="segment-faultå…¶ä¸€"><a class="header" href="#segment-faultå…¶ä¸€">segment faultå…¶ä¸€</a></h2>
<p><strong>TLDR</strong>ï¼šåŠ¨æ€é“¾æ¥åº“ä¸å…¨ã€‚<strong>æ³¨æ„</strong>é™¤äº†wineæ‰€éœ€çš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿˜æœ‰wineç›¸å…³çš„ç¨‹åºå’ŒåŠ¨æ€é“¾æ¥åº“ï¼ˆæ¯”å¦‚è¿™é‡Œçš„<code>ntdll.dll.so</code>ï¼‰æ‰€éœ€çš„åŠ¨æ€é“¾æ¥åº“ã€‚</p>
<p>è¿è¡Œä¸€æ®µæ—¶é—´åé™¤äº†segment faultæ— å…¶ä»–æŠ¥é”™ã€‚ä»”ç»†è·Ÿè¸ªä¸€ç•ªæºç æ‰¾åˆ°äº†segment faulté”™è¯¯çš„æ¥æºï¼Œ<code>dlls/ntdll/ntdll.dll.so</code>ä¾èµ–çš„åŠ¨æ€é“¾æ¥åº“æ²¡æœ‰æ”¾åˆ°é¾™èŠ¯æœºå™¨é‡Œå»ã€‚ä½†è¿™é‡Œä½¿ç”¨<code>ldd</code>åˆ†æ<code>ntdll.dll.so</code>æ‰€éœ€çš„ä¾èµ–å‡ºç°äº†é—®é¢˜ï¼Œåˆ†æå‡ºçš„ä¾èµ–å…¨æ˜¯64ä½çš„ï¼Œå¯æ˜¯éœ€è¦çš„æ˜¯32ä½ã€‚æŠŠ32ä½çš„åº“æ”¾è¿›é¾™èŠ¯æœºå™¨ï¼Œ<code>ping</code>ä¾¿å¯ä»¥æ‰§è¡Œäº†ï¼Œè™½ç„¶è¿‡ç¨‹ä¸­æœ‰è®¸å¤šæŠ¥é”™ï¼Œå¾ˆå¤š<code>.dll</code>æ²¡æ‰¾åˆ°çš„æŠ¥é”™ã€‚</p>
<h2 id="æ­£å¸¸è¿è¡Œpingä½†ä»æœ‰æŠ¥é”™"><a class="header" href="#æ­£å¸¸è¿è¡Œpingä½†ä»æœ‰æŠ¥é”™">æ­£å¸¸è¿è¡Œpingä½†ä»æœ‰æŠ¥é”™</a></h2>
<p><strong>åœ¨x86_64ç”µè„‘ä¸Šç”¨qemu-i386è¿è¡Œwine pingçš„è¾“å‡ºä¿¡æ¯</strong>å’Œ<strong>åœ¨3a4000ç”µè„‘ä¸Šç”¨qemu-i386è¿è¡Œwine pingçš„è¾“å‡ºä¿¡æ¯</strong>ç”¨patchçš„å½¢å¼è¡¨è¾¾å¦‚ä¸‹ï¼š</p>
<pre><code class="language-diff">--- /home/xieby1/x86_64-qemu-wine-ping
+++ /home/xieby1/3a4000-qemu-wine-ping
@@ -1,13 +1,53 @@
-xieby1@xieby1-Lenovo-Y50-70:~/Codes/wine$ loader/wine ping
+xieby1@thtf-pc:~/Codes/wine$ loader/wine ping
# 2020.7.17: ä¸‹é¢ä¸¤æ¡æŠ¥é”™å¤§æ¦‚æ˜¯å› ä¸ºç«äº‰äº§ç”Ÿï¼Œè¯¦ç»†è¯´æ˜è§å…³äºæŠ¥é”™ 
+002c:err:virtual:virtual_map_section mapping 0x880000 1000 000000000 failed
+002c:err:wineboot:create_user_shared_data cannot map __wine_user_shared_data
# 2020.7.17: ==========================================
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\shcore.dll&quot;) failed (error c000007a).
+0034:err:module:import_dll Library shcore.dll (which is needed by L&quot;C:\\windows\\system32\\shlwapi.dll&quot;) not found
+0034:err:module:import_dll Library shlwapi.dll (which is needed by L&quot;C:\\windows\\system32\\shell32.dll&quot;) not found
+0034:err:module:import_dll Library shell32.dll (which is needed by L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;) not found
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\shcore.dll&quot;) failed (error c000007a).
+0034:err:module:import_dll Library shcore.dll (which is needed by L&quot;C:\\windows\\system32\\shlwapi.dll&quot;) not found
+0034:err:module:import_dll Library shlwapi.dll (which is needed by L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;) not found
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;) failed (error c000007a).
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\windowscodecs.dll&quot;) failed (error c000007a).
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/oleaut32/oleaut32.dll.so&quot;
+0034:err:module:import_dll Loading library oleaut32.dll (which is needed by L&quot;C:\\windows\\system32\\windowscodecs.dll&quot;) failed (error c000007a).
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\propsys.dll&quot;) failed (error c000007a).
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/oleaut32/oleaut32.dll.so&quot;
+0034:err:module:import_dll Loading library oleaut32.dll (which is needed by L&quot;C:\\windows\\system32\\propsys.dll&quot;) failed (error c000007a).
+0034:err:module:import_dll Library propsys.dll (which is needed by L&quot;C:\\windows\\system32\\windowscodecs.dll&quot;) not found
+0034:err:module:open_builtin_file failed to load .so lib &quot;/home/xieby1/Codes/wine/dlls/ole32/ole32.dll.so&quot;
+0034:err:module:import_dll Loading library ole32.dll (which is needed by L&quot;C:\\windows\\system32\\shcore.dll&quot;) failed (error c000007a).
+0034:err:module:import_dll Library shcore.dll (which is needed by L&quot;C:\\windows\\system32\\shlwapi.dll&quot;) not found
+0034:err:module:import_dll Library shlwapi.dll (which is needed by L&quot;C:\\windows\\system32\\windowscodecs.dll&quot;) not found
+0034:err:module:import_dll Library windowscodecs.dll (which is needed by L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;) not found
+0034:err:module:LdrInitializeThunk Importing dlls for L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot; failed, status c0000135
+Wine cannot find the FreeType font library.  To enable Wine to
+use TrueType fonts please install a version of FreeType greater than
+or equal to 2.0.5.
+http://www.freetype.org
+wine client error:70: wine client error:70: read: Bad address
+read: Bad address
+0070:err:seh:segv_handler Got unexpected trap -1
+0070:err:seh:NtRaiseException Exception frame is not in stack limits =&gt; unable to dispatch exception.
+wine client error:70: write: Bad file descriptor
+003c:err:service:process_send_command service protocol error - failed to read pipe r = 0  count = 0!
+003c:fixme:service:scmdatabase_autostart_services Auto-start service L&quot;winebus&quot; failed to start: 1053
 0080:err:ntoskrnl:ZwLoadDriver failed to create driver L&quot;\\Registry\\Machine\\System\\CurrentControlSet\\Services\\wineusb&quot;: c0000142
 003c:fixme:service:scmdatabase_autostart_services Auto-start service L&quot;wineusb&quot; failed to start: 1114
+Wine cannot find the FreeType font library.  To enable Wine to
+use TrueType fonts please install a version of FreeType greater than
+or equal to 2.0.5.
+http://www.freetype.org
 Usage: ping [-n count] [-w timeout] [-l buffer_length] target_name
 
 Options:
     -n  Number of echo requests to send.
     -w  Timeout in milliseconds to wait for each reply.
     -l  Length of send buffer.
-xieby1@xieby1-Lenovo-Y50-70:~/Codes/wine$ 0088:err:seh:segv_handler Got unexpected trap -1
-0088:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
-wine client error:90: write: Bad file descriptor
+xieby1@thtf-pc:~/Codes/wine$ qemu: uncaught target signal 11 (Segmentation fault) - core dumped
^C
</code></pre>
<div style="text-align:right; font-size:3em;">2020.7.10</div>
<p>ç”¨gdbçš„add-symbol-file [-o]ç»ˆäºé”å®šäº†å‡ºé”™çš„åœ°æ–¹ï¼ŒwinNTçš„â€œç³»ç»Ÿè°ƒç”¨â€œ<code>NTResumeThread</code>ï¼Œå…·ä½“çš„è°ƒç”¨è·¯æ®å¦‚ä¸‹ï¼š</p>
<p><span style="color:red;"><strong>ABORTED</strong></span>ï¼šå°†ä¸‹é¢çš„å›¾ç”»æˆæµç¨‹å›¾</p>
<p>ç¬¬äºŒæ¬¡æ‰§è¡Œwineï¼ˆç»è¿‡wine-preloaderçš„å„ç§æ“ä½œåï¼‰åœ¨<code>dlls/ntdll/ntdll.so</code></p>
<ul>
<li><code>__wine_main</code>
<ul>
<li><code>start_main_thread</code>
<ul>
<li><code>p__wine_set_unix_funcs</code><strong>å°±æ˜¯winNTçš„â€ç³»ç»Ÿè°ƒç”¨â€œæš´éœ²ç»™unixçš„æ„æ€</strong>ï¼Œè‹¥æƒ³çœ‹winNTå‡½æ•°å¦‚ä½•æ¥çš„ï¼Œå¤§æ¦‚å¯ä»¥ä»è¿™é‡Œå…¥æ‰‹ï¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç„¶åè½¬åˆ°<code>dlls/ntdll/ntdll.dll.so</code>é‡Œçš„å‡½æ•°å»æ‰§è¡Œ</p>
<ul>
<li><code>__wine_set_unix_funcs</code>
<ul>
<li><code>__wine_process_init</code>
<ul>
<li><code>init_user_process_params</code>
<ul>
<li><code>run_wineboot</code>
<ul>
<li><code>NtResumeThread</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç„¶åwineä¼šç»™wine-serverå‘é€è¯·æ±‚ï¼ˆæ„Ÿè§‰å°±æ˜¯ç”¨æˆ·ç¨‹åºç»™å†…æ ¸å‘é€è¯·æ±‚ï¼‰ï¼Œè®©wine-serveræ¥æ‰§è¡Œ<code>resume_thread</code>ã€‚åœ¨<code>wine/server/thread.c</code>é‡Œï¼Œ</p>
<ul>
<li><code>resume_thread</code></li>
</ul>
<div style="text-align:right; font-size:3em;">2020.7.13</div>
<h2 id="gdbè¿ä¸Šäº†wine-server"><a class="header" href="#gdbè¿ä¸Šäº†wine-server">gdbè¿ä¸Šäº†wine-server</a></h2>
<p>wine-serveré»˜è®¤ä¸ºbackguoundçš„æ¨¡å¼å·¥ä½œï¼Œå³åœ¨åå°ï¼ˆforkç„¶åè®©çˆ¶è¿›ç¨‹æ¨å‡ºï¼‰ã€‚ä½†æ˜¯qemuçš„gdbstubä¸æ”¯æŒ<code>set follow-fork-mode</code>æ‰€ä»¥ç°é˜¶æ®µï¼Œæˆ‘å®Œå…¨æ²¡æœ‰ä»»ä½•åŠæ³•é€šè¿‡gdbè¿ä¸Šforkå‡ºæ¥çš„è¿›ç¨‹ã€‚æµ‹è¯•äº†ä¸€ä¸‹ç”¨wine-serverçš„foregroundæ¨¡å¼æŠ¥é”™ä¿¡æ¯ä¼¼ä¹ï¼ˆæ²¡æœ‰ä»”ç»†å»å¯¹ç…§ï¼‰æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥é‚£å°±ç›´æ¥åœ¨å‰å°ç”¨qemuè¿è¡Œä¸€ä¸ªwine-serverå†è¿ä¸Šgdbå°±æ–¹ä¾¿äº†ï¼ä¸‹é¢æ˜¯gdb breakåˆ°<code>req_resume_thread</code>æ—¶çš„backtraceï¼š</p>
<div>
    <pre>#0  <font color="#C4A000">req_resume_thread</font> (<font color="#06989A">req</font>=0xff3914b8, <font color="#06989A">reply</font>=0xfef5ac8c) at <font color="#4E9A06">thread.c</font>:1600
#1  <font color="#3465A4">0xfef9e589</font> in <font color="#C4A000">call_req_handler</font> (<font color="#06989A">thread</font>=0xff3913d0) at <font color="#4E9A06">request.c</font>:310
#2  <font color="#3465A4">0xfef9e6c6</font> in <font color="#C4A000">read_request</font> (<font color="#06989A">thread</font>=0xff3913d0) at <font color="#4E9A06">request.c</font>:344
#3  <font color="#3465A4">0xfefa592a</font> in <font color="#C4A000">thread_poll_event</font> (<font color="#06989A">fd</font>=0xff391590, <font color="#06989A">event</font>=1) at <font color="#4E9A06">thread.c</font>:369
#4  <font color="#3465A4">0xfef763b6</font> in <font color="#C4A000">fd_poll_event</font> (<font color="#06989A">fd</font>=0xff391590, <font color="#06989A">event</font>=1) at <font color="#4E9A06">fd.c</font>:519
#5  <font color="#3465A4">0xfef766af</font> in <font color="#C4A000">main_loop_epoll</font> () at <font color="#4E9A06">fd.c</font>:614
#6  <font color="#3465A4">0xfef76c33</font> in <font color="#C4A000">main_loop</font> () at <font color="#4E9A06">fd.c</font>:980
#7  <font color="#3465A4">0xfef81466</font> in <font color="#C4A000">main</font> (<font color="#06989A">argc</font>=2, <font color="#06989A">argv</font>=0xfef5b494) at <font color="#4E9A06">main.c</font>:148</pre>
</div>
<div style="text-align:right; font-size:3em;">2020.7.14</div>
<h2 id="åœ¨æ²¡æœ‰è€ƒè™‘è¯­ä¹‰çš„åŸºç¡€ä¸Šå®šä½æŠ¥é”™"><a class="header" href="#åœ¨æ²¡æœ‰è€ƒè™‘è¯­ä¹‰çš„åŸºç¡€ä¸Šå®šä½æŠ¥é”™">åœ¨æ²¡æœ‰è€ƒè™‘è¯­ä¹‰çš„åŸºç¡€ä¸Šå®šä½æŠ¥é”™</a></h2>
<p>æƒ³è¦å®šä½ç¬¬ä¸€ä¸ªæŠ¥é”™çš„ä½ç½®ï¼Œè¿™é‡Œä¸€æ®µçš„â€œæŠ¥é”™â€éƒ½æŒ‡ç¬¬ä¸€ä¸ªæŠ¥é”™ï¼Œå³<code>err:virtual:virtual_map_section mapping 0x880000 1000 000000000 failed</code>ã€‚</p>
<p>è¿è¡Œä¸¤ä¸ªgdbï¼Œ</p>
<ol>
<li>ä¿®æ”¹<strong>wine</strong>çš„æºç è®©ç¬¬äºŒæ¬¡å¯åŠ¨wineæ—¶æ‰“å¼€gdbç«¯å£1234ï¼Œ</li>
<li>åœ¨å‰å°è¿è¡Œ<strong>wineserver</strong>ä¸”æ‰“å¼€gdbç«¯å£1235ï¼Œå¯ä»¥æ‰“å¼€wineserverçš„debug_levelï¼Œå‘½ä»¤è¡Œ<code>-d1</code>ï¼Œä¹Ÿå¯ä»¥åœ¨åˆé€‚çš„åœ°æ–¹ç”¨gdb<code>set debug_level=1</code>ï¼Œ</li>
</ol>
<p>é€šè¿‡æ‰“å°å‡ºçš„â€œç³»ç»Ÿè°ƒç”¨â€ï¼Œå¯ä»¥å¤§è‡´é”å®šæŠ¥é”™çš„èŒƒå›´ï¼Œåœ¨<strong>wine</strong>è°ƒç”¨å‡½æ•°<code>NtResumeThread</code>åçš„ä¸¤ä¸ª<code>open_mapping</code>è°ƒç”¨ä¹‹é—´ï¼Œï¼ˆä¸‹é¢çš„ç¬¬ä¸€ä¸ªopen_mappingçš„è°ƒç”¨é˜¶æ®µæ²¡æœ‰è¾“å‡ºï¼Œåªæœ‰è¿”å›é˜¶æ®µï¼Œå› ä¸ºåœ¨breakåˆ°<code>req_open_mapping</code>åæ‰è®¾ç½®çš„<code>debug_level</code>ï¼‰</p>
<pre><code class="language-shell">002c: open_mapping() = 0 { handle=0024 }
002c: get_mapping_info( handle=0024, access=00000002 )
002c: get_mapping_info() = 0 { size=00001000, flags=08000000, shared_file=0000, image={} }
002c: get_handle_fd( handle=0024 )
002c: *fd* 0024 -&gt; 21
002c: get_handle_fd() = 0 { type=1, cacheable=1, access=000f001f, options=00000020 }
002c: close_handle( handle=0024 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=000c,attributes=00000000,sd={},name=L&quot;Hardware\\Description\\System&quot;}, class=L&quot;&quot; )
002c: create_key() = OBJECT_NAME_NOT_FOUND { hkey=0000, created=0 }
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=000c,attributes=00000000,sd={},name=L&quot;Hardware&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0024, created=1 }
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;Description&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=1 }
002c: close_handle( handle=0024 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;System&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0024, created=1 }
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: set_key_value( hkey=0024, type=1, namelen=20, name=L&quot;Identifier&quot;, data={41,00,54,00,20,00,63,00,6f,00,6d,00,70,00,61,00,74,00,69,00,62,00,6c,00,65,00,00,00} )
002c: set_key_value() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;FloatingPointProcessor&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=1 }
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;CentralProcessor&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=002c, created=1 }
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=002c,attributes=00000000,sd={},name=L&quot;0&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=4, namelen=20, name=L&quot;FeatureSet&quot;, data={bf,3f,69,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=38, name=L&quot;ProcessorNameString&quot;, data={51,00,45,00,4d,00,55,00,20,00,56,00,69,00,72,00,74,00,75,00,61,00,6c,00,20,00,43,00,50,00,55,00,20,00,76,00,65,00,72,00,73,00,69,00,6f,00,6e,00,20,00,32,00,2e,00,35,00,2b,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;VendorIdentifier&quot;, data={47,00,65,00,6e,00,75,00,69,00,6e,00,65,00,49,00,6e,00,74,00,65,00,6c,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=8, name=L&quot;~MHz&quot;, data={e8,03,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;0&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=002c,attributes=00000000,sd={},name=L&quot;1&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=4, namelen=20, name=L&quot;FeatureSet&quot;, data={bf,3f,69,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=38, name=L&quot;ProcessorNameString&quot;, data={51,00,45,00,4d,00,55,00,20,00,56,00,69,00,72,00,74,00,75,00,61,00,6c,00,20,00,43,00,50,00,55,00,20,00,76,00,65,00,72,00,73,00,69,00,6f,00,6e,00,20,00,32,00,2e,00,35,00,2b,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;VendorIdentifier&quot;, data={47,00,65,00,6e,00,75,00,69,00,6e,00,65,00,49,00,6e,00,74,00,65,00,6c,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=8, name=L&quot;~MHz&quot;, data={e8,03,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;1&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=002c,attributes=00000000,sd={},name=L&quot;2&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=4, namelen=20, name=L&quot;FeatureSet&quot;, data={bf,3f,69,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=38, name=L&quot;ProcessorNameString&quot;, data={51,00,45,00,4d,00,55,00,20,00,56,00,69,00,72,00,74,00,75,00,61,00,6c,00,20,00,43,00,50,00,55,00,20,00,76,00,65,00,72,00,73,00,69,00,6f,00,6e,00,20,00,32,00,2e,00,35,00,2b,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;VendorIdentifier&quot;, data={47,00,65,00,6e,00,75,00,69,00,6e,00,65,00,49,00,6e,00,74,00,65,00,6c,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=8, name=L&quot;~MHz&quot;, data={e8,03,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;2&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=002c,attributes=00000000,sd={},name=L&quot;3&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=4, namelen=20, name=L&quot;FeatureSet&quot;, data={bf,3f,69,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=38, name=L&quot;ProcessorNameString&quot;, data={51,00,45,00,4d,00,55,00,20,00,56,00,69,00,72,00,74,00,75,00,61,00,6c,00,20,00,43,00,50,00,55,00,20,00,76,00,65,00,72,00,73,00,69,00,6f,00,6e,00,20,00,32,00,2e,00,35,00,2b,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;VendorIdentifier&quot;, data={47,00,65,00,6e,00,75,00,69,00,6e,00,65,00,49,00,6e,00,74,00,65,00,6c,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=8, name=L&quot;~MHz&quot;, data={e8,03,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;3&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;Identifier&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_key( access=000f003f, options=00000001, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;BIOS&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0030, created=1 }
002c: set_key_value( hkey=0030, type=1, namelen=42, name=L&quot;BaseBoardManufacturer&quot;, data={54,00,48,00,54,00,46,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;BaseBoardProduct&quot;, data={54,00,48,00,54,00,46,00,2d,00,4c,00,53,00,33,00,41,00,34,00,30,00,30,00,30,00,2d,00,37,00,41,00,31,00,30,00,30,00,30,00,2d,00,31,00,57,00,2d,00,56,00,42,00,33,00,2d,00,4d,00,4c,00,34,00,41,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=32, name=L&quot;BaseBoardVersion&quot;, data={56,00,42,00,33,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=20, name=L&quot;BIOSVendor&quot;, data={5a,00,44,00,20,00,74,00,65,00,63,00,68,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=22, name=L&quot;BIOSVersion&quot;, data={56,00,32,00,2e,00,30,00,2e,00,34,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=30, name=L&quot;BIOSReleaseDate&quot;, data={30,00,35,00,2f,00,32,00,36,00,2f,00,32,00,30,00,32,00,30,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=32, name=L&quot;BiosMajorRelease&quot;, data={ff,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=32, name=L&quot;BiosMinorRelease&quot;, data={ff,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=44, name=L&quot;ECFirmwareMajorVersion&quot;, data={ff,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=4, namelen=44, name=L&quot;ECFirmwareMinorVersion&quot;, data={ff,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=36, name=L&quot;SystemManufacturer&quot;, data={54,00,48,00,54,00,46,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=34, name=L&quot;SystemProductName&quot;, data={43,00,58,00,20,00,54,00,4c,00,36,00,33,00,30,00,20,00,53,00,65,00,72,00,69,00,65,00,73,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=26, name=L&quot;SystemVersion&quot;, data={31,00,2e,00,30,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=18, name=L&quot;SystemSKU&quot;, data={00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0030, type=1, namelen=24, name=L&quot;SystemFamily&quot;, data={00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: close_handle( handle=002c )
002c: close_handle() = 0
002c: close_handle( handle=0024 )
002c: close_handle() = 0
002c: create_key( access=02000000, options=00000000, objattr={rootdir=0000,attributes=00000000,sd={},name=L&quot;\\Registry\\DynData&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0024, created=1 }
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;PerfStats\\StatData&quot;}, class=L&quot;&quot; )
002c: create_key() = OBJECT_NAME_NOT_FOUND { hkey=0000, created=0 }
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;PerfStats&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=1 }
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;StatData&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=002c, created=1 }
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: close_handle( handle=002c )
002c: close_handle() = 0
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;Config Manager\\Enum&quot;}, class=L&quot;&quot; )
002c: create_key() = OBJECT_NAME_NOT_FOUND { hkey=0000, created=0 }
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0024,attributes=00000000,sd={},name=L&quot;Config Manager&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=1 }
002c: create_key( access=00020006, options=00000000, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;Enum&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=002c, created=1 }
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: close_handle( handle=002c )
002c: close_handle() = 0
002c: create_key( access=02000000, options=00000000, objattr={rootdir=000c,attributes=00000000,sd={},name=L&quot;System\\CurrentControlSet\\Control\\Session Manager\\Environment&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=0 }
002c: set_key_value( hkey=0028, type=1, namelen=40, name=L&quot;NUMBER_OF_PROCESSORS&quot;, data={34,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0028, type=1, namelen=44, name=L&quot;PROCESSOR_ARCHITECTURE&quot;, data={78,00,38,00,36,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0028, type=1, namelen=40, name=L&quot;PROCESSOR_IDENTIFIER&quot;, data={78,00,38,00,36,00,20,00,46,00,61,00,6d,00,69,00,6c,00,79,00,20,00,36,00,20,00,4d,00,6f,00,64,00,65,00,6c,00,20,00,36,00,20,00,53,00,74,00,65,00,70,00,70,00,69,00,6e,00,67,00,20,00,33,00,2c,00,20,00,47,00,65,00,6e,00,75,00,69,00,6e,00,65,00,49,00,6e,00,74,00,65,00,6c,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0028, type=1, namelen=30, name=L&quot;PROCESSOR_LEVEL&quot;, data={36,00,00,00} )
002c: set_key_value() = 0
002c: set_key_value( hkey=0028, type=1, namelen=36, name=L&quot;PROCESSOR_REVISION&quot;, data={30,00,36,00,30,00,33,00,00,00} )
002c: set_key_value() = 0
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: open_key( parent=000c, access=000f003f, attributes=00000000, name=L&quot;System\\CurrentControlSet\\Control\\Session Manager&quot; )
002c: open_key() = 0 { hkey=0028 }
002c: get_key_value( hkey=0028, name=L&quot;PendingFileRenameOperations&quot; )
002c: get_key_value() = OBJECT_NAME_NOT_FOUND { type=-1, total=0, data={} }
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: open_key( parent=000c, access=02000000, attributes=00000000, name=L&quot;Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon&quot; )
002c: open_key() = 0 { hkey=0028 }
002c: get_key_value( hkey=0028, name=L&quot;SFCDllCacheDir&quot; )
002c: get_key_value() = OBJECT_NAME_NOT_FOUND { type=-1, total=0, data={} }
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: create_key( access=00020019, options=00000000, objattr={rootdir=000c,attributes=00000000,sd={},name=L&quot;Software\\Microsoft\\Windows\\CurrentVersion&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=0 }
002c: create_key( access=000f003f, options=00000000, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;RunServicesOnce&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=002c, created=0 }
002c: enum_key( hkey=002c, index=-1, info_class=2 )
002c: enum_key() = 0 { subkeys=0, max_subkey=0, max_class=0, values=0, max_value=0, max_data=0, modif=1d6559b2ed4a1e2 (-456739.1624650), total=0, namelen=30, name=L&quot;&quot;, class=L&quot;&quot; }
002c: close_handle( handle=002c )
002c: close_handle() = 0
002c: close_handle( handle=0028 )
002c: close_handle() = 0
002c: create_key( access=00020019, options=00000000, objattr={rootdir=000c,attributes=00000000,sd={},name=L&quot;Software\\Microsoft\\Windows\\CurrentVersion&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=0028, created=0 }
002c: create_key( access=00020019, options=00000000, objattr={rootdir=0028,attributes=00000000,sd={},name=L&quot;RunServices&quot;}, class=L&quot;&quot; )
002c: create_key() = 0 { hkey=002c, created=0 }
002c: enum_key( hkey=002c, index=-1, info_class=2 )
002c: enum_key() = 0 { subkeys=0, max_subkey=0, max_class=0, values=1, max_value=30, max_data=92, modif=1d6559b3b4053f4 (-456718.3268140), total=0, namelen=22, name=L&quot;&quot;, class=L&quot;&quot; }
002c: enum_key_value( hkey=002c, index=0, info_class=1 )
002c: enum_key_value() = 0 { type=1, total=122, namelen=30, name=L&quot;winemenubuilder&quot;, data={43,00,3a,00,5c,00,77,00,69,00,6e,00,64,00,6f,00,77,00,73,00,5c,00,73,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,77,00,69,00,6e,00,65,00,6d,00,65,00,6e,00,75,00,62,00,75,00,69,00,6c,00,64,00,65,00,72,00,2e,00,65,00,78,00,65,00,20,00,2d,00,61,00,20,00,2d,00,72,00,00,00} }
002c: create_file( access=80100080, sharing=00000005, create=1, options=00000060, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/windows/system32/winemenubuilder.exe&quot; )
002c: create_file() = 0 { handle=0030 }
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_file( access=80100000, sharing=00000003, create=1, options=00004021, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/&quot; )
002c: create_file() = 0 { handle=0030 }
002c: get_handle_fd( handle=0030 )
002c: *fd* 0030 -&gt; 31
002c: get_handle_fd() = 0 { type=2, cacheable=1, access=00120089, options=00004021 }
002c: get_directory_cache_entry( handle=0030 )
002c: get_directory_cache_entry() = 0 { entry=0, free={} }
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_file( access=80100000, sharing=00000003, create=1, options=00004021, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/windows/&quot; )
002c: create_file() = 0 { handle=0030 }
002c: get_handle_fd( handle=0030 )
002c: *fd* 0030 -&gt; 31
002c: get_handle_fd() = 0 { type=2, cacheable=1, access=00120089, options=00004021 }
002c: get_directory_cache_entry( handle=0030 )
002c: get_directory_cache_entry() = 0 { entry=1, free={0} }
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_file( access=80100000, sharing=00000003, create=1, options=00004021, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/windows/system32/&quot; )
002c: create_file() = 0 { handle=0030 }
002c: get_handle_fd( handle=0030 )
002c: *fd* 0030 -&gt; 31
002c: get_handle_fd() = 0 { type=2, cacheable=1, access=00120089, options=00004021 }
002c: get_directory_cache_entry( handle=0030 )
002c: get_directory_cache_entry() = 0 { entry=0, free={1} }
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_file( access=00100020, sharing=00000003, create=1, options=00000021, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/windows/&quot; )
002c: create_file() = 0 { handle=0030 }
002c: get_handle_fd( handle=0030 )
002c: *fd* 0030 -&gt; 31
002c: get_handle_fd() = 0 { type=2, cacheable=1, access=00100020, options=00000021 }
002c: close_handle( handle=0030 )
002c: close_handle() = 0
002c: create_file( access=80000000, sharing=00000005, create=1, options=00000020, attrs=00000000, objattr={rootdir=0000,attributes=00000040,sd={},name=L&quot;&quot;}, filename=&quot;/home/xieby1/.wine/dosdevices/c:/windows/system32/winemenubuilder.exe&quot; )
002c: create_file() = 0 { handle=0030 }
002c: create_mapping( access=000f000d, flags=01000000, file_access=00000001, size=00000000, file_handle=0030, objattr={} )
002c: create_mapping() = 0 { handle=0034 }
002c: get_mapping_info( handle=0034, access=00000001 )
002c: get_mapping_info() = 0 { size=00003000, flags=01800000, shared_file=0000, image={base=10000000,entry_point=10001000,map_size=00003000,stack_size=00100000,stack_commit=00001000,zerobits=00000000,subsystem=00000002,subsystem_low=0000,subsystem_high=0004,gp=00000000,image_charact=0102,dll_charact=0100,machine=014c,contains_code=1,image_flags=80,loader_flags=00000000,header_size=00000200,file_size=00000408,checksum=00000000,cpu=x86} }
002c: close_handle( handle=0034 )
002c: close_handle() = 0
002c: *fd* 12 &lt;- 32
002c: new_process( parent_process=0000, inherit_all=0, create_flags=00000000, socket_fd=12, exe_file=0030, access=001fffff, cpu=x86, info_size=698, objattr={rootdir=0000,attributes=00000000,sd={},name=L&quot;&quot;}, info={debug_flags=0,console_flags=0,console=0000,hstdin=0000,hstdout=0000,hstderr=0000,x=0,y=0,xsize=0,ysize=0,xchars=0,ychars=0,attribute=00,flags=0,show=0,curdir=L&quot;C:\\windows\\&quot;,dllpath=L&quot;C:\\windows\\system32;C:\\windows\\system32;C:\\windows\\system;C:\\windows;.;C:\\windows\\system32;C:\\windows;C:\\windows\\system32\\wbem;C:\\windows\\system32\\WindowsPowershell\\v1.0&quot;,imagepath=L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;,cmdline=L&quot;C:\\windows\\system32\\winemenubuilder.exe -a -r&quot;,title=L&quot;C:\\windows\\system32\\winemenubuilder.exe&quot;,desktop=L&quot;&quot;,shellinfo=L&quot;&quot;,runtime=L&quot;&quot;}, env=L&quot;WINELOADERNOEXEC=1\0LC_PAPER=zh_CN.UTF-8\0XDG_SESSION_ID=49\0LC_ADDRESS=zh_CN.UTF-8\0HOSTNAME=thtf-pc\0LC_MONETARY=zh_CN.UTF-8\0TERM=xterm-256color\0SHELL=/bin/bash\0HISTSIZE=1000\0SSH_CLIENT=10.160.1.32 38182 22\0LC_NUMERIC=zh_CN.UTF-8\0QTDIR=/usr/lib64/qt-3.3\0OLDPWD=/home/xieby1\0QTINC=/usr/lib64/qt-3.3/include\0SSH_TTY=/dev/pts/1\0USER=xieby1\0LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:\0LC_TELEPHONE=zh_CN.UTF-8\0MOZ_GMP_PATH=/usr/lib64/mozilla/plugins/gmp-gmpopenh264/system-installed\0MAIL=/var/spool/mail/xieby1\0LC_IDENTIFICATION=zh_CN.UTF-8\0LANG=en_US.UTF-8\0LC_MEASUREMENT=zh_CN.UTF-8\0SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass\0HISTCONTROL=ignoreboth\0SHLVL=1\0QEMU_LD_PREFIX=/home/xieby1/\0LOGNAME=xieby1\0QTLIB=/usr/lib64/qt-3.3/lib\0SSH_CONNECTION=10.160.1.32 38182 10.160.1.87 22\0LESSOPEN=||/usr/bin/lesspipe.sh %s\0XDG_RUNTIME_DIR=/run/user/1001\0LC_TIME=zh_CN.UTF-8\0CCACHE_HASHDIR=\0LC_NAME=zh_CN.UTF-8\0_=loader/wine\0NUMBER_OF_PROCESSORS=4\0OS=Windows_NT\0PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH\0PROCESSOR_ARCHITECTURE=x86\0PROCESSOR_IDENTIFIER=x86 Family 6 Model 6 Stepping 3, GenuineIntel\0PROCESSOR_LEVEL=6\0PROCESSOR_REVISION=0603\0SystemDrive=c:\0SYSTEMROOT=C:\\windows\0winsysdir=C:\\windows\\system32\0ComSpec=C:\\windows\\system32\\cmd.exe\0PATH=C:\\windows\\system32;C:\\windows;C:\\windows\\system32\\wbem;C:\\windows\\system32\\WindowsPowershell\\v1.0\0TEMP=C:\\users\\xieby1\\Temp\0TMP=C:\\users\\xieby1\\Temp\0windir=C:\\windows\0ALLUSERSPROFILE=C:\\ProgramData\0ProgramData=C:\\ProgramData\0PUBLIC=C:\\users\\Public\0WINEHOMEDIR=\\??\\unix\\home\\xieby1\0WINEBUILDDIR=\\??\\unix\\home\\xieby1\\Codes\\wine\0WINECONFIGDIR=\\??\\unix\\home\\xieby1\\.wine\0WINEUSERNAME=xieby1\0ProgramFiles=C:\\Program Files\0CommonProgramFiles=C:\\Program Files\\Common Files\0&quot; )
002c: new_process() = 0 { info=0034, pid=0030, handle=0038 }
002c: new_thread( process=0038, access=001fffff, suspend=1, request_fd=-1, objattr={rootdir=0000,attributes=00000000,sd={},name=L&quot;&quot;} )
002c: *fd* 0265 -&gt; 34
002c: new_thread() = 0 { tid=0034, handle=003c }
002c: get_handle_fd( handle=0000 )
002c: get_handle_fd() = INVALID_HANDLE { type=0, cacheable=0, access=00000000, options=00000000 }
002c: get_handle_fd( handle=0000 )
002c: get_handle_fd() = INVALID_HANDLE { type=0, cacheable=0, access=00000000, options=00000000 }
002c: select( flags=2, cookie=0031f044, timeout=infinite, size=8, prev_apc=0000, result={}, data={WAIT_ALL,handles={0034}}, context={} )
002c: select() = PENDING { call={APC_NONE}, apc_handle=0000, context={} }
0034: *fd* 7 &lt;- 34
0034: *fd* 9 &lt;- 35
0034: init_thread( unix_pid=942, unix_tid=942, debug_level=0, teb=7ffd8000, entry=7ffdf000, reply_fd=7, wait_fd=9, cpu=x86 )
0034: init_thread() = 0 { pid=0030, tid=0034, server_start=1d659c2801c66fe (-48.7599160), info_size=6896, version=613, all_cpus=00000001, suspend=1 }
0034: open_mapping( access=000f001f, attributes=00000080, rootdir=0000, name=L&quot;\\KernelObjects\\__wine_user_shared_data&quot; )
</code></pre>
<p>æ¥ä¸‹æ¥å°±æ˜¯é€æ­¥å®šä½ï¼Œç©¶ç«Ÿæ˜¯å“ªä¸ªâ€œç³»ç»Ÿè°ƒç”¨â€æŠ¥çš„é”™è¯¯ã€‚æœ€åæ‰¾åˆ°è¿™ä¸ªæŠ¥é”™æ¥è‡ªä¸ä¸Šé¢ç¬¬4~5è¡Œçš„<code>get_handle_fd</code>è°ƒç”¨ã€‚</p>
<p>ä¸Šé¢çš„å®šä½è¿‡ç¨‹å¤ªè¿‡äºæ— è„‘ï¼Œå¤ªè¿‡äºè´¹æ—¶ã€‚ä¸è¿‡ç¬¬ä¸€æ¬¡è°ƒè¯•å®Œå…¨æ²¡ç»éªŒï¼Œæ¥ä¸‹é‡Œæ˜¯ä¸€ç‚¹ç‚¹ç®€å•åˆ†æï¼Œä¸‹æ¬¡é‡åˆ°ç›¸ä¼¼çš„é—®é¢˜åº”è¯¥èƒ½å¤Ÿèƒ½å¤Ÿå¤§å¹…åº¦ç®€åŒ–å®šä½è¿‡ç¨‹ï¼Œ</p>
<h3 id="åˆ†æ"><a class="header" href="#åˆ†æ">åˆ†æ</a></h3>
<p>åœ¨åˆ†æwineä»£ç æ—¶å°±ç¡®å®šäº†æŠ¥é”™çš„ç›´æ¥æ¥æºå¹¶ä¸æ˜¯wineï¼Œè€Œæ˜¯wineserverã€‚è€Œwineserveræ‰¿æ‹…çš„æ˜¯æ¨¡æ‹Ÿwindowsçš„å†…æ ¸ï¼Œé‚£ä¹ˆä¸å¦¨å°±å‡è®¾æŠ¥é”™æ˜¯æ¥è‡ªäºæŸä¸ªwindowsçš„â€œç³»ç»Ÿè°ƒç”¨â€ã€‚è¿™äº›å¯èƒ½å‡ºé”™çš„â€œç³»ç»Ÿè°ƒç”¨â€å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>wineæŠ¥é”™ä¹‹å‰çš„ç³»ç»Ÿè°ƒç”¨æ˜¯<code>NtResumeThread</code>ï¼ˆ<code>resume_thread</code>ï¼‰ï¼Œæ‰€ä»¥æå…¶æœ‰å¯èƒ½æ˜¯è¿™ä¸ªã€‚è€Œåœ¨wineserveré‡Œæ‰“æ–­ç‚¹ï¼Œæ’é™¤äº†ã€‚</p>
</li>
<li>
<p>ä¹‹å‰ä½¿ç”¨çš„wineæä¾›çš„debugä¿¡æ¯ï¼Œè§<a href="qemu-wine.html">qemu-wine.md</a>2020.7.9çš„ç¬”è®°ï¼Œæ‰“å°å‡ºçš„ç¬¬ä¸€ä¸ªerrå¦‚ä¸‹ï¼ˆç¬¬3è¡Œï¼‰ï¼š</p>
<pre><code class="language-shell">002c:Call KERNEL32.MapViewOfFile(00000028,00000002,00000000,00000000,000005e8) ret=7e701731
002c:Call ntdll.NtMapViewOfSection(00000028,ffffffff,0031f934,00000000,00000000,0031f8e0,0031f930,00000001,00000000,00000004) ret=7e7706fc
002c:err:virtual:virtual_map_section mapping 0x880000 1000 000000000 failed
002c:Ret  ntdll.NtMapViewOfSection() retval=c0000017 ret=7e7706fc
002c:Call ntdll.RtlNtStatusTo.DosError(c0000017) ret=7e770713
002c:Ret  ntdll.RtlNtStatusTo.DosError() retval=00000008 ret=7e770713
002c:Ret  KERNEL32.MapViewOfFile() retval=00000000 ret=7e701731
002c:Call KERNEL32.CloseHandle(00000028) ret=7e701746
</code></pre>
<p>å‡½æ•°<code>virtual_map_section</code>åªè°ƒç”¨äº†<code>get_mapping_info</code>å’Œ<code>map_view</code>ã€‚ç„¶è€Œä¹Ÿé€šè¿‡gdbæ–­ç‚¹æ’é™¤äº†ã€‚</p>
</li>
</ul>
<p>ä¸”è€ƒè™‘wineåœ¨æŠ¥é”™æ—¶æ˜¯åœ¨å¯åŠ¨<code>wineboot.exe</code>è¿›ç¨‹ï¼Œä¸”ç¬¬äºŒä¸ªæŠ¥é”™<code>002c:err:wineboot:create_user_shared_data cannot map __wine_user_shared_data</code>å°±æ¥è‡ª<code>wineboot</code>ï¼Œæ‰€ä»¥æˆ‘çŒœæµ‹æŠ¥é”™åº”è¯¥æ˜¯æ¥è‡ª<code>wineboot.exe</code>ï¼Œè€Œä¸æ˜¯wineã€‚</p>
<div style="text-align:right; font-size:3em;">2020.07.15</div>
<h2 id="å°è¯•debug-winebootexe"><a class="header" href="#å°è¯•debug-winebootexe">å°è¯•debug wineboot.exe</a></h2>
<p><strong>æ³¨1</strong>ï¼šä¸‹é¢çš„æµ‹è¯•éƒ½æ˜¯åœ¨x86ç›´æ¥è¿è¡Œçš„ï¼ˆqemuè¿˜æ— æ³•è·Ÿè¸ªforkçš„å­è¿›ç¨‹å’Œexecçš„æ–°è¿›ç¨‹ï¼‰ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿè·Ÿè¸ªåˆ°è°ƒç”¨<code>NtCreateUserProcess</code>è°ƒç”¨<code>spawn_process</code>forkä¹‹åçš„å­è¿›ç¨‹å’Œå­™å­è¿›ç¨‹ã€‚</p>
<p><strong>æ³¨2</strong>ï¼šè™½ç„¶åˆ›å»ºè¿›ç¨‹çš„â€œç³»ç»Ÿè°ƒç”¨â€æ˜¯å‘é€ç»™winNTå†…æ ¸çš„ï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯åº”ç”¨ç¨‹åºè‡ªèº«æ”¶åˆ°â€œç³»ç»Ÿè°ƒç”¨â€çš„ç»“æœåæ‰§è¡Œfork+execå®Œæˆçš„ã€‚å…·ä½“æ“ä½œè¿‡ç¨‹ç•™ç€ä»¥åéœ€è¦çš„æ—¶å€™æ¥åˆ†æã€‚</p>
<p>å¯åŠ¨wineboot.exeå‰ï¼ˆæ‰§è¡Œexecvå‰ï¼‰çš„å‚æ•°argvï¼Œ4ä¸ªï¼š</p>
<pre><code class="language-shell">argv[0]=&quot;/home/xieby1/Codes/wine/loader/wine-preloader&quot;
argv[1]=&quot;/home/xieby1/Codes/wine/loader/wine&quot;
argv[2]=&quot;C:\\windows\\system32\\wineboot.exe&quot;
argv[3]=&quot;--init&quot;
</code></pre>
<p>å¯åŠ¨wineboot.exeå‰ï¼ˆæ‰§è¡Œexecvå‰ï¼‰çš„backtraceï¼š</p>
<div>
<pre>#0  <font color="#C4A000">preloader_exec</font> (<font color="#06989A">argv</font>=0x7d409b00) at <font color="#4E9A06">unix/loader.c</font>:423
#1  <font color="#3465A4">0xf7ba9862</font> in <font color="#C4A000">loader_exec</font> (
    <font color="#06989A">loader</font>=0x7d4061d0 &quot;/home/xieby1/Codes/wine/loader/wine&quot;, <font color="#06989A">argv</font>=0x7d409b00, <font color="#06989A">cpu</font>=0)
    at <font color="#4E9A06">unix/loader.c</font>:436
#2  <font color="#3465A4">0xf7ba9bbc</font> in <font color="#C4A000">exec_wineloader</font> (<font color="#06989A">argv</font>=0x7d409b00, <font color="#06989A">socketfd</font>=6, <font color="#06989A">pe_info</font>=0xffffc120)
    at <font color="#4E9A06">unix/loader.c</font>:512
#3  <font color="#3465A4">0xf7bad384</font> in <font color="#C4A000">spawn_process</font> (<font color="#06989A">params</font>=0x114c00, <font color="#06989A">socketfd</font>=6, <font color="#06989A">unixdir</font>=9, 
    <font color="#06989A">winedebug</font>=0x0, <font color="#06989A">pe_info</font>=0xffffc120) at <font color="#4E9A06">unix/process.c</font>:558
#4  <font color="#3465A4">0xf7bae132</font> in <font color="#C4A000">NtCreateUserProcess</font> (<font color="#06989A">process_handle_ptr</font>=0xffffc470, 
    <font color="#06989A">thread_handle_ptr</font>=0xffffc474, <font color="#06989A">process_access</font>=2097151, <font color="#06989A">thread_access</font>=2097151, 
    <font color="#06989A">process_attr</font>=0xffffc3b0, <font color="#06989A">thread_attr</font>=0xffffc398, <font color="#06989A">process_flags</font>=0, 
    <font color="#06989A">thread_flags</font>=1, <font color="#06989A">params</font>=0x114c00, <font color="#06989A">info</font>=0xffffc350, <font color="#06989A">attr</font>=0xffffc2fc)
    at <font color="#4E9A06">unix/process.c</font>:908
#5  <font color="#3465A4">0x7bc6fcbb</font> in <font color="#C4A000">NtCreateUserProcess</font> (<font color="#06989A">process_handle_ptr</font>=0xffffc470, 
    <font color="#06989A">thread_handle_ptr</font>=0xffffc474, <font color="#06989A">process_access</font>=2097151, <font color="#06989A">thread_access</font>=2097151, 
    <font color="#06989A">process_attr</font>=0xffffc3b0, <font color="#06989A">thread_attr</font>=0xffffc398, <font color="#06989A">process_flags</font>=0, 
    <font color="#06989A">thread_flags</font>=1, <font color="#06989A">params</font>=0x114c00, <font color="#06989A">info</font>=0xffffc350, <font color="#06989A">attr</font>=0xffffc2fc)
    at <font color="#4E9A06">process.c</font>:255
#6  <font color="#3465A4">0x7bc6ff6b</font> in <font color="#C4A000">RtlCreateUserProcess</font> (<font color="#06989A">path</font>=0xffffc4c4, <font color="#06989A">attributes</font>=64, 
    <font color="#06989A">params</font>=0x114c00, <font color="#06989A">process_descr</font>=0x0, <font color="#06989A">thread_descr</font>=0x0, <font color="#06989A">parent</font>=0x0, 
    <font color="#06989A">inherit</font>=0 &apos;\000&apos;, <font color="#06989A">debug</font>=0x0, <font color="#06989A">exception</font>=0x0, <font color="#06989A">info</font>=0xffffc46c) at <font color="#4E9A06">process.c</font>:317
#7  <font color="#3465A4">0x7bc4cd34</font> in <font color="#C4A000">run_wineboot</font> (<font color="#06989A">env</font>=0x110518) at <font color="#4E9A06">env.c</font>:1207
#8  <font color="#3465A4">0x7bc4d0e0</font> in <font color="#C4A000">init_user_process_params</font> () at <font color="#4E9A06">env.c</font>:1282
#9  <font color="#3465A4">0x7bc5e82d</font> in <font color="#C4A000">__wine_process_init</font> () at <font color="#4E9A06">loader.c</font>:3965
#10 <font color="#3465A4">0x7bc5ee39</font> in <font color="#C4A000">__wine_set_unix_funcs</font> (<font color="#06989A">version</font>=70, <font color="#06989A">funcs</font>=0xf7be85a0 &lt;unix_funcs&gt;)
    at <font color="#4E9A06">loader.c</font>:4056
#11 <font color="#3465A4">0xf7babcfc</font> in <font color="#C4A000">start_main_thread</font> () at <font color="#4E9A06">unix/loader.c</font>:1566
#12 <font color="#3465A4">0xf7babf77</font> in <font color="#C4A000">__wine_main</font> (<font color="#06989A">argc</font>=2, <font color="#06989A">argv</font>=0xffffd064, <font color="#06989A">envp</font>=0xffffd070)
    at <font color="#4E9A06">unix/loader.c</font>:1834
#13 <font color="#3465A4">0x7d001920</font> in <font color="#C4A000">main</font> (<font color="#06989A">argc</font>=2, <font color="#06989A">argv</font>=0xffffd064) at <font color="#4E9A06">main.c</font>:287</pre>
</div>
<div style="text-align:right; font-size:3em;">2020.07.17</div>
<h3 id="windowsç¨‹åºå…¥å£"><a class="header" href="#windowsç¨‹åºå…¥å£">windowsç¨‹åºå…¥å£</a></h3>
<p>åœ¨çœ‹wineboot.exe.soçš„objdumpæ—¶å‘ç°äº†<code>mainCRTStartup</code>åœ°å€<code>1998c</code>å3ä½å’Œæ˜¨å¤©çœ‹åˆ°çš„<code>call *12(%ebp)</code>ç›®æ ‡åœ°å€<code>7e70598c</code>å3ä½ä¸€è‡´ï¼Œç¬é—´è­¦è§‰ï¼</p>
<p><strong>E U R E K A ï¼</strong></p>
<p>æ‰€ä»¥åªè¦æŠŠwineboot.exe.soçš„ç¬¦å·æ·»åŠ <code>7E6EC000</code>çš„åç§»åŠ è½½gdbé‡Œï¼Œç„¶åå°±å¯ä»¥åœ¨winebooté‡Œæ‰“æ–­ç‚¹äº†ï¼</p>
<h3 id="å…³äºæŠ¥é”™"><a class="header" href="#å…³äºæŠ¥é”™">å…³äºæŠ¥é”™</a></h3>
<p>æŠ¥é”™çš„å¼€å¤´æ•°å­—å¤§æ¦‚æ˜¯è¿›ç¨‹å·ã€‚</p>
<h4 id="å¼€å¤´ä¸¤ä¸ªæ¥è‡ª002cçš„æŠ¥é”™"><a class="header" href="#å¼€å¤´ä¸¤ä¸ªæ¥è‡ª002cçš„æŠ¥é”™">å¼€å¤´ä¸¤ä¸ªæ¥è‡ª002cçš„æŠ¥é”™</a></h4>
<p>è¿™ä¿©æŠ¥é”™æ¥è‡ªäº<code>programs/wineboot/wineboot.c:213, 217</code>ã€‚è¿™ä¿©æŠ¥é”™æ¶‰åŠwineboot.exeå’Œwineserverä¹‹é—´äº¤äº’ã€‚æˆ‘è§‰å¾—è¿™ææœ‰å¯èƒ½æ˜¯æ˜¯å› ä¸ºç«äº‰é€ æˆçš„ã€‚å› ä¸ºå•æ­¥æ‰§è¡Œwineserveræ—¶æœ‰æŠ¥é”™ï¼Œè€Œå•æ­¥æ‰§è¡Œwineboot.exeå´æ²¡æœ‰æŠ¥é”™ã€‚</p>
<p>2020.7.22: âœ…å°†å†…æ ¸é¡µå¤§å°æ›¿æ¢ä¸º4kåï¼Œè¿™ä¸ªæŠ¥é”™æ¶ˆå¤±äº†ï¼ï¼ï¼ï¼ˆå’ŒåŸæœ¬æœŸå¾…çš„ä¸ä¸€æ ·ï¼Œæœ¬ä»¥ä¸ºæ¢æˆ4ké¡µåï¼Œdlopençš„é—®é¢˜ä¼šæ¶ˆå¤±ã€‚ï¼‰</p>
<p>2020.8.13: åœ¨è¿è¡Œåˆ«çš„ç¨‹åºå’Œwinedbgæ‰“å°bt allæ—¶éƒ½é‡åˆ°äº†<code>virtual_map_section mapping 0x880000 1000 000000000 failed</code>è¿™ä¸ªæŠ¥é”™ï¼Œåˆ«çš„ç¨‹åºæŠ¥é”™æ˜¯å› ä¸ºåˆ«çš„ç¨‹åºéœ€è¦å¯åŠ¨winebootè€Œwinedbgæ˜¯æœ¬èº«æŠ¥é”™ï¼ˆåœ¨virtual_map_sectionçš„ERRé‡Œå¢åŠ äº†å½“å‰è¿›ç¨‹åï¼Œç”¨<code>prctl(PR_GET_NAME, xxx)</code>ï¼Œå› æ­¤æŠ¥é”™çš„ç¨‹åºåï¼‰ã€‚æ‰“å°å‡ºå‡ºé”™æ—¶ï¼ˆåœ¨å‡ºé”™æ—¶è°ƒç”¨scanfï¼Œç„¶åå»æ‰“å°ï¼‰çš„memory mapsï¼Œå‘ç°0x880000å·²ç»è¢«æ˜ å°„ä¸ºå¤§å°ä¸º1040Kçš„RWçš„å†…å­˜åŒºåŸŸäº†ã€‚æˆ‘çŒœæµ‹åº”è¯¥å¯èƒ½æ˜¯QEMUçš„åˆ†é…é€»è¾‘æœ‰é—®é¢˜ã€‚æœ‰å¿…è¦å»çœ‹çœ‹<code>virtual_map_section</code>çš„é€»è¾‘å’ŒWINEä¸ºå•¥è¦åˆ†é…0x880000ã€‚</p>
<p>2020.8.17ï¼šæŠ¥é”™å‡ºç°åœ¨<code>programs/wineboo.c: 1592 create_user_shared_data()</code>ï¼Œåœ¨è¿›è¡Œwindowsç³»ç»Ÿè°ƒç”¨<code>NtMapViewOfSection</code>ï¼ˆå½’æ ¹ç»“åº•æ˜¯å‘wineserverè¯·æ±‚<code>map_view</code>ç³»ç»Ÿè°ƒç”¨æ—¶ï¼‰æ—¶å‡ºé”™ï¼Œä¸”è¿™ä¸ªé”™è¯¯å’Œwinebootçš„æ‰§è¡Œçš„é€Ÿåº¦æœ‰å…³ç³»ï¼Œå°†æŠ¥é”™ä»£ç æ‰“å°å‡ºæ¥æ˜¯<code>c0000017</code>ã€‚</p>
<p>2020.8.18ï¼šä»Šå¤©ä¸€ç‚¹ç‚¹è¯•å‡ºæ¥ï¼Œåœ¨<code>programs/wineboot.c: 1511: GetWindowsDirectoryW(...)</code>ï¼ˆæœªæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼‰åˆ°<code>programs/wineboot.c: 1592</code>ä¹‹é—´å­˜åœ¨ç«äº‰ï¼Œä¸‹æ–‡æˆ‘ç§°è¿™ä¸ªåŒºé—´ä¸º<em>ç«äº‰åŒºé—´</em>ã€‚</p>
<p>2020.8.19 vï¼š</p>
<p>ç›®å‰çš„æƒ…å†µï¼šä¸€ç‚¹ä¸€ç‚¹é€šè¿‡åœ¨QEMUé‡Œæ’å…¥fprintfï¼ˆä¸ºä»€ä¹ˆä¸ç”¨printfï¼Ÿå› ä¸ºwineæ˜¯å¤šè¿›ç¨‹åº”ç¨‹åºï¼Œï¼‰ï¼Œé€šè¿‡åœ¨WINEé‡Œä½¿ç”¨ERR()ï¼Œï¼ˆä¸ºä»€ä¹ˆä¸ç”¨gdbï¼Ÿå› ä¸ºgdbåœ¨è¿™ä¸ªç«äº‰çš„åœºæ™¯ä¸‹ä¸å¥½ä½¿ï¼Œæ‰§è¡Œå¤ªæ…¢ï¼Œé”™è¯¯æ¶ˆå¤±ï¼Œæ‰€ä»¥åªèƒ½ç”¨è¾“å‡ºåˆ°æ–‡ä»¶/ç»ˆç«¯çš„æ–¹æ³•ï¼‰ï¼Œæ‰¾åˆ°äº†ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨<em>ç«äº‰åŒºé—´</em>é‡Œqemuä¸€å…±<span style="color: red;"><strong>æ”¶åˆ°</strong></span>3ä¸ªæ¥è‡ªwinebootæ‰§è¡Œmmapç³»ç»Ÿè°ƒç”¨çš„è¯·æ±‚ï¼Œç»è¿‡é˜…è¯»ä»£ç ï¼ˆè¿˜æ²¡å»gdbå®é™…æŸ¥çœ‹ï¼‰è¿™3ä¸ªmmapåˆ†åˆ«æ¥è‡ª<code>create_user_shared_data=&gt;...=&gt;dlls/ntdlls/unix/virtual.c: </code>çš„#1<code>2249: map_view</code>, #2#3<code>2254: 2021: map_image_into_view: map_file_into_view</code>ã€‚</p>
<p>ä½†æ˜¯ï¼Œé€šè¿‡åœ¨qemuæ‰§è¡Œmmapç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°ï¼ˆtarget_mmapï¼‰é‡Œæ’fprintfå‘ç°ï¼Œæ— è®ºç«äº‰æ˜¯å¦å‡ºç°ï¼ˆå¿«é€Ÿæ‰§è¡Œæˆ–æ…¢æ…¢æ‰§è¡Œï¼‰ï¼Œ#2mmapéƒ½æ‰§è¡Œå¤±è´¥äº†çš„ï¼Œä½†æ˜¯è¡¨ç°ç»™åº”ç”¨ç¨‹åºï¼ˆwinebootï¼‰çš„æ˜¯æœ‰ç«äº‰æ—¶æ˜¯#2mmapå¤±è´¥ï¼Œæ— ç«äº‰æ—¶#2mmapæˆåŠŸã€‚#2mmapå¤±è´¥åœ¨qemuçš„<code>linux-user/mmap.c: target_mmap: /*handle the end of the mapping*/ mmap_frag</code>é‡Œï¼Œå³#2mmapå¹¶<span style="color: red;"><strong>æœªå®é™…æ‰§è¡Œ</strong></span>ã€‚</p>
<p>å¤±è´¥äº†ä¸è¦ç´§ï¼Œä½†æ˜¯qemuåœ¨mmapæœªæ‰§è¡Œåæ²¡æœ‰è®¾ç½®æ­£ç¡®çš„errnoã€‚è¿™å¯¼è‡´errnoæ˜¯ä¸Šä¸€æ¬¡æŸä¸ªå‡½æ•°è®¾ç½®çš„ã€‚è¿™ä¸ªä¸Šä¸ªå‡½æ•°å¤§æ¦‚å°±æ˜¯å’Œç«äº‰ç›¸å…³çš„äº†ï¼Œä½¿å¾—æœ‰ç«äº‰æ—¶errnoæ˜¯<code>21 (Is a directory)</code>ï¼Œæ²¡ç«äº‰æ—¶errnoæ˜¯<code>0 (Success)</code>ã€‚æ ¹æ®<code>man errno</code>ï¼Œ</p>
<blockquote>
<p>The  &lt;errno.h&gt;  header file defines the integer variable errno, which is set by system calls and some library functions in the event of an error to indicate what went wrong. </p>
<p>... a function that succeeds is allowed to change errno.  The value of errno is never set to zero by any system call or library function.</p>
<p>For some system calls and library functions (e.g., getpriority(2)), -1 is  a valid  return on success.  In such cases, a successful return can be distinguished from an error return by setting errno to zero before the  call,  and then, if the call returns a status that indicates that an error may have occurred, checking to see if errno has a nonzero value.</p>
</blockquote>
<p>å³ä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„å‡½æ•°æ˜¯å¯ä»¥æ”¹errnoï¼Œä½†ç»å¯¹ä¸ä¼šè®¾ç½®æˆ0ã€‚è«éæœªä½œä»»ä½•ä¿®æ”¹é»˜è®¤çš„å€¼å°±æ˜¯0ï¼Ÿå³ä¸€æ¬¡é”™éƒ½æ²¡å‡ºï¼Ÿï¼ˆåšä¸ªæµ‹è¯•å§ï¼Œx86 gcc 9.3ç¼–è¯‘ç¡®å®åˆå§‹å€¼ä¸º0ï¼‰ï¼ˆè¿˜éœ€è¦æ‹…å¿ƒqemuçš„ç³»ç»Ÿè°ƒç”¨å®ç°å¯ä¿¡å—ï¼Ÿä¼šå§errnoæ”¹ä¸º0å—ï¼Ÿï¼‰ä½†æ˜¯ä¸ºå•¥åˆè¯´ç‰¹æ®Šæƒ…å†µå¯èƒ½ä¼šç½®0ï¼Ÿ</p>
<p>ç°åœ¨è¿™ä¸ªé—®é¢˜å¯ä»¥åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†äº†ï¼Œä¸€æ˜¯qemuçš„mmapçš„é—®é¢˜ï¼Œè€Œæ˜¯ç«äº‰çš„é—®é¢˜ã€‚ç«äº‰é—®é¢˜æ¥æºwineè¿˜æ˜¯qemuæœ‰å¾…æŸ¥æ˜ã€‚</p>
<h5 id="qemuçš„mmapå¤±è´¥"><a class="header" href="#qemuçš„mmapå¤±è´¥">qemuçš„mmapå¤±è´¥</a></h5>
<p>ç»™mmapå¤±è´¥ååŠ ä¸Šerrnoè¿™ä¸ªå¾ˆç®€å•ï¼Œä½†æ˜¯qemuä¸ºä»€ä¹ˆåœ¨å¤„ç†ä¸åŒé¡µå¤§å°çš„hostå’Œguestä¼šå®Œå…¨å¤„ç†ä¸äº†å‘¢ï¼Ÿå‡ºé”™ä»£ç ä½äº<code>linux-user/mmap.c: /*map an incomplete host page*/ mmap_frag:</code> qemué‡Œçš„æ³¨é‡Šä¸º<em>msync() won't work here, so we return an error if write is possible while it is a shared mapping</em>ã€‚</p>
<p>qemuå¯¹hostå’Œguesté¡µå¤§å°ä¸åŒçš„ç†è®ºä¸Šçš„æ€è€ƒï¼Œè§<a href="qemu-wine.html">qemu-wine.md#é¡µå±æ€§çš„ç®¡ç†</a>ã€‚</p>
<h5 id="ç«äº‰é—®é¢˜"><a class="header" href="#ç«äº‰é—®é¢˜">ç«äº‰é—®é¢˜</a></h5>
<p>2020.8.19 ^</p>
<h4 id="dlopenå¤±è´¥-failed-to-map-segment-from-shared-object"><a class="header" href="#dlopenå¤±è´¥-failed-to-map-segment-from-shared-object">dlopenå¤±è´¥: &quot;failed to map segment from shared object&quot;</a></h4>
<p>æ¥è‡ªäºå¯åŠ¨winemenubuilderå‰ï¼Œ<code>server_start_thread</code> -&gt; <code>attach_thread</code> -&gt; <code>LdrInotialize Thunk</code> -&gt; <code>fixup_imports</code> -&gt; <code>import_dll</code> -&gt; <code>load_dll</code> -&gt; <code>dlopen</code>åŠ¨æ€åŠ è½½<code>ole32.dll.so</code>å’Œ<code>oleaut32.dll.so</code>å¤±è´¥ã€‚dlerroræ˜¾ç¤ºä¸ºâ€œfailed to map segment from shared objectâ€ï¼ŒåŸå› æš‚æ—¶æœªè§£ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.07.22</div>
<ul>
<li>ç”¨mmapå¯ä»¥åˆ†é…ä¸€ä¸ª4kå¯¹é½ä½†é16kå¯¹é½çš„å†…å­˜åœ°å€æ¥è¿›è¡Œæµ‹è¯•ã€‚</li>
<li>åœ¨x86-64ä¸Šç¼–è¯‘glibcå‚è€ƒ<a href="https://stackoverflow.com/questions/8004241/how-to-compile-glibc-32bit-on-an-x86-64-machine">How to compile glibc 32bit on an x86_64 machine</a>ï¼Œå‚è€ƒglibcçš„ç¬”è®°<a href="../../Glibc/glibc.html">glibc.md</a>ã€‚</li>
</ul>
<p>åˆ‡æ¢æˆ4ké¡µå’Œå¸¦debugç¬¦å·çš„glibcåï¼Œå˜æˆäº†dlopenåŠ è½½<code>winex11.drv.so</code>å¤±è´¥ï¼Œç”±æ­¤åˆ›å»ºå›¾å½¢åŒ–çª—å£å¤±è´¥ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.07.25</div>
<p>ä¸Šé¢çš„<code>winex11.drv.so</code>dlopenå¤±è´¥æ˜¯æºäº<code>libX11.so.6</code>åŠ è½½å¤±è´¥ï¼Œå¤±è´¥åŸå› åŒä¸Šï¼šdlerroræ˜¾ç¤ºä¸ºâ€œfailed to map segment from shared objectâ€ï¼ŒåŸå› æš‚æ—¶æœªè§£ã€‚å¼ è€å¸ˆé—®ä¸ºä»€ä¹ˆå»çœ‹æºç è€Œä¸æ˜¯ä¸ç”¨straceå·¥å…·çœ‹çœ‹ï¼Œå…¶å®æˆ‘ä¹‹å‰çœ‹è¿‡äº†ï¼Œæ²¡åˆ°mmapç³»ç»Ÿè°ƒç”¨å°±dlopenå°±å‡ºé”™ç»ˆæ­¢äº†ã€‚ä¸‹é¢å°†ä¸€ä¸ªæ­£å¸¸çš„dlopenæ‰“å¼€æ–‡ä»¶çš„straceå’Œ<code>libX11.so.6</code>å¤±è´¥çš„straceåˆ—ä¸¾å¦‚ä¸‹ï¼Œ</p>
<pre><code class="language-shell"># åŠ è½½winex11.drv.soæˆåŠŸï¼ˆä½†æ˜¯winex11.drv.soä¾èµ–äºlibX11.so.6ï¼Œæ‰€ä»¥å·²åŠ è½½çš„winex11.drv.soä¹‹åä¹Ÿä¼šè¢«æ¸…ç©ºï¼‰
openat(AT_FDCWD, &quot;/home/xieby1/Codes/wine/dlls/winex11.drv/winex11.drv.so&quot;, O_RDONLY) = 13
read(13, &quot;\177ELF\1\1\1&quot;, 7)            = 7
openat(AT_FDCWD, &quot;/home/xieby1/Codes/wine/dlls/winex11.drv/winex11.drv.so&quot;, O_RDONLY|O_CLOEXEC) = 14
read(14, &quot;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0P \2\0004\0\0\0&quot;..., 512) = 512
fstat(14, {st_mode=S_IFREG|0775, st_size=3474012, ...}) = 0
mmap(0xff5e7a4000, 602112, PROT_READ, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS|MAP_DENYWRITE, -1, 0) = 0xff5e7a4000
mmap(0xff5e7a4000, 602112, PROT_READ, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 14, 0) = 0xff5e7a4000
mmap(0xff5e7b5000, 315392, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 14, 0x11000) = 0xff5e7b5000
mmap(0xff5e802000, 196608, PROT_READ, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 14, 0x5e000) = 0xff5e802000
mmap(0xff5e832000, 20480, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 14, 0x8d000) = 0xff5e832000
close(14)
</code></pre>
<pre><code class="language-shell"># dlopenåŠ è½½libX11.so.6å¤±è´¥
access(&quot;/home/xieby1/glibc32-debug/lib/libX11.so.6&quot;, F_OK) = 0
openat(AT_FDCWD, &quot;/home/xieby1/glibc32-debug/lib/libX11.so.6&quot;, O_RDONLY|O_CLOEXEC) = 14   
read(14, &quot;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\320 \1\0004\0\0\0&quot;..., 512) = 512
fstat(14, {st_mode=S_IFREG|0644, st_size=1364940, ...}) = 0
close(14)
</code></pre>
<p><strong>æ³¨</strong>ï¼šå…¶ä¸­æœ‰è¯¸å¤š<code>rt_sigprocmask</code>å’Œ<code>cacheflush</code>è°ƒç”¨ï¼Œè¢«æˆ‘å‰”é™¤äº†ã€‚è¿™äº›è°ƒç”¨åœ¨x86æœºå™¨ä¸Šç›´æ¥è¿è¡Œæ—¶æ²¡æœ‰ï¼Œè€Œåœ¨é¾™èŠ¯æœºå™¨ä¸Šç”¨qemuæ¨¡æ‹Ÿä¼šæœ‰ï¼Œæ„ä¹‰æš‚æ—¶æœªçŸ¥ï¼Œåº”è¯¥ä¸ä¼šå½±å“ä»€ä¹ˆå§ã€‚</p>
<p>å¦‚ä¸Šï¼Œæ­£å› ä¸ºè¿˜æ²¡åˆ°mmapç³»ç»Ÿè°ƒç”¨dlopenå°±å¤±è´¥ï¼Œåº”è¯¥æ˜¯dlopené‡Œæœ‰ä»€ä¹ˆæ£€æŸ¥æœºåˆ¶ï¼Œä½¿å¾—dlopenç›´æ¥æ”¾å¼ƒæ‰§è¡Œmmapï¼Œè¿™å°±æ˜¯æˆ‘æƒ³å»çœ‹dlopenæºç çš„åŸå› ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.07.27</div>
<p>æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼šdlopenåœ¨åŠ è½½<code>libX11.so</code>è°ƒç”¨mmapæ—¶ï¼Œqemuå·²ç»æ‰¾ä¸åˆ°è¿ç»­å¤§å°ä¸º0x14f000Bçš„å†…å­˜ç©ºé—´ç»™<code>libX11.so</code>äº†ï¼Œæ‰€ä»¥å¤±è´¥ã€‚è¿™æ ·ä¹‹å‰çš„straceæ²¡æœ‰è¾“å‡ºmmapçš„ç–‘æƒ‘å°±èƒ½è§£é‡Šäº†ï¼šå› ä¸ºqemuåœ¨æ¨¡æ‹Ÿmmapæ—¶å‘ç°æ²¡æœ‰ç©ºé—´äº†ï¼Œæ‰€ä»¥æ ¹æœ¬è¿˜æ²¡è°ƒç”¨mipsçš„mmapå°±å‡ºé”™è¿”å›äº†ã€‚</p>
<p>ğŸ¤”ğŸ¤”ğŸ¤”å¯æ˜¯ä¸ºä»€ä¹ˆä¼šç©ºé—´ä¸å¤Ÿå‘¢ï¼Ÿæˆ‘çœ‹äº†çœ‹<code>reserved_va=0xfffff000</code>å•Šï¼Œè¿™ä¸ªæ˜¯è¡¨ç¤ºå¤§å°å§ï¼Œä¸ºä»€ä¹ˆä¸å¤Ÿï¼Ÿ</p>
<div style="text-align:right; font-size:3em;">2020.07.28</div>
<p>å°†qemuå†…å­˜åˆ†é…ç•¥åšä¿®æ”¹ï¼Œ<code>linux-user/mmap.cï¼š 235</code>è‹¥protçš„rwxä½æœ‰æ ‡å¿—æ‰è¡¨ç¤ºè¢«ä½¿ç”¨ï¼Œä¾¿å¯ä»¥è¿è¡Œnotepadï¼ˆä¿å­˜/åŠ è½½æ–‡ä»¶ä¼šå´©æºƒï¼Œå¯ä»¥æ­£å¸¸çš„æ‰“å­—ã€‚ï¼‰ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.07.30</div>
<p><strong>æ˜¯è°å·èµ°äº†æˆ‘çš„å†…å­˜ï¼Ÿ</strong></p>
<p>åˆ†é…æ–°é¡µçš„å‡½æ•°ï¼Œå¯èƒ½æ˜¯<code>page_find_alloc</code>ï¼Œéšæ„æµè§ˆPageDescä»£ç æ—¶å‘ç°çš„ã€‚<code>l1_map</code>å’Œ<code>v_l2_levels</code>æ˜¯å•¥ï¼Ÿ</p>
<p>qemuæŸ¥è¯¢ä¸€ä¸ªé¡µæ˜¯å¦è¢«ä½¿ç”¨çš„ï¼Œé€šè¿‡page_get_flagsåˆ¤æ–­ï¼Œè‹¥æœ‰ä»»ä½•æ ‡å¿—ä½å°±è¡¨ç¤ºè¢«ä½¿ç”¨äº†ã€‚è¿™ä¸ªå‡½æ•°æœ‰å¾…è®¤çœŸçœ‹çœ‹ğŸ¤”ã€‚åœ¨è¿™ä¸ªå‡½æ•°é™„è¿‘æœ‰ä¸€ä¸ªå«<code>page_dump</code>ç”¨æ¥æ‰“å°guestå†…å­˜ä½¿ç”¨æƒ…å†µçš„å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°qemuç»™é¡µå®šä¹‰äº†æ–°çš„æ ‡å¿—ä½PAGE_VALIDï¼ŒPAGE_WRITE_ORGå’ŒPAGE_WRITE_INVã€‚<code>walk_memory_regions</code>å‡½æ•°èƒ½å¤Ÿä¾¿åˆ©ä¸€éguestå†…å­˜ã€‚æœ‰å¿…è¦å»çœ‹çœ‹è¿™ä¸ªå‡½æ•°å’Œmemory_regionsåœ¨ç”¨æˆ·æ€ä¸­å­˜åœ¨çš„æ„ä¹‰<a href="../QEMU/memory_region.html">memory_region.md</a>ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.08.03</div>
<p>åœ¨QEMUæ¯æ¬¡é‡åˆ°<code>openat</code>ç³»ç»Ÿè°ƒç”¨æ—¶å°±dumpä¸€æ¬¡x86çš„å†…å­˜ï¼ˆä½¿ç”¨page_dumpå‡½æ•°ï¼‰ã€‚ç”±æ­¤å‘ç°äº†ä¸¤ä¸ªå¤§å—å†…å­˜è¢«åˆ†é…èµ°äº†ï¼Œ</p>
<p><strong>æ³¨1</strong>ï¼šä¸‹é¢æ˜¯notepadè¿è¡Œçš„ç»“æœã€‚<strong>æ³¨2</strong>ï¼šä¸‹é¢çš„ç©ºé—´éƒ½æ˜¯wineä¸»åŠ¨åˆ†é…çš„ã€‚</p>
<ol>
<li><code>...</code>~<code>7b000000</code>å¤§çº¦1.7GBç©ºé—´ï¼Œwine-preloaderåˆ†é…çš„ï¼›</li>
<li><code>80000000</code>~<code>...</code>å¤§çº¦1.98GBç©ºé—´ï¼Œç¬¬äºŒæ¬¡è¿è¡Œwineæ—¶è°ƒç”¨<code>__wine_main</code>-&gt;<code>virtual_init</code>-&gt;<code>mmap_init</code>åˆ†é…çš„ã€‚</li>
</ol>
<p>QEMUä¹‹åçš„åˆ†é…å¤±è´¥å°±æ˜¯æ¥è‡ªäºå‰è€…ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.08.06</div>
<p>å°†é¢„ç•™å†…å­˜çš„å›¾å¼•ç”¨å¦‚ä¸‹ï¼Œ</p>
<p><img src="pictures/reserve_memory-formatted.svg" alt="reserve_memory-formatted" /></p>
<p>å½“åˆ†é…<code>110000</code>~<code>68000000</code>è¿™ä¸€æ®µæ—¶å‘ç”Ÿäº†é—®é¢˜ï¼Œ</p>
<p>qemuæ¨¡æ‹Ÿçš„x86å†…å­˜ç©ºé—´å¦‚ä¸‹ï¼ˆqemuçš„page_dumpå‡½æ•°æä¾›ï¼‰ï¼Œ</p>
<pre><code># before alloc 110000~68000000       |    # after alloc 110000~68000000
00000000-00110000 00110000 ----OI    |    00000000-7d400000 7d400000 ----OI
08048000-08049000 00001000 r--VOI    |    
08049000-7d400000 753b7000 ----OI    |    
7d400000-7d402000 00002000 r-xVOI    |    7d400000-7d402000 00002000 r-xVOI
7d402000-7d403000 00001000 r--VOI    |    7d402000-7d403000 00001000 r--VOI
7d403000-7d404000 00001000 ----OI    |    7d403000-7d404000 00001000 ----OI
7d404000-7d405000 00001000 rw-VOI    |    7d404000-7d405000 00001000 rw-VOI
ff7fc000-ff7fe000 00002000 rw-VOI    |    ff7fc000-ff7fe000 00002000 rw-VOI
ff7fe000-ff7ff000 00001000 ----OI    |    ff7fe000-ff7ff000 00001000 ----OI
ff7ff000-fffff000 00800000 rw-VOI    |    ff7ff000-fffff000 00800000 rw-VOI
</code></pre>
<p>é—®é¢˜æ¥è‡ªäº08048000-08049000(rVOI)å’Œ08049000-7d400000(OI)è¿™ä¸¤æ®µæœ¬ä¸åº”è¯¥æœ‰ä¸œè¥¿ã€‚ä¸”qemuçš„mmapè¦†ç›–ç®—æ³•ä¹Ÿæœ‰é—®é¢˜ï¼Œ08048000-08049000(rVOI)å’Œ08049000-7d400000(OI)è¢«110000~68000000(OI)è¦†ç›–åå±…ç„¶å˜ä¸ºäº†110000~7d400000(OI)è€Œä¸æ˜¯110000~68000000(OI)å’Œ68000000~7d40000000(rVOI)ã€‚</p>
<p>x86ç›´æ¥è¿è¡Œå¦‚ä¸‹ï¼ˆpmapå‘½ä»¤æä¾›ï¼‰</p>
<pre><code># before alloc 110000~68000000           |    # after alloc 110000~68000000
00010000   1024K -----   [ anon ]        |    00010000 1703872K -----   [ anon ]
08048000      4K r---- wine-preloader    |        
7d400000      8K r-x-- wine-preloader    |    7d400000      8K r-x-- wine-preloader
7d402000      4K r---- wine-preloader    |    7d402000      4K r---- wine-preloader
7d404000      4K rw--- wine-preloader    |    7d404000      4K rw--- wine-preloader
f7ffa000     12K r----   [ anon ]        |    f7ffa000     12K r----   [ anon ]
f7ffd000      4K r-x--   [ anon ]        |    f7ffd000      4K r-x--   [ anon ]
fffdd000    132K rw---   [ stack ]       |    fffdd000    132K rw---   [ stack ]
 total             1192K                 |     total          1704036K
</code></pre>
<p>æ‰€ä»¥åˆ°åº•æ˜¯qemuçš„è¦†ç›–ç®—æ³•æœ‰é—®é¢˜è¿˜æ˜¯å¤šå‡ºäº†08049000-7d400000(OI)æœ‰é—®é¢˜ï¼Ÿ</p>
<div style="text-align:right; font-size:3em;">2020.08.07</div>
<p>qemuçš„é¢„ç•™å†…å­˜çš„ç®—æ³•æœ‰é—®é¢˜ï¼Œ</p>
<ul>
<li>linux-user/main.c: main
<ul>
<li>827: linux-user/linuxload.c: 127: loader_exec
<ul>
<li>147: linux-user/elfload.c: 2807: load_elf_binary
<ul>
<li>2821: linux-user/elfload.c: 2324: load_elf_image</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åˆ†é…çš„segmentsæ‰€éœ€çš„æœ€ä½åœ°å€(loaddr)åˆ°æœ€é«˜åœ°å€(loaddr)çš„æ‰€æœ‰å†…å­˜ã€‚</p>
<p>å¯¹äºwine-preloaderï¼Œ<code>readelf -l loader/wine-preloader </code>ï¼Œæœ€ä½åœ°å€å’Œæœ€é«˜åœ°å€å·®æ¥è¿‘2GBï¼Œå¯¼è‡´ä¹‹ååŠ è½½.soæ–‡ä»¶å†…å­˜ä¸è¶³ã€‚ä¸Šè¿°é—®é¢˜å¦‚ä¸‹å›¾ï¼Œ</p>
<p><img src="../QEMU/pictures/memory_reserve_problem-formatted.svg" alt="memory_reserve_problem-formatted" /></p>
<p>è¿™ä½¿å¾—ç•™ç»™wineåŠ è½½soæ–‡ä»¶çš„å†…å­˜å˜å¾—å¾ˆå°‘ã€‚è§£å†³åŠæ³•åˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯è®©qemuçš„å†…å­˜å’Œx86çš„å†…å­˜ä¿æŒä¸€ç›´ï¼ŒäºŒæ˜¯è®©qemuçš„mmapå¯ä»¥åˆ†é…å·²è¢«åˆ†é…ä½†æ˜¯ä¸º<code>---</code>çš„é¡µã€‚å‰è€…åº”è¯¥æ˜¯æœ€å¥½çš„è§£å†³åŠæ³•ï¼Œå¯æ˜¯ä¸ºå•¥qemuå®˜æ–¹ä¸è¿™æ ·åšï¼Ÿåè€…ç®—æ˜¯é¥®é¸©æ­¢æ¸´ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.09.14</div>
<h2 id="å°è¯•è§£å†³pdf2vecexeé—®é¢˜"><a class="header" href="#å°è¯•è§£å†³pdf2vecexeé—®é¢˜">å°è¯•è§£å†³pdf2vec.exeé—®é¢˜</a></h2>
<p>pdf2vec.exeå¯ä»¥åœ¨x86-linuxä¸Šç”¨ç›®å‰ä¿®æ”¹ç‰ˆçš„qemu wineæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯åœ¨é¾™èŠ¯ä¸Šç”¨qemu wineæ— æ³•è¿è¡Œã€‚åŸºæœ¬æ²¡æœ‰æŠ¥é”™ã€‚</p>
<p>ç”¨gdbè·Ÿè¸ªwineå‘ç°ï¼Œwineèƒ½å¤Ÿæ­£å¸¸è¿›å…¥åˆ°pdf2vec.exeçš„å…¥å£å¼€å§‹æ‰§è¡Œã€‚è™½ç„¶å¤§é¡µç¢ç‰‡çš„é—®é¢˜è¿˜æ²¡å®Œå…¨ä¿®å®Œï¼ˆç›®å‰ä¿®åˆ°äº†åˆ†æ”¯æŒ‡ä»¤çš„åœ°æ–¹ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•ä¿¡æ¯æ˜¾ç¤ºè¿™ä¸ªpdf2vec.exeè§¦åŠåˆ°äº†å…±äº«é¡µç¢ç‰‡é—®é¢˜ã€‚è¿™éå¸¸å¥‡æ€ªã€‚</p>
<div style="text-align:right; font-size:3em;">2020.09.15</div>
<p>å‡ºç°è¿‡çš„æŠ¥é”™ï¼š</p>
<p>ç”¨æˆ·ç¨‹åºç»“æŸå‰</p>
<pre><code>003c:err:service:process_send_command receiving command result timed out
003c:fixme:service:scmdatabase_autostart_services Auto-start service L&quot;winebus&quot; failed to start: 1053
003c:err:service:process_send_command receiving command result timed out
003c:fixme:service:scmdatabase_autostart_services Auto-start service L&quot;wineusb&quot; failed to start: 1053
</code></pre>
<pre><code>0080:err:ntoskrnl:ZwLoadDriver failed to create driver L&quot;\\Registry\\Machine\\System\\CurrentControlSet\\Services\\wineusb&quot;: c0000142
003c:fixme:service:scmdatabase_autostart_services Auto-start service L&quot;wineusb&quot; failed to start: 1114
</code></pre>
<p>ç”¨æˆ·ç¨‹åºç»“æŸå</p>
<pre><code>wineserver crashed, please enable coredumps (ulimit -c unlimited) and restart.
0070:err:ntdll:RtlpWaitForCriticalSection section 7EC44C78 &quot;service.c: service_cs&quot; wait timed out in thread 0070, blocked by 0080, retrying (60 sec)
...
</code></pre>
<pre><code>0088:err:seh:segv_handler Got unexpected trap -1
0088:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
0088:err:seh:segv_handler Got unexpected trap -1
0088:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
00a4:err:seh:segv_handler Got unexpected trap -1
00a4:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
00a4:err:seh:segv_handler Got unexpected trap -1
00a4:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
0090:err:seh:segv_handler Got unexpected trap -1
wine client error:90: 0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
wine client error:90: write: Bad file descriptor
write: Bad file descriptor
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7dedbe2e
Got unexpected trap -1
wine client error:90: write: Bad file descriptor
0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7dedbe2e
wine client error:90: write: Bad file descriptor
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:NtRaiseException 0090:err:seh:segv_handler Unhandled exception code c000001d flags 0 addr 0x7dedbe2e
0090:err:seh:NtRaiseException 0090:err:seh:segv_handler Unhandled exception code c000001d flags 0 addr 0x7dedbe2e
Got unexpected trap -1
wine client error:90: write: Bad file descriptor
0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7dedbe2e
wine client error:90: write: Bad file descriptor
0070:err:ntdll:RtlpWaitForCriticalSection section 7EC44C78 &quot;service.c: service_cs&quot; wait timed out in thread 0070, blocked by 0080, retrying (60 sec)
...
</code></pre>
<pre><code>wine client error:b8: write: Bad file descriptor
009c:err:seh:segv_handler Got unexpected trap -1
0068:err:seh:segv_handler Got unexpected trap -1
0068:err:seh:segv_handler Got unexpected trap -1
Got unexpected trap -1
009c:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
009c:err:seh:segv_handler Got unexpected trap -1
009c:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
0068:err:seh:NtRaiseException 0068:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
wine client error:84: partial wakeup read 0
</code></pre>
<pre><code>wine client error:b0: 0088:err:seh:segv_handler Got unexpected trap -1
0088:err:seh:segv_handler Got unexpected trap -1
Got unexpected trap -1
0088:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
0088:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
write: Bad file descriptor
00b0:err:seh:segv_handler Got unexpected trap -1
00b0:err:seh:NtRaiseException Exception frame is not in stack limits =&gt; unable to dispatch exception.
wine client error:b0: write: Bad file descriptor
00a4:err:seh:segv_handler Got unexpected trap -1
00a4:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
00a4:err:seh:segv_handler Got unexpected trap -1
00a4:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:segv_handler Got unexpected trap -1
0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7bc88207
wine client error:90: 0090:err:seh:NtRaiseException Unhandled exception code c000001d flags 0 addr 0x7ec350b6
wine client error:90: write: Bad file descriptor
write: Bad file descriptor
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
</code></pre>
<div style="text-align:right; font-size:3em;">2020.09.16</div>
<p>æŠŠwinedebugçš„é€šé“éƒ½æ‰“å¼€å</p>
<pre><code class="language-shell">WINEDEBUG=warn+all wine ...
</code></pre>
<p>å‘ç°æ˜¯æ— æ³•æ‰“å¼€pdf2vec.exeæ‰€ä»¥æ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚æŠŠpdf2vec.exeç§»åˆ°äº†Windowsçš„â€œæ–‡ä»¶ç³»ç»Ÿâ€é‡Œå°±æ²¡é—®é¢˜äº†<code>~/.wine/drive_c</code>ã€‚</p>
<div style="text-align:right; font-size:3em;">2020.09.25</div>
<p>ä»Šæ—¥å…±äº«é¡µç¢ç‰‡çš„é—®é¢˜åŸºæœ¬ä¿®å®Œï¼Œï¼ˆABORT: å¤šæ¬¡mmapåŒä¸€å¤§é¡µçš„ç¢ç‰‡ï¼Œéœ€è¦åˆå¹¶è¿™äº›ç¢ç‰‡ï¼‰</p>
<h2 id="æ€§èƒ½æµ‹è¯•"><a class="header" href="#æ€§èƒ½æµ‹è¯•">æ€§èƒ½æµ‹è¯•</a></h2>
<h3 id="coremark"><a class="header" href="#coremark">coremark</a></h3>
<div style="text-align:right; font-size:3em;">2020.10.09</div>
<h2 id="å°†ç°æœ‰å·¥ä½œrebaseåˆ°xqmçš„æ€è€ƒ"><a class="header" href="#å°†ç°æœ‰å·¥ä½œrebaseåˆ°xqmçš„æ€è€ƒ">å°†ç°æœ‰å·¥ä½œrebaseåˆ°xqmçš„æ€è€ƒ</a></h2>
<p>å¤§å‰ææ˜¯åŸç”Ÿqemu 5.0ä»¥åæ‰èƒ½è¿è¡Œwineï¼Œç„¶è€Œç°åœ¨çš„xqmè¿˜æ˜¯4.1ç‰ˆæœ¬çš„qemuã€‚æ‰€ä»¥xqméœ€è¦å°†å…¶å‡çº§åˆ°5.0ä»¥ä¸Šåæ‰æœ‰æœºä¼šå¼€å§‹rebaseç°æœ‰å…³äºwineçš„ä¿®å¤åˆ°xqmä¸Šå»ã€‚</p>
<h2 id="å°è¯•è§£å†³wineæ— æ³•æ˜¾ç¤ºæ±‰å­—çš„é—®é¢˜"><a class="header" href="#å°è¯•è§£å†³wineæ— æ³•æ˜¾ç¤ºæ±‰å­—çš„é—®é¢˜">å°è¯•è§£å†³wineæ— æ³•æ˜¾ç¤ºæ±‰å­—çš„é—®é¢˜</a></h2>
<p>å‚è€ƒ<a href="http://linux-wiki.cn/wiki/Wine%E7%9A%84%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E4%B8%8E%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE">Wineçš„ä¸­æ–‡æ˜¾ç¤ºä¸å­—ä½“è®¾ç½®</a>ï¼Œä½¿ç”¨å­—ä½“é“¾æ¥å³å¯ï¼Œ</p>
<p>å¯ä»¥é€šè¿‡</p>
<pre><code class="language-shell">sudo apt install fonts-wqy-microhei
</code></pre>
<p>å®‰è£…è¿™ä¸ª<code>wqy-microhei.ttc</code>å­—ä½“ï¼Œä¸­æ–‡/æ—¥æ–‡/éŸ©æ–‡æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p>æ‰§è¡Œ</p>
<pre><code class="language-shell">winetricks riched20 # winetricks dlls listå¯ä»¥æŸ¥çœ‹
</code></pre>
<p>å‘é€æ¡†ä¾¿èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p>è°ƒè¯•ç›¸å…³çš„è°ƒè¯•ä¿¡æ¯ï¼Œ</p>
<pre><code class="language-shell">env WINEDEBUG=+font wine &lt;program&gt;
</code></pre>

                    </main>
                    <script src="https://utteranc.es/client.js"
                        repo="xieby1/xieby1.github.io"
                        issue-term="pathname"
                        theme="github-light"
                        crossorigin="anonymous"
                        async>
                    </script>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>

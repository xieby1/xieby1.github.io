<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>xieby1&#x27;s Manual for isa, a new DSL(Domain Specific Language) - xieby1&#x27;s notes</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../..//fonts/lxgwwenkai-regular.css" />
        <link rel="stylesheet" href="../..//fonts/lxgwwenkaimono-regular.css" />
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../index.html">Welcome</a></li><li class="chapter-item "><a href="../../Essays.html">Essays</a></li><li class="chapter-item "><a href="../../abbreviations.html">abbreviations</a></li><li class="chapter-item affix "><li class="part-title">xieby1's notes</li><li class="chapter-item "><div>ABI</div></li><li class="chapter-item "><div>Algo</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Graph</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Algo/Graph/1998.distance.bunke.prl.775.html">1998.distance.bunke.prl.775.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2002.inexact_match.bengoetxea.doc_thesis.107.html">2002.inexact_match.bengoetxea.doc_thesis.107.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2014.attributed.zhang.cvpr.19.html">2014.attributed.zhang.cvpr.19.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2016.survey.yan.icmr.108.html">2016.survey.yan.icmr.108.md</a></li><li class="chapter-item "><a href="../../Algo/Graph/2021.igraphmatch.qiao..0.html">2021.igraphmatch.qiao..0.md</a></li></ol></li></ol></li><li class="chapter-item "><div>analysis</div></li><li class="chapter-item "><div>Arch</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Cache</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/Cache/2022.dsa_cache.sedaghati.isca.0.html">2022.dsa_cache.sedaghati.isca.0.md</a></li></ol></li><li class="chapter-item "><div>HT</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/HT/2005.cell.kahle.ibmjrd.1093.html">2005.cell.kahle.ibmjrd.1093.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2012.process_migration.devuyst.asplos.83.html">2012.process_migration.devuyst.asplos.83.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2014.isa_explore.venkat.isca.112.html">2014.isa_explore.venkat.isca.112.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2015.overview.mitra.jip.15.html">2015.overview.mitra.jip.15.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2018.process_migration.venkat.doc_thesis.5.html">2018.process_migration.venkat.doc_thesis.5.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2019.composite_isa.venkat.hpca.17.html">2019.composite_isa.venkat.hpca.17.md</a></li><li class="chapter-item "><a href="../../Arch/HT/2020.byoc_framework.balkind.asplos.3.html">2020.byoc_framework.balkind.asplos.3.md</a></li><li class="chapter-item "><a href="../../Arch/HT/xa64/index.html">xa64</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/HT/xa64/insts_design.html">Insts Design</a></li><li class="chapter-item "><a href="../../Arch/HT/xa64/manual.html">XA64 MANUAL</a></li></ol></li></ol></li><li class="chapter-item "><div>reconf</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Arch/reconf/1997.chimaera.hauck.fccm.461.html">1997.chimaera.hauck.fccm.461.md</a></li><li class="chapter-item "><a href="../../Arch/reconf/2008.reconf_acc.beck.date.97.html">2008.reconf_acc.beck.date.97.md</a></li></ol></li><li class="chapter-item "><div>VLIW</div></li></ol></li><li class="chapter-item "><div>Benchmarks</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Benchmarks/coremark.html">coremark.md</a></li><li class="chapter-item "><div>herdtools7</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Benchmarks/herdtools7/overview.html">内存模型测试——DIY（Herdtools）</a></li></ol></li><li class="chapter-item "><a href="../../Benchmarks/spec/index.html">spec</a></li><li class="chapter-item "><a href="../../Benchmarks/spec2000.html">spec2000.md</a></li></ol></li><li class="chapter-item "><div>BT</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>algo</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/2006.lib.杨浩.计算机研究与发展.0.html">2006.lib.杨浩.计算机研究与发展.0.md</a></li><li class="chapter-item "><div>bt_rules</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/bt_rules/2006.peephole_superopt.bansal.asplos.134.html">2006.peephole_superopt.bansal.asplos.134.md</a></li><li class="chapter-item "><a href="../../BT/algo/bt_rules/2018.learn.wwwang.asplos.11.html">2018.learn.wwwang.asplos.11.md</a></li></ol></li><li class="chapter-item "><div>indirect_jump</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/indirect_jump/2016.static_identify_jump_target.federico.cases.9.html">2016.static_identify_jump_target.federico.cases.9.md</a></li></ol></li><li class="chapter-item "><div>offload</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/offload/2010.distribit.guan.hpdc.5.html">2010.distribit.guan.hpdc.5.md</a></li></ol></li><li class="chapter-item "><div>reg</div></li><li class="chapter-item "><div>smc</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/smc/2015.detect.hawkins.cgo.24.html">2015.detect.hawkins.cgo.24.md</a></li></ol></li><li class="chapter-item "><div>trace</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/algo/trace/1994.opt_profiling_tracing.ball.toplas.580.html">1994.opt_profiling_tracing.ball.toplas.580.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2000.net.duesterwald.asplos.141.html">2000.net.duesterwald.asplos.141.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2005.edge_profile.白童心.计算机工程.2.html">2005.edge_profile.白童心.计算机工程.2.md</a></li><li class="chapter-item "><a href="../../BT/algo/trace/2005.lei_net.hiniker.micro.39.html">2005.lei_net.hiniker.micro.39.md</a></li></ol></li></ol></li><li class="chapter-item "><div>analysis</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/analysis/2014.simulators_harm.nowatki..19.html">2014.simulators_harm.nowatki..19.md</a></li><li class="chapter-item "><a href="../../BT/analysis/2020.perfdbt.wu.iccd.2.html">2020.perfdbt.wu.iccd.2.md</a></li></ol></li><li class="chapter-item "><div>application</div></li><li class="chapter-item "><div>Box86</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/Box86/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><div>dynamic</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/dynamic/2017.mambox64.dantras.pldi.18.html">2017.mambox64.dantras.pldi.18.md</a></li></ol></li><li class="chapter-item "><a href="../../BT/exagear.html">exagear.md</a></li><li class="chapter-item "><div>HQEMU</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HQEMU/codeReading-deprecated.html">codeReading-deprecated.md</a></li><li class="chapter-item "><a href="../../BT/HQEMU/codeReading.html">codeReading.md</a></li></ol></li><li class="chapter-item "><div>HW</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/2008.coprocessor.li.amasbt.3.html">2008.coprocessor.li.amasbt.3.md</a></li><li class="chapter-item "><a href="../../BT/HW/2009.godson3_x86_emu.hu.micro.84.html">2009.godson3_x86_emu.hu.micro.84.md</a></li><li class="chapter-item "><div>codeCache</div></li><li class="chapter-item "><div>reconf</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/reconf/2013.x86_mips_reconf.junior.jsa.4.html">2013.x86_mips_reconf.junior.jsa.4.md</a></li></ol></li><li class="chapter-item "><div>VLIW</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/VLIW/2015.denver.nvidia.micro.36.html">2015.denver.nvidia.micro.36.md</a></li><li class="chapter-item "><a href="../../BT/HW/VLIW/2019.hybrid_dbt.rokicki.cadics.2.html">2019.hybrid_dbt.rokicki.cadics.2.md</a></li><li class="chapter-item "><div>crusoe</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/HW/VLIW/crusoe/2000.crusoe.klaiber.transmeta.118.html">2000.crusoe.klaiber.transmeta.118.md</a></li></ol></li><li class="chapter-item "><div>daisy</div></li></ol></li></ol></li><li class="chapter-item "><div>kernel</div></li><li class="chapter-item "><a href="../../BT/libDBT/index.html">libDBT</a></li><li class="chapter-item "><div>lift</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>IR</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>LLBT</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/LLBT/LLBT调研.html">LLBT调研</a></li><li class="chapter-item "><a href="../../BT/lift/IR/LLBT/二进制翻译调研报告（LLBT相关）.html">二进制翻译调研报告（LLBT相关）.md</a></li></ol></li><li class="chapter-item "><div>mcsema</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/2019.mcsema_dyninst.korencik...html">2019.mcsema_dyninst.korencik...md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/2019.mcsema.researchLogs.html">2019.mcsema.researchLogs.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mcsema/remill.html">remill.md</a></li></ol></li><li class="chapter-item "><div>mctoll</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/2019.mctoll.yadavalli.lctes.5.html">2019.mctoll.yadavalli.lctes.5.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/codesReading.html">codesReading.md</a></li><li class="chapter-item "><a href="../../BT/lift/IR/mctoll/run.html">run.md</a></li></ol></li><li class="chapter-item "><a href="../../BT/lift/IR/overview.html">overview.md</a></li><li class="chapter-item "><div>REVNG</div></li></ol></li></ol></li><li class="chapter-item "><div>Mem</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/Mem/2008.thread_safe_by_tm.chung.hpca.51.html">2008.thread_safe_by_tm.chung.hpca.51.md</a></li><li class="chapter-item "><div>atomic</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/Mem/atomic/2016.atomic.rigo.taco.6.html">2016.atomic.rigo.taco.6.md</a></li></ol></li></ol></li><li class="chapter-item "><div>oldProj</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/oldProj/1993.mips2alphaaxp.sites.cacm.267.html">1993.mips2alphaaxp.sites.cacm.267.md</a></li><li class="chapter-item "><a href="../../BT/oldProj/1998.fx32.chernoff.micro.217.html">1998.fx32.chernoff.micro.217.md</a></li><li class="chapter-item "><div>dbt4AndStatic</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/DBT4代码阅读笔记.html">DBT4代码阅读笔记</a></li><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/dbt-static.html">dbt-static.md</a></li><li class="chapter-item "><a href="../../BT/oldProj/dbt4AndStatic/去除orc工作量和难度.html">ORC的CGIR</a></li></ol></li></ol></li><li class="chapter-item "><div>others</div></li><li class="chapter-item "><div>overview</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/overview/2001.bt_opt_challenges.altman.pieee.38.html">2001.bt_opt_challenges.altman.pieee.38.md</a></li><li class="chapter-item "><a href="../../BT/overview/2004.bibliography_of_simulators.html">2004.bibliography_of_simulators.md</a></li></ol></li><li class="chapter-item "><div>QEMU</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/QEMU/16k.html">16k.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/2005.qemu.bellard.usenix.2217.html">2005.qemu.bellard.usenix.2217.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/2017.qemu_multi_cores.cota.cgo.8.html">2017.qemu_multi_cores.cota.cgo.8.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/LA-backend.html">LA-backend.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user-32.html">linux-user-32.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user.html">linux-user.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/linux-user-memory_region.html">linux-user-memory_region.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/logs.html">logs.md</a></li><li class="chapter-item "><div>lx</div></li><li class="chapter-item "><a href="../../BT/QEMU/mt-tcg.html">mt-tcg.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/qemu-wine.html">qemu-wine.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../BT/QEMU/signal.html">signal.md</a></li><li class="chapter-item "><div>target</div></li><li class="chapter-item "><a href="../../BT/QEMU/test.html">test.md</a></li></ol></li><li class="chapter-item "><div>rewrite</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/rewrite/2018.superset_disassembly.bauman.ndss.40.html">2018.superset_disassembly.bauman.ndss.40.md</a></li><li class="chapter-item "><div>instru</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/rewrite/instru/2009.mt.hazelwood.ismm.28.html">2009.mt.hazelwood.ismm.28.md</a></li><li class="chapter-item "><a href="../../BT/rewrite/instru/mem_count.html">mem_count.md</a></li></ol></li></ol></li><li class="chapter-item "><div>security</div></li><li class="chapter-item "><div>static</div></li><li class="chapter-item "><div>sys</div></li><li class="chapter-item "><div>Tarmac</div></li><li class="chapter-item "><div>test</div></li><li class="chapter-item "><div>x86-qemu-mips</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/x86-qemu-mips/check_manual.html">x86-qemu-mips check手册</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/check.html">check.md</a></li><li class="chapter-item "><div>debugs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/x86-qemu-mips/debugs/OPEN.unknown-loop-in-bios.html">OPEN.unknown-loop-in-bios.md</a></li></ol></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/linux-user.html">x86-qemu-mips做出的修改</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/mips-llvm.html">mips-llvm.md</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/mt-tcg.html">mt-tcg.md</a></li><li class="chapter-item "><a href="../../BT/x86-qemu-mips/tr_misc修改记录.html">tr_misc修改记录.md</a></li></ol></li><li class="chapter-item "><div>X86toMips</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../BT/X86toMips/dbt测试结果.html">dbt测试结果.md</a></li><li class="chapter-item "><a href="../../BT/X86toMips/Pseudo-README.html">Pseudo-README.md</a></li><li class="chapter-item "><a href="../../BT/X86toMips/X86toMips调研.html">武成岗</a></li><li class="chapter-item "><a href="../../BT/X86toMips/X86toMips调研-续.html">X86toMips调研-续.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Build</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Autotools</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Autotools/2012.autotools_criticism.kamp..html">2012.autotools_criticism.kamp..md</a></li><li class="chapter-item "><a href="../../Build/Autotools/autotools.html">autotools.md</a></li></ol></li><li class="chapter-item "><div>CMake</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/CMake/Notes.html">CMkake Notes</a></li></ol></li><li class="chapter-item "><div>Compiler</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/1992.hyperblock.mahlke.micro.html">1992.hyperblock.mahlke.micro.md</a></li><li class="chapter-item "><a href="../../Build/Compiler/fill_byte_for_align.html">fill_byte_for_align.md</a></li><li class="chapter-item "><div>llvm</div></li><li class="chapter-item "><div>mingw</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/mingw/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>ORC</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Compiler/ORC/2004.ORC-LCPC04-Tutorial.html">2004.ORC-LCPC04-Tutorial.md</a></li><li class="chapter-item "><a href="../../Build/Compiler/ORC/2004.overview_orc.wuchengyong.iwlcpc.html">2004.overview_orc.wuchengyong.iwlcpc.md</a></li></ol></li><li class="chapter-item "><div>trans</div></li></ol></li><li class="chapter-item "><div>Disassemble</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Disassemble/2002.disassembly.bschwarz.pieee.html">2002.disassembly.bschwarz.pieee.md</a></li></ol></li><li class="chapter-item "><a href="../../Build/ELF/index.html">ELF</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/ELF/ELF调研.html">前沿</a></li><li class="chapter-item "><a href="../../Build/ELF/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>Linker_Loader</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Build/Linker_Loader/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Build/mingw.html">Windows Development Environment on Linux</a></li></ol></li><li class="chapter-item "><a href="../../cheatsheet.html">cheatsheet.md</a></li><li class="chapter-item "><div>CLI</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CLI/term_pty_sh.html">term_pty_sh.md</a></li></ol></li><li class="chapter-item "><div>CompatLayer</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/2006.linuxulator.divacky.freebsd..html">2006.linuxulator.divacky.freebsd..md</a></li><li class="chapter-item "><a href="../../CompatLayer/Alky.html">Alky.md</a></li><li class="chapter-item "><div>UML</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/UML/user_mode_linux.html">user_mode_linux.md</a></li></ol></li><li class="chapter-item "><div>WINE</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../CompatLayer/WINE/2020_6_25.emu_win_syscall.corbet.lwn.html">2020_6_25.emu_win_syscall.corbet.lwn.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Design_of_WINE.html">wine中的各类设计</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/optimizable.html">optimizable.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/others.html">others.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-wine-logs.html">qemu-wine-logs.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-wine.html">qemu-wine.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-winetest_debug_logs.html">qemu-winetest_debug_logs.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/qemu-wine环境搭建.html">qemu-wine环境搭建.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/References.html">Wine相关资料</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Winegcc调研.html">最终目标</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/Winelib调研报告.html">Winelib调研报告.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/WINE设备驱动调研.html">背景</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/WINE调研.html">Wine调研</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/二进制翻译调研报告_FX32_Wine.html">二进制翻译调研报告_FX32_Wine.md</a></li><li class="chapter-item "><a href="../../CompatLayer/WINE/二进制翻译调研报告_Wine.html">二进制翻译调研报告_Wine.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Connect</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/index.html">Bluetooth</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>bluez</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/bluez/profile_input.html">总体架构</a></li></ol></li><li class="chapter-item "><div>btkbdd</div></li><li class="chapter-item "><div>dbus</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/dbus/Overview.html">Overview.md</a></li></ol></li><li class="chapter-item "><div>Essays</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>2005.bluez_intro.albert</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/Essays/2005.bluez_intro.albert/An_Introduction_to_Bluetooth_Programming.html">An Introduction to Bluetooth Programming</a></li></ol></li><li class="chapter-item "><a href="../../Connect/Bluetooth/Essays/阅读记录.html">HID_v1.1.1</a></li></ol></li><li class="chapter-item "><div>hidclient</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Bluetooth/hidclient/logs.html">logs.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Network</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>bittorrent</div></li><li class="chapter-item "><div>nginx</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Connect/Network/nginx/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><a href="../../Connect/Network/p2p.html">p2p.md</a></li><li class="chapter-item "><a href="../../Connect/Network/streaming_server.html">streaming_server.md</a></li></ol></li><li class="chapter-item "><div>NFC</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Essays</div></li></ol></li></ol></li><li class="chapter-item "><div>dataViz</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../dataViz/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>Distro</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Distro/JingOS.html">JingOS.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/index.html">Nix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Distro/Nix/32bit.html">打包/编译32位程序</a></li><li class="chapter-item "><a href="../../Distro/Nix/android.html">在NixOS上使用Android程序</a></li><li class="chapter-item "><a href="../../Distro/Nix/backup_binary_cache.html">备份binary cache</a></li><li class="chapter-item "><a href="../../Distro/Nix/cross.html">Nix交叉编译和跨平台程序</a></li><li class="chapter-item "><a href="../../Distro/Nix/deb_feishu.html">安装deb包，以飞书为例</a></li><li class="chapter-item "><a href="../../Distro/Nix/gnome.html">Gnome in NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/nixpkgs.html">nixpkgs.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/node.html">Nodejs packages (npm) in NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/productivity.html">productivity.md</a></li><li class="chapter-item "><a href="../../Distro/Nix/python.html">Python in Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/README-en.html">Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/static_qemu.html">静态链接，以qemu为例</a></li><li class="chapter-item "><a href="../../Distro/Nix/tailscale.html">Tailscale/Headscale</a></li><li class="chapter-item "><a href="../../Distro/Nix/vim.html">Vim in Nix/NixOS</a></li><li class="chapter-item "><a href="../../Distro/Nix/wayland.html">Currently, Not Wayland, But X11</a></li><li class="chapter-item "><a href="../../Distro/Nix/weird.html">Weird Things in Nix/NixOS</a></li></ol></li></ol></li><li class="chapter-item expanded "><div>Emulator</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Emulator_Design</div></li><li class="chapter-item expanded "><a href="../../Emulator/gem5/index.html">gem5</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Emulator/gem5/cache.html">Cache in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/clock.html">Clock in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/commit.html">Commit Stage of Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/debug.html">Debug Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/decode.html">decoding in gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/fetch.html">Fetch in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/files.html">gem5 files</a></li><li class="chapter-item "><a href="../../Emulator/gem5/flags.html">Flags in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/iew.html">Issue, Execute and Writeback in Gem5</a></li><li class="chapter-item expanded "><a href="../../Emulator/gem5/isa.html" class="active">xieby1's Manual for isa, a new DSL(Domain Specific Language)</a></li><li class="chapter-item "><a href="../../Emulator/gem5/logs.html">logs.md</a></li><li class="chapter-item "><a href="../../Emulator/gem5/mem.html">Mem in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/microop.html">microop in gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/mmu.html">X86MMU (X86TLB) in gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/o3cpu.html">O3 CPU in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/overview.html">overview.md</a></li><li class="chapter-item "><a href="../../Emulator/gem5/ply.html">PLY(Python Lex Yacc) in gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/port.html">Port Abstraction in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/rename.html">rename.md</a></li><li class="chapter-item "><a href="../../Emulator/gem5/scons.html">Scons</a></li><li class="chapter-item "><a href="../../Emulator/gem5/simplecpu.html">Simple CPU in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/specialize.html">Specialize in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/syscall.html">Syscall in Gem5 SE</a></li><li class="chapter-item "><a href="../../Emulator/gem5/troubleShoot.html">Troubles in Gem5</a></li><li class="chapter-item "><a href="../../Emulator/gem5/ucache_adapter.html">Micro Cache Adapter in Gem5</a></li></ol></li><li class="chapter-item "><a href="../../Emulator/spike.html">spike.md</a></li></ol></li><li class="chapter-item "><div>EPaper</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../EPaper/eink.html">eink.md</a></li><li class="chapter-item "><a href="../../EPaper/laptop.html">laptop.md</a></li></ol></li><li class="chapter-item "><div>fonts</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>files</div></li></ol></li><li class="chapter-item "><div>hackthon</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../hackthon/Untitled.html">Untitled.md</a></li></ol></li><li class="chapter-item "><div>Input</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Input/logs.html">logs.md</a></li></ol></li><li class="chapter-item "><div>ISA</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/2013.power_of_risc_cisc.blem.hpca.144.html">2013.power_of_risc_cisc.blem.hpca.144.md</a></li><li class="chapter-item "><div>arm</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/arm/aarch64.html">aarch64.md</a></li></ol></li><li class="chapter-item "><div>enhance</div></li><li class="chapter-item "><div>Fuse</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Fuse/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>mips</div></li><li class="chapter-item "><div>mips_lx</div></li><li class="chapter-item "><div>riscv</div></li><li class="chapter-item "><a href="../../ISA/Semantics/index.html">Semantics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Semantics/2013.locate.lakhotia.pprew.75.html">2013.locate.lakhotia.pprew.75.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2014.lem.mulligan.icfp.79.html">2014.lem.mulligan.icfp.79.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2015.sail.gray.micro.31.html">2015.sail.gray.micro.31.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2016.learn.heule.pldi.56.html">2016.learn.heule.pldi.56.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2018.sail.armstrong..3.html">2018.sail.armstrong..3.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2019.x64_validation.dasgupta.sigplan.24.html">2019.x64_validation.dasgupta.sigplan.24.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/2021.sail.armstrong.manual.html">2021.sail.armstrong.manual.md</a></li><li class="chapter-item "><a href="../../ISA/Semantics/asmjit.html">AsmJit</a></li><li class="chapter-item "><div>k</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Semantics/k/logs.html">logs.md</a></li></ol></li></ol></li><li class="chapter-item "><div>ultrasparc</div></li><li class="chapter-item "><div>Uop</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ISA/Uop/1990.nec_intel.elkins...html">1990.nec_intel.elkins...md</a></li><li class="chapter-item "><a href="../../ISA/Uop/1996.palcode..manual..html">1996.palcode..manual..md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2003.ucache.solomon.tvlsi.13.html">2003.ucache.solomon.tvlsi.13.md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2019.reverse_engineer.koppe.usenix_security.16.html">2019.reverse_engineer.koppe.usenix_security.16.md</a></li><li class="chapter-item "><a href="../../ISA/Uop/2020.improve_ucache.kotra.micro.1.html">2020.improve_ucache.kotra.micro.1.md</a></li></ol></li><li class="chapter-item "><div>x86</div></li></ol></li><li class="chapter-item "><div>JIT</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../JIT/2008.llvm_sim.brandner..29.html">2008.llvm_sim.brandner..29.md</a></li><li class="chapter-item "><a href="../../JIT/2011.llvm_sim.helmstetter.imecs.6.html">2011.llvm_sim.helmstetter.imecs.6.md</a></li><li class="chapter-item "><div>dynarmic</div></li><li class="chapter-item "><div>opt</div></li></ol></li><li class="chapter-item "><a href="../../Kernel/index.html">Kernel</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/2020_9_9.prepare_new_feat.edge.lwn-lpc.html">2020_9_9.prepare_new_feat.edge.lwn-lpc.md</a></li><li class="chapter-item "><div>Driver</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Driver/2019.linux_win_printer.金融通.软件所硕士.html">2019.linux_win_printer.金融通.软件所硕士.md</a></li></ol></li><li class="chapter-item "><div>exo</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/exo/1995.intro.engler.sosp.1259.html">1995.intro.engler.sosp.1259.md</a></li></ol></li><li class="chapter-item "><div>Linux</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/2002.rcu.mckenney..216.html">2002.rcu.mckenney..216.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2016.sched_bug.lozi.eurosys.120.html">2016.sched_bug.lozi.eurosys.120.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2018.concurrency.alglave.asplos.31.html">2018.concurrency.alglave.asplos.31.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/2020.rcu.mckenney...html">2020.rcu.mckenney...md</a></li><li class="chapter-item "><div>Android</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/Android/anbox.html">anbox.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/to_mainline.html">to_mainline.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/Android/Waydroid.html">Waydroid.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Linux/cache_alias.html">🚧cache别名、页着色</a></li><li class="chapter-item "><a href="../../Kernel/Linux/cache_alias_page_color.html">cache_alias_page_color.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/docsReading.html">docsReading.md</a></li><li class="chapter-item "><div>drivers</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Linux/drivers/ioctl.html">ioctl.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/drivers/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Linux/idle.html">idle.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/lx.html">lx.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/memory_mapping.html">memory_mapping.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/module.logs.html">module.logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/mtlb.logs.html">mtlb.logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/page_fault.html">do_page_fault源码分析</a></li><li class="chapter-item "><a href="../../Kernel/Linux/page_size.html">page_size.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/QnA-alpine.html">QnA-alpine.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/startup.html">startup.md</a></li><li class="chapter-item "><a href="../../Kernel/Linux/syscalls.html">syscalls.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/memory.html">memory.md</a></li><li class="chapter-item "><div>micro</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/micro/1995.u_kernel.lietdke.sosp.308.html">1995.u_kernel.lietdke.sosp.308.md</a></li><li class="chapter-item "><a href="../../Kernel/micro/2013.l3_sel4.elphinstone.sosp.126.html">2013.l3_sel4.elphinstone.sosp.126.md</a></li></ol></li><li class="chapter-item "><div>multi</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/multi/2009.intro.baumann.sosp.856.html">2009.intro.baumann.sosp.856.md</a></li></ol></li><li class="chapter-item "><div>syscall</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/syscall/2020_9_8.extensible_syscall.corbet.lwn-lpc.html">2020_9_8.extensible_syscall.corbet.lwn-lpc.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/transkernel.html">transkernel.md</a></li><li class="chapter-item "><div>unikernel</div></li><li class="chapter-item "><div>WinCmptbl</div></li><li class="chapter-item "><div>Windows</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Windows/compilation.html">compilation.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/index.html">driver</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/Windows/driver/ddiwrapper.html">ddiwrapper.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/logs-1.html">logs-1.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/logs.html">logs.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/ndis.html">ndis.md</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>err</div></li></ol></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/printer.html">驱动安装包构成</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/driver/types.html">types.md</a></li></ol></li><li class="chapter-item "><a href="../../Kernel/Windows/nameConventions.html">Windows命名风格</a></li><li class="chapter-item "><a href="../../Kernel/Windows/QnA.html">QnA.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/ReactOS/index.html">ReactOS</a></li><li class="chapter-item "><a href="../../Kernel/Windows/service.html">service.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/subsystem.html">subsystem.md</a></li><li class="chapter-item "><a href="../../Kernel/Windows/syscall.html">syscall.md</a></li></ol></li><li class="chapter-item "><div>XNU</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Darling</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kernel/XNU/Darling/overview.html">overview.md</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><div>Lang</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Asm</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Asm/asm.html">asm.md</a></li><li class="chapter-item "><div>riscv</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Asm/riscv/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../Lang/awk.html">AWK</a></li><li class="chapter-item "><a href="../../Lang/bc.html">BC</a></li><li class="chapter-item "><div>C.f</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/C.f/macro.html">macro.md</a></li></ol></li><li class="chapter-item "><div>Dot</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/Dot/overview.html">overview.md</a></li><li class="chapter-item "><a href="../../Lang/Dot/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>IR</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/IR/1999.JVM_Specification.html">1999.JVM_Specification.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2000.llvm.lattner.master_thesis.241.html">2000.llvm.lattner.master_thesis.241.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2004.llvm.lattner.cgo.4340.html">2004.llvm.lattner.cgo.4340.md</a></li><li class="chapter-item "><a href="../../Lang/IR/2013.importance.chow...html">2013.importance.chow...md</a></li><li class="chapter-item "><div>Common2</div></li><li class="chapter-item "><a href="../../Lang/IR/LLVM-IR.html">LLVM-IR.md</a></li><li class="chapter-item "><a href="../../Lang/IR/MapleIRDesign.html">Introduction </a></li></ol></li><li class="chapter-item "><div>JS</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/JS/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>Latex</div></li><li class="chapter-item "><div>Lisp</div></li><li class="chapter-item "><div>Py</div></li><li class="chapter-item "><div>SMT-LIB</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/SMT-LIB/2012.smt_lib_v2.cok..47.html">2012.smt_lib_v2.cok..47.md</a></li></ol></li><li class="chapter-item "><div>WebAsm</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lang/WebAsm/2017.intro.haas.pldi.194.html">2017.intro.haas.pldi.194.md</a></li><li class="chapter-item "><a href="../../Lang/WebAsm/linux_desktop.html">Web Assembly and Linux GUI (GUI Shell)</a></li><li class="chapter-item "><a href="../../Lang/WebAsm/overview.html">overview.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Lib</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Glibc</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/Glibc/glibc.html">glibc.md</a></li><li class="chapter-item "><a href="../../Lib/Glibc/mmap.html">mmap特性</a></li><li class="chapter-item "><a href="../../Lib/Glibc/pthread.html">pthread.md</a></li><li class="chapter-item "><a href="../../Lib/Glibc/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>igraph</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/igraph/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>Libc</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Lib/Libc/Musl/index.html">Musl</a></li></ol></li></ol></li><li class="chapter-item "><div>Mem</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Mem/cat.html">cat.md</a></li><li class="chapter-item "><div>model</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Mem/model/2017.memalloy.wickerson.popl.77.html">2017.memalloy.wickerson.popl.77.md</a></li></ol></li><li class="chapter-item "><a href="../../Mem/order.html">C++11访存顺序</a></li><li class="chapter-item "><a href="../../Mem/overview.html">overview.md</a></li><li class="chapter-item "><a href="../../Mem/test.html">test.md</a></li></ol></li><li class="chapter-item "><div>Opinions</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Opinions/notes.html">notes.md</a></li><li class="chapter-item "><a href="../../Opinions/openEcoSys.html">openEcoSys.md</a></li></ol></li><li class="chapter-item "><div>other_read_list</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../other_read_list/cambridge.html">Cambrige Advanced Topics in Computer Architecture Reading List</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/index.html">stanford</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../other_read_list/stanford/1999.codesigned_vm.smith.iwia.html">1999.codesigned_vm.smith.iwia.md</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/2001.vm_intro.smith.html">2001.vm_intro.smith.md</a></li><li class="chapter-item "><a href="../../other_read_list/stanford/2002.vector_vs_ss.kozyrakis.micro.html">2002.vector_vs_ss.kozyrakis.micro.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Perf</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Perf/flamegraph.html">flamegraph.md</a></li><li class="chapter-item "><a href="../../Perf/tools.html">tools.md</a></li></ol></li><li class="chapter-item "><div>PoSh</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../PoSh/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><div>Pwr</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pwr/2009.mcpat.li.micro.2319.html">2009.mcpat.li.micro.2319.md</a></li></ol></li><li class="chapter-item "><a href="../../QnA-Daliy.html">QnA-Daliy.md</a></li><li class="chapter-item "><div>Repos</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Repos/llvm-tutor.html">llvm-tutor.md</a></li></ol></li><li class="chapter-item "><div>revealjs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../revealjs/plugins.html">TOC</a></li></ol></li><li class="chapter-item "><div>Sandbox</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Sandbox/chroot.html">chroot.md</a></li><li class="chapter-item "><div>Docker</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Sandbox/Docker/Overview.html">Overview.md</a></li><li class="chapter-item "><a href="../../Sandbox/Docker/QnA.html">QnA.md</a></li></ol></li><li class="chapter-item "><a href="../../Sandbox/proot.html">proot.md</a></li></ol></li><li class="chapter-item "><a href="../../scripts/index.html">scripts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>bash</div></li><li class="chapter-item "><div>nix</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>shell_gem5</div></li></ol></li></ol></li><li class="chapter-item "><div>security</div></li><li class="chapter-item "><div>Sim</div></li><li class="chapter-item "><div>SoC</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SoC/2009.static_timing_analysis.chadha.html">2009.static_timing_analysis.chadha.md</a></li><li class="chapter-item "><a href="../../SoC/2009.static_timing_analysis.chadha.note.html">2009.static_timing_analysis.chadha.note.md</a></li><li class="chapter-item "><a href="../../SoC/2020.soc_design_guide.chakravarthi.html">2020.soc_design_guide.chakravarthi.md</a></li><li class="chapter-item "><div>FPGA</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SoC/FPGA/iverilog.html">iverilog.md</a></li></ol></li><li class="chapter-item "><a href="../../SoC/OpenTimer.html">OpenTimer</a></li><li class="chapter-item "><a href="../../SoC/STA.html">Static Timing Analysis (STA)</a></li><li class="chapter-item "><a href="../../SoC/terminologies.html">Terminologies</a></li><li class="chapter-item "><div>XLS</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SoC/XLS/dslx.html">DSLX for Google XL</a></li><li class="chapter-item "><a href="../../SoC/XLS/xlscc.html">xlscc.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Softwares</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Softwares/ocrmypdf.html">ocrmypdf.md</a></li><li class="chapter-item "><a href="../../Softwares/pandoc.html">pandoc.md</a></li><li class="chapter-item "><a href="../../Softwares/tree_timeline_note.html">tree_timeline_note.md</a></li><li class="chapter-item "><div>Vim</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Softwares/Vim/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../SPIN.html">SPIN.md</a></li><li class="chapter-item "><div>SQL</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../SQL/overview.html">overview.md</a></li></ol></li><li class="chapter-item "><div>SymExec</div></li><li class="chapter-item "><div>Temp</div></li><li class="chapter-item "><div>uArch</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>TLB</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../uArch/TLB/QnA.html">QnA.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Virt</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/1988.386.smith.programmers_journal..html">1988.386.smith.programmers_journal..md</a></li><li class="chapter-item "><a href="../../Virt/2002.esx.waldspurger.opsr.1402.html">2002.esx.waldspurger.opsr.1402.md</a></li><li class="chapter-item "><a href="../../Virt/2003.xen.barham.opsr.6475.html">2003.xen.barham.opsr.6475.md</a></li><li class="chapter-item "><a href="../../Virt/2003.xen.barham.opsr.6475.sync-conflict-20211220-085833-2SHHM4X.html">2003.xen.barham.opsr.6475.sync-conflict-20211220-085833-2SHHM4X.md</a></li><li class="chapter-item "><a href="../../Virt/2006.cmp_soft_hard_x86.adams.asplos.700.html">2006.cmp_soft_hard_x86.adams.asplos.700.md</a></li><li class="chapter-item "><a href="../../Virt/2012.dune.belay.osdi.215.html">2012.dune.belay.osdi.215.md</a></li><li class="chapter-item "><div>addr_trans</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/addr_trans/2018.1_qemu_dune_2_lkm.faravelon.doc_thesis.1.html">2018.1_qemu_dune_2_lkm.faravelon.doc_thesis.1.md</a></li></ol></li><li class="chapter-item "><div>BT</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/BT/2016.cross_arch_captive.spink.taco.3.html">2016.cross_arch_captive.spink.taco.3.md</a></li><li class="chapter-item "><a href="../../Virt/BT/2019.cross_arch_captive.spink.usenix.1.html">2019.cross_arch_captive.spink.usenix.1.md</a></li></ol></li><li class="chapter-item "><a href="../../Virt/overview.html">overview.md</a></li><li class="chapter-item "><div>virtualBox</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Virt/virtualBox/install.html">install.md</a></li></ol></li></ol></li><li class="chapter-item "><div>Write</div></li><li class="chapter-item "><a href="../../X11/index.html">X11</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../X11/windowManage.html">windowManage.md</a></li></ol></li><li class="chapter-item "><div>行业报告</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>LF</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../行业报告/LF/2020-Linux-Foundation-Annual-Report_120520.html">2020-Linux-Foundation-Annual-Report_120520.md</a></li><li class="chapter-item "><a href="../../行业报告/LF/FINOS-business-value-of-open-source.html">FINOS-business-value-of-open-source.md</a></li></ol></li><li class="chapter-item "><div>Nix</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../行业报告/Nix/2021.summur.html">2021.summur.md</a></li></ol></li><li class="chapter-item "><div>企业年报</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>apple</div></li><li class="chapter-item "><div>华为</div></li><li class="chapter-item "><div>海信</div></li><li class="chapter-item "><div>联想</div></li></ol></li><li class="chapter-item "><div>信通院</div></li><li class="chapter-item "><div>国家</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../行业报告/国家/2006_2022.国家中长期科学和技术发展规划纲要.html">国家中长期科学和技术发展规划纲要（2006━2020年）</a></li></ol></li><li class="chapter-item "><div>网信自主创新</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../行业报告/网信自主创新/2020.html">2020.md</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="shuimitao">水蜜桃</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">xieby1&#x27;s notes</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/xieby1/xieby1.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="xieby1s-manual-for-isa-a-new-dsldomain-specific-language"><a class="header" href="#xieby1s-manual-for-isa-a-new-dsldomain-specific-language">xieby1's Manual for isa, a new DSL(Domain Specific Language)</a></h1>
<div style="text-align:right; font-size:3em;">2022.06.21</div>
<p>TLDR: isa_parser.py</p>
<ul>
<li>defines a DSL(Domain Specific Language) by Lex&amp;Yacc, called isa,</li>
<li>generates decoder code (cpp) from isa language, called isa parser.</li>
</ul>
<p>Resources:</p>
<ul>
<li>https://www.gem5.org/documentation/general_docs/architecture_support/isa_parser/</li>
<li><code>gem5/src/arch/isa_parser/isa_parser.py</code></li>
</ul>
<hr />
<div style="text-align:right; font-size:3em;">2022.07.16</div>
<!-- vim-markdown-toc GFM -->
<ul>
<li><a href="#declaration-section">declaration section</a>
<ul>
<li><a href="#format-definitions">Format definitions</a>
<ul>
<li><a href="#syntax">Syntax</a></li>
<li><a href="#source">Source</a></li>
</ul>
</li>
<li><a href="#template">Template</a>
<ul>
<li><a href="#definition">definition</a></li>
<li><a href="#subtitution">Subtitution</a></li>
</ul>
</li>
<li><a href="#output-blocks">Output blocks</a></li>
<li><a href="#let-blocks">Let blocks</a></li>
<li><a href="#bitfield-definitions-def-signed-bitfield-name-">Bitfield definitions: <code>def [signed] bitfield NAME ...</code></a></li>
<li><a href="#operand-definitions">Operand definitions</a>
<ul>
<li><a href="#syntax-1">Syntax</a></li>
<li><a href="#source-1">Source</a></li>
</ul>
</li>
<li><a href="#operand-type-definitions">Operand type definitions</a>
<ul>
<li><a href="#syntax-2">Syntax</a></li>
<li><a href="#source-2">Source</a></li>
</ul>
</li>
<li><a href="#namespace-declaration-namespace-name">Namespace declaration: <code>namespace NAME;</code></a></li>
</ul>
</li>
<li><a href="#decode-section">decode section</a>
<ul>
<li><a href="#specifying-instruction-formats">specifying instruction formats</a>
<ul>
<li><a href="#syntax-3">Syntax</a></li>
</ul>
</li>
<li><a href="#docode-block-defaults">docode block defaults</a></li>
<li><a href="#preprocessor-directive-handling">preprocessor directive handling</a></li>
<li><a href="#todo">TODO:</a></li>
</ul>
</li>
<li><a href="#appendix">Appendix</a>
<ul>
<li><a href="#todo-1">TODO:</a></li>
<li><a href="#generated-files">generated files</a></li>
</ul>
</li>
<li><a href="#generated-files-1">generated files</a></li>
</ul>
<!-- vim-markdown-toc -->
<h2 id="declaration-section"><a class="header" href="#declaration-section">declaration section</a></h2>
<h3 id="format-definitions"><a class="header" href="#format-definitions">Format definitions</a></h3>
<h4 id="syntax"><a class="header" href="#syntax">Syntax</a></h4>
<pre><code>def_format : DEF FORMAT ID LPAREN param_list RPAREN CODELIT SEMI
</code></pre>
<ul>
<li>ID: python string</li>
<li>param_list: python argument, therefore use asterisk(*) to represent variadic arguments</li>
<li>CODELIT: python code
<ul>
<li>Variables <code>name</code> and <code>Name</code> are available, which are inst name, see <code>inst :</code></li>
</ul>
</li>
</ul>
<h4 id="source"><a class="header" href="#source">Source</a></h4>
<pre><code class="language-python">def p_def_format(self, t):
  (id, params, code) = (t[3], t[5], t[7])
  self.defFormat(id, params, code, t.lexer.lineno)
</code></pre>
<pre><code class="language-python">class Format(object):
  def __init__(self, id, params, code):
    ...
    self.user_code = compile(fixPythonIndentation(code), label, 'exec')
    ...
    f = '''def defInst(_code, _context, %s):
            my_locals = vars().copy()
            exec(_code, _context, my_locals)
            return my_locals\n''' % param_list
    c = compile(f, label + ' wrapper', 'exec')
    exec(c, globals())
    self.func = defInst
  ...
</code></pre>
<p><code>Format.__init__</code> define a func <code>defInst</code> on the fly.
<code>defInst</code> will be called by <code>defineInst</code> in decode section.
Therefore CODELIT will be executed by <code>defineInst</code>.
<code>defineInst</code> add <code>name</code>&amp;<code>Name</code> of defined Inst to exec context.</p>
<pre><code class="language-python">class Format(object):
  ...
  def defineInst(self, parser, name, args, lineno):
    ...
    context.update({ 'name' : name, 'Name' : Name })
    ...
    vars = self.func(self.user_code, context, *args[0], **args[1])
    ...
</code></pre>
<h3 id="template"><a class="header" href="#template">Template</a></h3>
<h4 id="definition"><a class="header" href="#definition">definition</a></h4>
<p>Suffix doest not influence template behaviors.
It is just naming convention.
Gem5 use following 4 prefixes,</p>
<ul>
<li>
<p><code>Declare</code>: declaration (header output) templates</p>
</li>
<li>
<p><code>Decode</code>: decode-block templates</p>
</li>
<li>
<p><code>Constructor</code>: decoder output templates</p>
</li>
<li>
<p><code>Execute</code>: exec output templates</p>
</li>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">def p_def_template(self, t):
    'def_template : DEF TEMPLATE ID CODELIT SEMI'
    if t[3] in self.templateMap:
        print(&quot;warning: template %s already defined&quot; % t[3])
    self.templateMap[t[3]] = Template(self, t[4])
</code></pre>
<p>Every template definition is added to <code>templateMap</code>.</p>
</li>
</ul>
<h4 id="subtitution"><a class="header" href="#subtitution">Subtitution</a></h4>
<ul>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">class Template(object):
  ...
  def subst(self, d):
    ...
    myDict = self.parser.templateMap.copy()
    ...
    if isinstance(d, InstObjParams):
      ...
      myDict.update(d.__dict__)
      ...
      myDict['op_decl'] = operands.concatAttrStrings('op_decl')
      ...
      myDict['op_rd'] = operands.concatAttrStrings('op_rd')
      ...
      for op_desc in reordered:
        ...
        op_wb_str = op_desc.op_wb + op_wb_str
      myDict['op_wb'] = op_wb_str
    ...
    return template % myDict
</code></pre>
<p><code>code</code> will be searched for operands,
for more details see Operand definitions.</p>
<p>The <code>op_decl</code>, <code>op_rd</code> and <code>op_wb</code> is generated by operands analysis.
And the user-defined replacement is allowed.</p>
</li>
</ul>
<h3 id="output-blocks"><a class="header" href="#output-blocks">Output blocks</a></h3>
<h3 id="let-blocks"><a class="header" href="#let-blocks">Let blocks</a></h3>
<h3 id="bitfield-definitions-def-signed-bitfield-name-"><a class="header" href="#bitfield-definitions-def-signed-bitfield-name-">Bitfield definitions: <code>def [signed] bitfield NAME ...</code></a></h3>
<h3 id="operand-definitions"><a class="header" href="#operand-definitions">Operand definitions</a></h3>
<h4 id="syntax-1"><a class="header" href="#syntax-1">Syntax</a></h4>
<pre><code class="language-isa">def operand {{
  'op_name': tuple
}};
</code></pre>
<ul>
<li>
<p>tuple:</p>
<pre><code class="language-isa">(base_cls_name, dflt_ext, reg_spec, flags, sort_pri, [read_code[, write_code[, read_predicat[e, write_predicate]]]])
</code></pre>
</li>
</ul>
<h4 id="source-1"><a class="header" href="#source-1">Source</a></h4>
<p>src/arch/x86/isa/operands.isa:</p>
<pre><code class="language-isa">def operands {{
  ...
  'DestReg': intReg('dest', 5),
  ...
}};
</code></pre>
<p><code>intReg</code> is defined in the same file.</p>
<pre><code class="language-isa">def intReg(idx, id):
  return ('IntReg', 'uqw', idx, 'IsInteger', id)
</code></pre>
<p>This isa file is parsed by src/arch/isa_parser/isa_parser.py.</p>
<ul>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">class ISAParser(Grammar):
  ...
  def p_def_operands(self, t):
    'def_operands : DEF OPERANDS CODELIT SEMI'
    ...
    user_dict = eval('{' + t[3] + '}', self.exportContext)
    ...
    self.buildOperandNameMap(user_dict, t.lexer.lineno)
  ...
</code></pre>
<p>After parsing <code>user_dict</code> contains a entry
<code>user_dict[DestReg] = ('IntReg', 'uqw', 'dest', 'IsInteger', 5)</code>.</p>
<ul>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">def buildOperandNameMap(self, user_dict, lineno):
  ...
  for op_name, val in user_dict.items():
    val += (None, None, None, None)
    base_cls_name, dflt_ext, reg_spec, flags, sort_pri, \
    read_code, write_code, read_predicate, write_predicate = val[:9]
    ...
    cls_name = base_cls_name + '_' + op_name
    ...
    base_cls = eval(base_cls_name + 'Operand')
    ...
    operand_name[op_name] = type(cls_name, (base_cls,), tmp_dict)
  self.operandNameMap.update(operand_name)
</code></pre>
<p><code>buildOperandNameMap</code> shows avialable args for an operand definition.
<code>buildOperandNameMap</code> derives a class named <code>cls_name</code> from <code>base_cls</code>,
where <code>cls_name = IntReg_DestReg</code>, <code>base_cls = IntRegOperand</code>.
And every thing in operand definition is add to derived class <code>IntReg_DestReg</code>.
Finally, an entry <code>{&quot;DestReg&quot;: class IntReg_DestReg}</code> is added to <code>operandNameMap</code>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="operand-type-definitions"><a class="header" href="#operand-type-definitions">Operand type definitions</a></h3>
<h4 id="syntax-2"><a class="header" href="#syntax-2">Syntax</a></h4>
<pre><code class="language-isa">def operand_types {{
  'typename' : 'ctype'
}};
</code></pre>
<h4 id="source-2"><a class="header" href="#source-2">Source</a></h4>
<p>src/arch/x86/isa/microops/limmop.isa:</p>
<pre><code class="language-isa">def template MicroLimmOpExecute {{
    Fault
    %(class_name)s::execute(ExecContext *xc,
            Trace::InstRecord *traceData) const
    {
        %(op_decl)s;
        %(op_rd)s;
        %(code)s;
        %(op_wb)s;
        return NoFault;
    }
}};
</code></pre>
<pre><code class="language-isa">iop = InstObjParams(&quot;limm&quot;, &quot;Limm&quot;, base,
      {&quot;code&quot; : &quot;DestReg = merge(DestReg, dest, imm64, dataSize);&quot;})
exec_output += MicroLimmOpExecute.subst(iop)
</code></pre>
<p><code>code</code> will be replaced by <code>code</code> defined in <code>InstObjParams</code> above.
<code>op_decl</code>, <code>op_rd</code>, <code>op_wb</code> will be generated by parsing what are <code>code</code> needed.
What are <code>code</code> needed means which operands are used.</p>
<ul>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">class InstObjParams(object):
  def __init__(self, parser, mnem, class_name, base_class = '',
               snippets = {}, opt_args = []):
    ...
    self.operands = OperandList(parser, compositeCode)
    ...
</code></pre>
<p><code>compositeCode</code> is <code>code</code> passed as parameter to <code>InstObjParams</code>,
is <code>&quot;DestReg = merge(DestReg, dest, imm64, dataSize);&quot;</code>.</p>
<ul>
<li>
<p>./src/arch/isa_parser/operand_list.py:</p>
<pre><code class="language-python">class OperandList(object):
  def __init__(self, parser, code):
    ...
    for match in parser.operandsRE().finditer(code):
      ...
</code></pre>
<p>A RE is applied to <code>code</code>.
The definition of RE is listed below.</p>
<ul>
<li>
<p>src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">def operandsRE(self):
    if not self._operandsRE:
        self.buildOperandREs()
    return self._operandsRE
</code></pre>
<pre><code class="language-python">def buildOperandREs(self):
  operands = list(self.operandNameMap.keys())
  ...
  operandsREString = r'''
  (?&lt;!\w)      # neg. lookbehind assertion: prevent partial matches
  ((%s)(?:_(%s))?)   # match: operand with optional '_' then suffix
  (?!\w)       # neg. lookahead assertion: prevent partial matches
  ''' % ('|'.join(operands), '|'.join(extensions))
</code></pre>
<p>The re is <code>(?&lt;!\w)((%s)(?:_(%s))?)(?!\w)</code>.
This re contains 3 captured groups,</p>
<ul>
<li>group1: <code>((%s)(?:_(%s))?)</code></li>
<li>group2: the first <code>(%s)</code></li>
<li>group3: the second <code>(%s)</code></li>
</ul>
<p>Note: https://regexr.com/ is good to help you pick up RE quickly.</p>
</li>
</ul>
<p>RE will capture all operands in <code>code</code>.
The captured operands are processed as below.</p>
<pre><code class="language-python">class OperandList(object):
  def __init__(self, parser, code):
    ...
    for match in parser.operandsRE().finditer(code):
      op = match.groups()
      (op_full, op_base, op_ext) = op
      ...
      # see if we've already seen this one
      op_desc = self.find_base(op_base)
      if op_desc:
        ...
      else:
        # new operand: create new descriptor
        op_desc = parser.operandNameMap[op_base](parser,
        op_full, op_ext, is_src, is_dest)
        ...
</code></pre>
<p>The matched operand will be checked whether it has been added to operand list.
I focus on operand has not been added,
in which situation, a new operand is created.
Assume the to-be-created operand is DestReg,
therefore <code>op_base</code> is <code>DestReg</code>.
And <code>operandNameMap[op_base]</code> is <code>class IntReg_DestReg</code>,
which is created in operands definition section.
<code>class IntReg_DestReg</code> is a subclass of <code>IntRegOperand</code>.</p>
<p>As a result, the constructor of <code>class IntReg_DestReg</code> will be called.</p>
<p>Finally,</p>
<pre><code class="language-python">class OperandList(object):
  def __init__(self, parser, code):
    ...
    for op_desc in self.items:
      op_desc.finalize(self.predRead, self.predWrite)
</code></pre>
<p><code>self.predRead</code> and <code>self.predWrite</code> are bool variables,
which indicate whether conditional read/write exists in current operand list.</p>
<ul>
<li>./arch/isa_parser/operand_types.py:</li>
</ul>
<p>I focus on finalizing a dest reg.</p>
<pre><code class="language-python">def finalize(self, predRead, predWrite):
  ...
  if self.is_dest:
    self.op_wb = self.makeWrite(predWrite)
    self.op_dest_decl = self.makeDecl()
  else:
    self.op_wb = ''
    self.op_dest_decl = ''
  ...
</code></pre>
<ul>
<li>
<p>./arch/isa_parser/operand_types.py:</p>
<pre><code class="language-python">def makeWrite(self, predWrite):
  ...
  if predWrite:
    ...
  else:
      wcond = ''
      windex = '%d' % self.dest_reg_idx
  wb = '''
  %s
  {
      %s final_val = %s;
      xc-&gt;setIntRegOperand(this, %s, final_val);\n
      if (traceData) { traceData-&gt;setData(final_val); }
  }''' % (wcond, self.ctype, self.base_name, windex)
  return wb
</code></pre>
<ul>
<li>If we focus on no conditional code,
then <code>wcond = ''</code>.</li>
<li><code>self.ctype</code> is defined in src/arch/isa_parser/operand_types.py: <code>Operand: __init__</code>.
It is needs parser def_operand_types, which is simple.
<code>self.ctype</code> is uint64_t, according to <code>dflt_ext = uqw</code>.</li>
<li><code>self.base_name</code> is defined in src/arch/isa_parser/isa_parser.py,
which is equal to <code>op_name</code> aka <code>DestReg</code>.</li>
<li><code>windex = self.dest_reg_idx</code> is defined is ./src/arch/isa_parser/operand_list.py,
which is sorted by <code>sort_pri</code>.
There is only one dest, so <code>windex</code> here is 0.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="namespace-declaration-namespace-name"><a class="header" href="#namespace-declaration-namespace-name">Namespace declaration: <code>namespace NAME;</code></a></h3>
<h2 id="decode-section"><a class="header" href="#decode-section">decode section</a></h2>
<h3 id="specifying-instruction-formats"><a class="header" href="#specifying-instruction-formats">specifying instruction formats</a></h3>
<h4 id="syntax-3"><a class="header" href="#syntax-3">Syntax</a></h4>
<pre><code>inst : ID LPAREN arg_list RPAREN
</code></pre>
<ul>
<li>ID: python string: inst name
<ul>
<li>arg_list:</li>
</ul>
</li>
</ul>
<pre><code>inst : ID DBLCOLON ID LPAREN arg_list RPAREN
</code></pre>
<h3 id="docode-block-defaults"><a class="header" href="#docode-block-defaults">docode block defaults</a></h3>
<h3 id="preprocessor-directive-handling"><a class="header" href="#preprocessor-directive-handling">preprocessor directive handling</a></h3>
<h3 id="todo"><a class="header" href="#todo">TODO:</a></h3>
<p><code>0x17: MOV(Bv,Iv);</code> =&gt; ?</p>
<ul>
<li>
<p>./src/arch/isa_parser/isa_parser.py</p>
<pre><code class="language-python">def p_inst_0(self, t):
  'inst : ID LPAREN arg_list RPAREN'
  ...
  codeObj = currentFormat.defineInst(self, t[1], t[3], t.lexer.lineno)
  ...
</code></pre>
<p>or</p>
<pre><code class="language-python">def p_inst_1(self, t):
  'inst : ID DBLCOLON ID LPAREN arg_list RPAREN'
  ...
  codeObj = format.defineInst(self, t[3], t[5], t.lexer.lineno)
  ...
</code></pre>
<p>Use the defined format to define an inst.
<code>MOV</code> use the <code>Inst</code> format,
which is define in src/arch/x86/isa/formats/multi.isa.</p>
<pre><code class="language-isa">def format Inst(*opTypeSet) {{
    blocks = specializeInst(Name, list(opTypeSet), EmulEnv())
    (header_output, decoder_output,
     decode_block, exec_output) = blocks.makeList()
}};
</code></pre>
<ul>
<li>
<p>./src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">class Format(object):
  ...
  def defineInst(self, parser, name, args, lineno):
    ...
    vars = self.func(self.user_code, context, *args[0], **args[1])
    ...
    return GenCode(parser, **vars)
</code></pre>
<p><code>name</code> is <code>MOV</code>.
<code>args</code> are <code>[Bv, Iv]</code>
<code>user_code</code> is <code>Inst</code> format code in multi.isa, see above.</p>
<p>Executing <code>user_code</code> is a very long procedure.
I would like to depict <code>GenCode</code> first.</p>
<p>After parsing isa file, <code>GenCode</code> object's <code>emit()</code> will be called.
For details, see isa_parser.py <code>p_</code> prefixed &amp;&amp; inst related function.</p>
<ul>
<li>
<p>./src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python">class GenCode(object):
  ...
  def emit(self):
    if self.header_output:
      self.parser.get_file('header').write(self.header_output)
    if self.decoder_output:
      self.parser.get_file('decoder').write(self.decoder_output)
    if self.exec_output:
      self.parser.get_file('exec').write(self.exec_output)
    if self.decode_block:
      self.parser.get_file('decode_block').write(self.decode_block)
  ...
</code></pre>
</li>
</ul>
<p>Before GenCode, <code>user_code</code> is executed.</p>
<ul>
<li>
<p>src/arch/x86/isa/specialize.isa:</p>
<pre><code class="language-isa">def specializeInst(Name, opTypes, env):
  ...
  return genMacroop(Name, env)
</code></pre>
<p><code>specializeInst</code> will add suffix to <code>Name</code> according to <code>opTypes</code>,
add regs to <code>env</code> according to <code>opTypes</code>.</p>
<p>E.g. <code>Name=&quot;MOV&quot;</code>, <code>opTypes=[Bv, Iv]</code>.
<code>Bv</code> will prepend <code>_R</code> to <code>Name</code>, and <code>env.addReg(InstRegIndex)</code>
<code>Iv</code> will prepend <code>_I</code> to <code>Name</code>.
After specialization, <code>Name=&quot;MOV_R_I&quot;</code>.</p>
<ul>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def genMacroop(Name, env):
    ...
    macroop = macroopDict[Name]
    if not macroop.declared:
        ...
        blocks.header_output = macroop.getDeclaration()
        blocks.decoder_output = macroop.getDefinition(env)
        macroop.declared = True
    blocks.decode_block = &quot;return %s;\n&quot; % macroop.getAllocator(env)
    return blocks
</code></pre>
<p><code>macroopDict</code> is created in src/arch/x86/isa/microasm.isa.
In short, <code>macroopDict</code>'s element is src/arch/x86/isa/macroop.isa: <code>class X86Macroop(Combinational_Macroop)</code>.
The microops contains in a macroop is declared in <code>src/arch/x86/isa/microops/*.isa</code>.
For details, see microop.md.</p>
<p>Here we focus on <code>macroop.getDeclaration()</code>, <code>macroop.getDefinition(env)</code> and <code>macroop.getAllocator(env)</code>.</p>
<ul>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def getDeclaration(self):
  ...
  iop = InstObjParams(self.getMnemonic(), self.name, &quot;Macroop&quot;,
    {&quot;code&quot; : &quot;&quot;,
     &quot;declareLabels&quot; : declareLabels
    })
  return MacroDeclare.subst(iop);
</code></pre>
<p>By using <code>MacroDeclare</code> template, macroop declaration is generated.</p>
<ul>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def template MacroDeclare {{
  ...
}};
</code></pre>
</li>
</ul>
<p>The output is write to</p>
<ul>
<li>
<p>build/X86/arch/x86/generated/decoder-ns.hh.inc:</p>
<pre><code class="language-cpp">...
  class MOV_R_I : public Macroop
  {...};
...
</code></pre>
</li>
</ul>
</li>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def getDefinition(self, env):
  ...
  for op in self.microops:
    ...
    allocMicroops += \
      &quot;microops[%d] = %s;\n&quot; % \
      (micropc, op.getAllocator(flags))
    ...
  ...
  iop = InstObjParams(self.getMnemonic(), self.name, &quot;Macroop&quot;,
    {&quot;code&quot; : &quot;&quot;, &quot;num_microops&quot; : numMicroops,
     &quot;alloc_microops&quot; : allocMicroops,
     &quot;adjust_env&quot; : self.adjust_env,
     &quot;adjust_imm&quot; : self.adjust_imm,
     &quot;adjust_disp&quot; : self.adjust_disp,
     &quot;disassembly&quot; : env.disassembly,
     &quot;regSize&quot; : regSize,
     &quot;init_env&quot; : self.initEnv})
  return MacroConstructor.subst(iop) + MacroDisassembly.subst(iop);
</code></pre>
<p><code>MacroConstructor</code> generates cpp class constructor,
e.g. <code>x86_macroop::MOV_R_I::MOV_R_I(...){...}</code>.</p>
<p><code>MacroDisassembly</code> generates <code>generateDisassembly</code>,
e.g. <code>std::string x86_macroop::MOV_R_I::generateDisassembly(...){...}</code>.</p>
</li>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def getAllocator(self, env):
  return &quot;new x86_macroop::%s(machInst, %s)&quot; % \
    (self.name, env.getAllocator())
</code></pre>
<p><code>macroop.getAllocator(env)</code> expands to</p>
<pre><code class="language-cpp">new x86_macroop::MOV_R_I(machInst, EmulEnv((OPCODE_OP_BOTTOM3 | (REX_B &lt;&lt; 3)),
                         0,
                         1,
                         ADDRSIZE,
                         STACKSIZE))
</code></pre>
<p>The expansion of env (<code>env.getAllocator()</code>) is as follow,</p>
<ul>
<li>
<p>src/arch/x86/isa/macroop.isa:</p>
<pre><code class="language-isa">def getAllocator(self):
  ...
  return '''EmulEnv(%(reg)s,
                    %(regm)s,
                    %(dataSize)s,
                    %(addressSize)s,
                    %(stackSize)s)''' % \
      self.__dict__
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<h3 id="todo-1"><a class="header" href="#todo-1">TODO:</a></h3>
<p>Instruction behaviors are described by</p>
<ul>
<li>C++ code</li>
<li>bitfield operators</li>
<li>operand type qualifiers</li>
</ul>
<h3 id="generated-files"><a class="header" href="#generated-files">generated files</a></h3>
<h2 id="generated-files-1"><a class="header" href="#generated-files-1">generated files</a></h2>
<p>TODO:</p>
<p>generic_cpu_exec.cc
inst-constrs.cc</p>
<div class="table-wrapper"><table><thead><tr><th>section</th><th>file</th></tr></thead><tbody>
<tr><td>decode_block</td><td>decode-method.cc.inc</td></tr>
<tr><td>header</td><td>decoder.hh, decoder-g.hh.inc, decoder-ns.hh.inc</td></tr>
<tr><td>decoder</td><td>decoder.cc, decoder-g.cc.inc, decoder-ns.cc.inc</td></tr>
<tr><td>exec</td><td>exec-g.cc.inc, exec-ns.cc.inc</td></tr>
</tbody></table>
</div>
<p>see src/arch/isa_parser/isa_parser.py:</p>
<pre><code class="language-python"># Get the file object for emitting code into the specified section
# (header, decoder, exec, decode_block).
def get_file(self, section):
  ...

# Change the file suffix of a base filename:
#   (e.g.) decoder.cc -&gt; decoder-g.cc.inc for 'global' outputs
def suffixize(self, s, sec):
  ...
</code></pre>
<p>suffix</p>
<ul>
<li><code>-ns</code>: namespace</li>
<li><code>-g</code>: global</li>
</ul>

                    </main>
                    <script src="https://utteranc.es/client.js"
                        repo="xieby1/xieby1.github.io"
                        issue-term="pathname"
                        theme="github-light"
                        crossorigin="anonymous"
                        async>
                    </script>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>

<div style="text-align:right; font-size:3em;">2024.07.22</div>

# Chapter 1. Introduction

* ğŸ¤”message-signaled interrupts (MSIs):
* ğŸ¤”traditional wired interrupts:

<div style="text-align:right; font-size:3em;">2024.07.24</div>

### 1.3.2 External interrupts with IMSICs

> Fundamentally, a message-signaled interrupt is simply a
> memory write to a specific address that hardware accepts as indicating an interrupt.
> ...
> the receiving IMSIC interprets the write as an external interrupt for the respective hart.

TODO: MMUæ˜¯å¦ä¹Ÿè¦å‚ä¸ï¼Ÿ

## 1.5 Selection of harts tp receive an interrupts

PLICä¸APLICçš„å·®å¼‚ï¼š

> The original Platform-Level Interrupt Controller (PLIC) for RISC-V is configurable so each
> interrupt source signals external interrupts to any subset of the harts, potentially all harts.
> When multiple harts receive an external interrupt from a single cause at the PLIC, the first
> hart to claim the interrupt at the PLIC is the one responsible for servicing it. Usually this
> ...
>
> For the reasons already given, the Advanced PLIC supports sending each signaled
> interrupt to only a single hart chosen by software, not to multiple harts.

å¯¹äºä¸€ä¸ªä¸­æ–­ï¼š
PLICå¯é€šçŸ¥å¤šä¸ªhartï¼Œç¬¬ä¸€ä¸ªclaimçš„hartè´Ÿè´£å¤„ç†ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°ç«äº‰ï¼›
APLICç”±è½¯ä»¶é€‰æ‹©ä¸€ä¸ªhartè´Ÿè´£å¤„ç†ã€‚

# Chapter 2. Control and Status Registers (CSRs) Added to Harts

<div style="text-align:right; font-size:3em;">2024.07.25</div>

## 2.5. Access control by the state-enable CSRs

è¿™ä¸ªæ˜¯ä¸ºäº†é¿å…covert channel(å­˜åœ¨å®‰å…¨é—®é¢˜ï¼‰ï¼Œä¸æ˜¯å‡ åˆ†é’Ÿèƒ½çœ‹é€çš„ï¼Œå…ˆè·³è¿‡äº†ã€‚

# Chapter 3. Incoming MSI Controller (IMSIC)

## 3.9. Top external interrupt CSRs (mtopei, stopei, vstopei)

IMSICå’ŒAPLICçš„å·®å¼‚ï¼šIMSICçš„interrupt_identity==interrupt_priorityï¼Œ
è€ŒAPLICçš„å¯ä»¥ä¸ç­‰ã€‚
IMSICè®¾è®¡çš„ç†ç”±è§3.3. Interrupt prioritiesã€‚

# Chapter 4. Advanced Platform-Level Interrupt Controller (APLIC)

> This chapter specifies an Advanced PLIC (APLIC) that is not backward compatible with the earlier
> RISC-V PLIC.

APLICå’ŒPLICçš„å·®å¼‚ï¼šAPLICä¸å…¼å®¹PLIC

* æ³¨1ï¼šæœ‰æƒ³è¦æä¸€ä¸ªsystemverilogå†™çš„APLICçš„å¼€æºç»„ä»¶
* æ³¨2ï¼šæœ‰Duo-PLICçš„è‰æ¡ˆï¼Œä½†ä¸ä¸€å®šèƒ½æˆæ ‡å‡†
  * è¯¦è§ï¼šhttps://github.com/riscv/riscv-aia/blob/main/doc/src/DuoPLIC.tex

> Full conformance to the Advanced Interrupt Architecture requires the APLIC. However,â
> a workable system can be built substituting the older PLIC instead, assuming only wired interrupts toâ
> harts, not MSIs.

AIAçš„æ”¯æŒå¿…é¡»è¦æœ‰APLICï¼Œå¯ä»¥æ²¡æœ‰MSIï¼Œä½†ä¸ä¸€å®šèƒ½æˆæ ‡å‡†

> While not prohibited, this arrangement is likely to be less efficient than
> having all harts share a single APLIC.

ä¸ºäº†æ€§èƒ½ï¼Œæ¨èå…¨å±€ä¸€ä¸ªAPLICã€‚

> Multiple APLICs are presumably more likely to arise when groups of devices are physically distant
> from one another, perhaps even on separate chips (including chiplets in a multi-chip module).

å¤šAPLICsç”¨äºç‰©ç†ä¸Šéš”ç¦»çš„è®¾å¤‡ï¼ˆchipletsï¼‰ã€‚

> When harts have IMSICs to support MSIs, a system may easily contain multiple APLICs for converting
> wired interrupts into MSIs,

å½“IMSICså­˜åœ¨æ—¶ï¼ŒAPLICçš„è§’è‰²å˜ä¸ºwired interruptsè½¬æ¢ä¸ºMSIsã€‚



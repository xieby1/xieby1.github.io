<div style="font-size:3em; text-align:right;">2019.9.15</div>
# æœ€ç»ˆç›®æ ‡

1. x86çš„winegccèƒ½å¤Ÿäº¤å‰ç¼–è¯‘å‡ºé¾™èŠ¯çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼›
2. å°†winegccæºç ç¼–è¯‘åˆ°é¾™èŠ¯å»ã€‚

# x86çš„winegccç¼–è¯‘notepad.exe

**æ³¨**ï¼šnotepad.exeæ˜¯windowsé‡Œçš„å†™å­—æœ¬ç¨‹åºã€‚notepad.exeçš„æºç åŒ…å«åœ¨äº†wineçš„æºç é‡Œï¼Œåœ¨`programs/notepad/`é‡Œã€‚

æƒ³è¦è¯•ä¸€è¯•x86çš„winegccèƒ½ä¸èƒ½æ­£å¸¸ç¼–è¯‘notepad.exeã€‚äºæ˜¯å»çœ‹notepadçš„Makefileã€‚åœ¨`programs/notepad/Makefile`é‡Œï¼Œå†…å®¹ç›¸å½“å¤šï¼Œçœ‹å¼€å¤´çš„æ³¨é‡Šâ€œ# Automatically generated by make depend; DO NOT EDIT!!â€ï¼Œè«émake dependæ˜¯ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆMakefileçš„å·¥å…·ï¼Ÿ

## ~~makedepend~~

~~è¾“å…¥makedependï¼Œç»ˆç«¯ä¼šæç¤ºå®‰è£…xutils-dev
sudo apt install xutils-dev~~

å°†notepadçš„æºç å¤åˆ¶åˆ°äº†ä¸€ä¸ªç‹¬ç«‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œ`~/Desktop/notepad/`ã€‚

<div style="font-size:3em; text-align:right;">2019.9.16</div>
åœ¨wineæ ¹ç›®å½•ä¸‹çš„`configure`é‡Œçœ‹åˆ°äº†ï¼Œ

```bash
# Guess values for system-dependent variables and create Makefiles.
# Generated by GNU Autoconf 2.69 for Wine 4.14.
```

GNU Autoconfåº”è¯¥æ˜¯ä¸ªå·¥å…·ã€‚åœ¨wikipediaçš„[autoconfè¯æ¡](https://en.wikipedia.org/wiki/Autoconf)é‡Œä¸Šçœ‹åˆ°äº†ä¸€å¼ autoconfå’Œautomakeçš„æµç¨‹å›¾ï¼Œ

<img src="pictures/Autoconf-automake-process.svg" alt="Autoconf-automake-process" style="zoom: 50%;" />

ä»æ—è¾¹çš„è¯´æ˜å¾—çŸ¥è¿™æ˜¯GNU Build Systemçš„ç¼–è¯‘ä¸€ä¸ªé¡¹ç›®çš„æµç¨‹å›¾ã€‚

å»[GNU Build Systemçš„wikipediaé¡µé¢](https://en.wikipedia.org/wiki/GNU_Build_System)æŸ¥çœ‹ï¼Œå‘ç°Makefile.inç­‰æ–‡ä»¶éƒ½æ˜¯æœ‰ç”¨å¤„çš„ï¼Œéš¾æ€ªä¹‹å‰åªå¤åˆ¶.hå’Œ.cæ–‡ä»¶ï¼Œç„¶åè°ƒç”¨winemakerä¼šå‡ºé—®é¢˜ã€‚

äºæ˜¯æŠŠnotepadé‡Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½å¤åˆ¶è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹`~/Desktop/notepad/`ï¼Œå¹¶æ·»åŠ äº†gitç®¡ç†ï¼Œ

```bash
$ winemaker .
Winemaker 0.8.4
Copyright 2000-2004 FranÃ§ois Gouget <fgouget@codeweavers.com> for CodeWeavers
Copyright 2004 Dimitrie O. Paun
Copyright 2009-2012 AndrÃ© Hentschel
warning: in ".", renaming "Makefile" to "makefile.win"
Scanning the source directories...
Fixing the source files...
  dialog.c
  main.c
  notepad.rc
  dialog.h
  main.h
  notepad_res.h
Generating project files...
```

çœ‹è¾“å‡ºä¿¡æ¯ï¼Œwinemakeræ›¿æ¢äº†åŸMakefileçš„ä¿¡æ¯ï¼Œä¸”ä¿®æ”¹äº†æºç çš„å†…å®¹ã€‚ç”¨gitçœ‹ï¼Œä»…ä»…åªæ˜¯æ–°å¢äº†makefile.winï¼ˆåº”è¯¥æ˜¯åŸæ¥çš„Makefileï¼‰ï¼Œä¿®æ”¹äº†Makefileã€‚

çªç„¶æƒ³èµ·æ¥ï¼ŒåŸæ¥çš„Makefileé‡Œè°ƒç”¨äº†å¾ˆå¤šwineçš„åº“å‡½æ•°ï¼ˆè§åŸMakefileï¼‰ï¼Œ**æ‰€ä»¥ä¸åº”è¯¥å•ç‹¬æŠŠnotepadå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚**

**åº”è¯¥åœ¨`programs/notepad/`é‡Œæï¼**

ä»ç„¶æœ‰é—®é¢˜ï¼Œçœ‹æ–°Makefileé‡Œæ²¡æœ‰å…³äº../../include/çš„å†…å®¹ã€‚æ‰€ä»¥winemakerå¹¶æ²¡æœ‰å»è¯»å–åŸMakefileçš„å†…å®¹ã€‚

æœ€ç»ˆå‘ç°æœ‰å¾ˆå¤šä¾èµ–çš„å¤´æ–‡ä»¶å¾ˆéš¾æï¼Œç´¢æ€§æ”¾å¼ƒè¿™ä¸€æ¡è·¯ã€‚

# x86çš„winegccç¼–è¯‘çª—å£ç•Œé¢çš„helloworld

æºç ï¼Œ

```c
#include <windows.h>
#include <stdio.h>
 
int WINAPI WinMain(HINSTANCE hlnstance,HINSTANCE hPrelnstance,LPSTR lpCmdLine,int nCmdShow)
{
	MessageBox(NULL,"hello,world!","HELLO",MB_OK|MB_ICONASTERISK);
    return 0;
}
```

åœ¨ç”¨`x86_64-w64-mingw32-gcc`ç¼–è¯‘èƒ½å¤Ÿç”¨wine64å¯åŠ¨ã€‚

~~ç”¨winegccç¼–è¯‘å‡ºæ¥çš„æ˜¯ä¸æ˜¯ELFæ–‡ä»¶ï¼Œå¯èƒ½winegccå¹¶ä¸æ˜¯æŠŠwinçš„ä»£ç ç¼–è¯‘åˆ°linuxä¸Šï¼Œè€Œæ˜¯åœ¨linuxä¸ŠæŠŠwinçš„ä»£ç ç¼–è¯‘æˆwinç¨‹åºã€‚~~

ç”¨winegccç¼–è¯‘å‡ºæ¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œ

1. winegccHelloWorld.exeï¼Œä¸æ˜¯ELFæ–‡ä»¶ï¼Œå¯ä»¥åˆ æ‰ä¸å½±å“.soè¿è¡Œï¼›

2. winegccHelloWorld.exe.soï¼Œæ˜¯ELFæ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œï¼ˆæ˜¾ç¤ºâ€œSegmentation fault (core dumped)â€ï¼‰ï¼Œéœ€è¦å¦‚ä¸‹æ–¹å¼è¿è¡Œï¼Œå‚è€ƒ[CSDNåšå®¢åˆ©ç”¨winelibç¼–è¯‘ä¸€ä¸ªå¯åœ¨linuxä¸‹è¿è¡Œçš„ç¨‹åº](https://blog.csdn.net/wwyyxx26/article/details/9853089)ï¼Œ

   ```bash
   wine64 winegccHelloWorld.exe.so
   ```

<div style="font-size: 1.5em; font-weight: bold; color:red;">ğŸ¤”ä¸ºä»€ä¹ˆç›´æ¥è¿è¡Œ.soæ–‡ä»¶ä¼šå‡ºé”™ï¼Ÿ</div>

çŒœæƒ³æ˜¯wine64ç»™åº”ç”¨ç¨‹åºå‡†å¤‡å¥½äº†å®ƒéœ€è¦çš„å‡½æ•°ï¼ˆæ”¾åœ¨å†…å­˜çš„é€‚å½“çš„åœ°æ–¹ï¼‰ï¼Œæˆ–è€…è¯´æ˜¯wine64å……å½“äº†loaderçš„è§’è‰²ï¼ï¼ˆç»ˆäºç†è§£wineçš„æºç ä¸ºä»€ä¹ˆå«loaderäº†ï¼‰ã€‚
<!DOCTYPE html>
<!-- Export by pandoc -D revealjs, pandoc version 2.14.03 -->
<!-- pandoc-types 1.22.1, texmath 0.12.3.2, skylighting 0.10.5.2, -->
<!-- citeproc 0.4.0.1, ipynb 0.1.0.2 -->
<!-- delete /dist after revealjs-url -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="ðŸ¤“xieby1">
  <title>Doc Thoughts</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/reset.css">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/theme/white.css" id="theme">
  <style>
  .reveal section img {
      margin: 0 0;
      /* override default border color */
      border: transparent;
  }

  .reveal p {
      margin: 0 0;
  }

  /* no margin in styled code div, the same to unstyled code */
  div.sourceCode {
      margin: 0;
  }
  .reveal pre {
      display: flex;
      justify-content: center;
  }

  .reveal pre code {
      max-height: none;
  }

  a.sourceLine {
      /* styled code line is higher than unstyled, make them the same */
      line-height: 0;
  }

  [role="doc-toc"] > ul {
      /* multiple column in first level TOC */
      column-width: 290px;
      width: 100%;
      column-rule-style: solid;
      /* no margin in first level TOC */
      margin: 0 0 0 0;
  }

  #TOC ul {
      /* no bullet */
      list-style-type: none;
      /* no margin, no padding in TOC ul */
      margin-block-start: 0;
      margin-block-end: 0;
      padding-inline-start: 0;
  }

  table {
      /* 42px / sprt 2 */
      font-size: 30px;
  }

  /* enable multiple columns */
  /* https://stackoverflow.com/questions/30861845 */
  .container {
    display: flex;
    align-items: center;
  }
  .col {
    flex: auto;
  }

  /* not to capitalise my titles */
  /* https://stackoverflow.com/questions/47057398 */
  .reveal h1,
  .reveal h2,
  .reveal h3,
  .reveal h4,
  .reveal h5 {
      text-transform: none;
  }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-plugins@4.1.5/chalkboard/style.css">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-plugins@4.1.5/customcontrols/style.css">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Doc Thoughts</h1>
  <p class="author">ðŸ¤“xieby1</p>
  <p class="date">2022.4.?</p>
</section>
<section id="TOC">
<nav role="doc-toc"> 
<ul>
<li><a href="#/ht"><span class="toc-section-number">1</span> HT</a>
<ul>
<li><a href="#/multi-isa-ht"><span class="toc-section-number">1.1</span> Multi-ISA HT</a></li>
</ul></li>
<li><a href="#/process-migration"><span class="toc-section-number">2</span> Process Migration</a>
<ul>
<li><a href="#/motivation"><span class="toc-section-number">2.1</span> Motivation</a></li>
<li><a href="#/overview"><span class="toc-section-number">2.2</span> Overview</a></li>
<li><a href="#/state-transformation"><span class="toc-section-number">2.3</span> State Transformation</a></li>
<li><a href="#/result-analysis"><span class="toc-section-number">2.4</span> Result &amp; Analysis</a></li>
<li><a href="#/migration-cost"><span class="toc-section-number">2.5</span> Migration Cost</a></li>
<li><a href="#/migration-points"><span class="toc-section-number">2.6</span> Migration Points</a></li>
<li><a href="#/binary-translation-cost"><span class="toc-section-number">2.7</span> Binary Translation Cost</a></li>
<li><a href="#/summary"><span class="toc-section-number">2.8</span> Summary</a></li>
</ul></li>
<li><a href="#/isas-explore"><span class="toc-section-number">3</span> ISAs Explore</a>
<ul>
<li><a href="#/uarch-design-space"><span class="toc-section-number">3.1</span> uArch Design Space</a></li>
<li><a href="#/uarch-design-space-pruned"><span class="toc-section-number">3.2</span> uArch Design Space (Pruned)</a></li>
<li><a href="#/result-analysis-1"><span class="toc-section-number">3.3</span> Result &amp; Analysis</a></li>
<li><a href="#/all-tests-isa-affinity"><span class="toc-section-number">3.4</span> (All-Tests) ISA Affinity</a></li>
<li><a href="#/performance-and-energy-efficiency"><span class="toc-section-number">3.5</span> Performance and Energy Efficiency</a></li>
<li><a href="#/isa-affinity"><span class="toc-section-number">3.6</span> ISA Affinity</a></li>
<li><a href="#/migration-cost-1"><span class="toc-section-number">3.7</span> Migration Cost</a></li>
<li><a href="#/summary-1"><span class="toc-section-number">3.8</span> Summary</a></li>
</ul></li>
<li><a href="#/mitigate-rop-attack"><span class="toc-section-number">4</span> Mitigate ROP Attack</a></li>
<li><a href="#/composite-isa"><span class="toc-section-number">5</span> Composite ISA</a>
<ul>
<li><a href="#/motivation-1"><span class="toc-section-number">5.1</span> Motivation</a></li>
<li><a href="#/isa-design-space"><span class="toc-section-number">5.2</span> ISA Design Space</a></li>
<li><a href="#/uarch-design-space-1"><span class="toc-section-number">5.3</span> uArch Design Space</a></li>
<li><a href="#/results-analysis"><span class="toc-section-number">5.4</span> Results &amp; Analysis</a></li>
<li><a href="#/all-tests-feature-affinity"><span class="toc-section-number">5.5</span> (All-Tests) Feature Affinity</a></li>
<li><a href="#/performance-and-energy-efficiency-1"><span class="toc-section-number">5.6</span> Performance and Energy Efficiency</a></li>
<li><a href="#/migration-cost-2"><span class="toc-section-number">5.7</span> Migration Cost</a></li>
<li><a href="#/summary-2"><span class="toc-section-number">5.8</span> Summary</a></li>
<li><a href="#/doubt"><span class="toc-section-number">5.9</span> Doubt</a></li>
</ul></li>
<li><a href="#/my-works"><span class="toc-section-number">6</span> My works</a></li>
</ul>
</nav>
</section>

<section>
<section id="ht" class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> HT</h1>
<!-- Number of slides is huge, so toc is huge -->
<style>
[role="doc-toc"] {zoom: 60%;}
[role="doc-toc"] > ul {column-width: 400px;}
</style>
<ul>
<li>HM (Homogeneous)</li>
<li>Single-ISA HT (Heterogeneous)</li>
<li><strong>Multi-ISA HT</strong></li>
</ul>
<div style="zoom: 60%;">
<p>ðŸ“„Survey: 2015. <em>Heterogeneous Multi-core Architectures</em>, Tulika Mitra, jip, 15</p>
</div>
</section>
<section id="multi-isa-ht" class="slide level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Multi-ISA HT</h2>
<p>ðŸ˜ŽAshish Venkat</p>
<div style="zoom: 90%;">
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 5%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Y</th>
<th style="text-align: center;">C/J</th>
<th style="text-align: center;">Cit</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2012</td>
<td style="text-align: center;">asplos</td>
<td style="text-align: center;">95</td>
<td>Execution migration in a heterogeneous-ISA chip multiprocessor</td>
</tr>
<tr class="even">
<td>2014</td>
<td style="text-align: center;">isca</td>
<td style="text-align: center;">112</td>
<td>Harnessing ISA diversity: Design of a heterogeneous-ISA chip multiprocessor</td>
</tr>
<tr class="odd">
<td>2016</td>
<td style="text-align: center;">asplos</td>
<td style="text-align: center;">26</td>
<td>HIPStR: Heterogeneous-ISA Program State Relocation</td>
</tr>
<tr class="even">
<td>2018</td>
<td style="text-align: center;">doc</td>
<td style="text-align: center;">5</td>
<td><strong>Breaking the ISA Barrier in Modern Computing</strong></td>
</tr>
<tr class="odd">
<td>2019</td>
<td style="text-align: center;">hpca</td>
<td style="text-align: center;">17</td>
<td>Composite-ISA Cores: Enabling Multi-ISA Heterogeneity Using a Single ISA</td>
</tr>
</tbody>
</table>
</div>
</section></section>
<section>
<section id="process-migration" class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Process Migration</h1>
<h2>
Execution Migration in a Heterogeneous-ISA Chip Multiprocessor
</h2>
<p>Matthew DeVuyst, <strong>Ashish Venkat</strong>, Dean M. Tullsen</p>
<p>University of California, San Diego</p>
<p>2012 asplos 95</p>
</section>
<section id="motivation" class="slide level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Motivation</h2>
<p>Single-ISA HT v.s. Single-ISA HM (Homogeneous)</p>
<ul>
<li>performance</li>
<li>energy efficiency</li>
</ul>
<p>Multi-ISA HT v.s. Single-ISA HT</p>
<ul>
<li>process migration</li>
</ul>
<p>HT Cores v.s. HT Machines</p>
<ul>
<li>shared memory, copy less</li>
</ul>
</section>
<section id="overview" class="slide level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Overview</h2>
<div class="container">
<div class="col" style="zoom: 70%;">
<h3>
Mechanism
</h3>
<ul>
<li>Fat executables</li>
<li>Equivalence point
<ul>
<li>memory state is equivalent</li>
<li>constraint to function call</li>
</ul></li>
<li>Binary translate</li>
<li>State transform</li>
</ul>
</div>
<div class="col" style="zoom: 133%;">
<p><img data-src="./pictures/process_migration.svg" /></p>
</div>
</div>
</section>
<section id="state-transformation" class="slide level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> State Transformation</h2>
<div class="container">
<div class="col">
<h3>
Compile Time
</h3>
<p>Memory Image Consistency</p>
<div style="zoom: 70%;">
<ul>
<li>Global Data</li>
<li>Code Section
<ul>
<li>same function address</li>
<li>(call addr may not same)</li>
</ul></li>
<li>Heap
<ul>
<li>same implement <code>malloc</code></li>
</ul></li>
<li>Stack
<ul>
<li>ABI, ARM &amp; MIPS (RISC)
<ul>
<li>padding</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div class="col">
<h3>
Run Time
</h3>
<p>Stack Transformation</p>
<div style="zoom: 70%;">
<ul>
<li>depends on compilation info</li>
<li>local variable locations
<ul>
<li>register</li>
<li>fixed stack slot</li>
<li>register spilled on stack</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="result-analysis" class="slide level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Result &amp; Analysis</h2>
<ul>
<li>Runtime Compromise
<ul>
<li>On average suffers by 3.1% in ARM, 1.6% in MIPS</li>
</ul></li>
<li>Migration Cost</li>
<li>Migration Points</li>
<li>Binary Translation Cost</li>
</ul>
</section>
<section id="migration-cost" class="slide level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> Migration Cost</h2>
<p>(Without Binary Translation)</p>
<p><img src="./pictures/2012.f2.migration_cost.svg" style="zoom: 200%;"></p>
<p>On average</p>
<ul>
<li>272ms ARM =&gt; MIPS</li>
<li>344ms MIPS =&gt; ARM</li>
</ul>
<!-- <img src="./pictures/2012.f3.perf_freq_no_bt_st.svg" style="zoom: 120%;"> -->
<!-- Perf. (no BT&ST) vs freq. -->
<!-- * Binary Translation -->
<!-- * State Transformation -->
</section>
<section id="migration-points" class="slide level2" data-number="2.6">
<h2 data-number="2.6"><span class="header-section-number">2.6</span> Migration Points</h2>
<p><img src="./pictures/2012.f4.time_to_next_call.svg" style="zoom: 120%;"></p>
<p>dummy calls added to</p>
<ul>
<li>outermost loops
<ul>
<li>-1.4% ARM, -4.7% MIPS</li>
</ul></li>
<li>second-innermost loops
<ul>
<li>-2.3% ARM, 5.4% MIPS</li>
</ul></li>
</ul>
</section>
<section id="binary-translation-cost" class="slide level2" data-number="2.7">
<h2 data-number="2.7"><span class="header-section-number">2.7</span> Binary Translation Cost</h2>
<div class="container">
<div class="col">
<p><img src="./pictures/2012.f10.migration_cost_bt_st.svg" style="zoom: 120%;"></p>
<ul>
<li>BT: Inst Expansion Ratio 1~3.5</li>
</ul>
</div>
<div class="col">
<p><img src="./pictures/2012.f11.perf_freq.svg" style="zoom: 120%;"></p>
<p>Perf. vs migration freq.</p>
</div>
</div>
</section>
<section id="summary" class="slide level2" data-number="2.8">
<h2 data-number="2.8"><span class="header-section-number">2.8</span> Summary</h2>
<ul>
<li>need to transform stack &amp; regs</li>
<li>no need to transform pointers</li>
<li>runtime compromise (w/o migration)
<ul>
<li>-1.6% MIPS, -3.1% ARM</li>
</ul></li>
<li>state transformation
<ul>
<li>272us ARM=&gt;MIPS, 344us MIPS=&gt;ARM</li>
</ul></li>
<li>binary translation
<ul>
<li>2.75ms ARM=&gt;MIPS, 7.24ms MIPS=ARM</li>
</ul></li>
<li>migrate per O(100ms) perf loss &lt; 5%</li>
</ul>
</section></section>
<section>
<section id="isas-explore" class="title-slide slide level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> ISAs Explore</h1>
<h2>
Harnessing ISA Diversity: Design of a Heterogeneous-ISA Chip Multiprocessor
</h2>
<p><strong>Ashish Venkat</strong>, Dean M. Tullsen</p>
<p>University of California, San Diego</p>
<p>2014 isca 112</p>
</section>
<section id="uarch-design-space" class="slide level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> uArch Design Space</h2>
<div style="zoom: 60%;">
<table>
<thead>
<tr class="header">
<th>Design Parameter</th>
<th>Design Choices</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ISA</td>
<td>Thumb, Alpha, x86-64</td>
</tr>
<tr class="even">
<td>Execution Semantics</td>
<td>In-order, Out-of-order</td>
</tr>
<tr class="odd">
<td>Issue width</td>
<td>1, 2, 4</td>
</tr>
<tr class="even">
<td>Branch Predictor</td>
<td>local, tournament</td>
</tr>
<tr class="odd">
<td>Reorder Buffer Size</td>
<td>64, 128 entries</td>
</tr>
<tr class="even">
<td>Architectural Register File</td>
<td>ISA-specific</td>
</tr>
<tr class="odd">
<td>Physical Register File (Integer)</td>
<td>96, 160</td>
</tr>
<tr class="even">
<td>Physical Register File (FP/SIMD)</td>
<td>64, 96</td>
</tr>
<tr class="odd">
<td>Integer ALUs</td>
<td>1, 3, 6</td>
</tr>
<tr class="even">
<td>Integer Multiply/Divide Units</td>
<td>1, 2</td>
</tr>
<tr class="odd">
<td>Floating-point ALUs</td>
<td>1, 2, 4</td>
</tr>
<tr class="even">
<td>FP Multiply/Divide Units</td>
<td>1, 2</td>
</tr>
<tr class="odd">
<td>SIMD Units</td>
<td>1, 2, 4</td>
</tr>
<tr class="even">
<td>Load/Store Queue Sizes</td>
<td>16, 32 entries</td>
</tr>
<tr class="odd">
<td>Instruction Cache</td>
<td>32KB 4-way, 64KB 4-way</td>
</tr>
<tr class="even">
<td>Private Data Cache</td>
<td>32KB 4-way, 64KB 4-way</td>
</tr>
<tr class="odd">
<td>Shared Last Level (L2) Cache</td>
<td>4-banked 4MB 4-way, 4-banked 8MB 8-way</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="uarch-design-space-pruned" class="slide level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> uArch Design Space (Pruned)</h2>
<p>~750k combinations</p>
<p>â†“</p>
<p>Prune correlations</p>
<p>â†“</p>
<p>600 combinations</p>
<div style="zoom: 60%;">
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th>Design Parameter</th>
<th>Design Choices</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ISA</td>
<td>Thumb, Alpha, x86-64</td>
</tr>
<tr class="even">
<td>Execution Semantics</td>
<td>In-order, Out-of-order</td>
</tr>
<tr class="odd">
<td>Branch Predictor</td>
<td>local, tournament</td>
</tr>
<tr class="even">
<td>Reorder Buffer-Register File</td>
<td>64-96-64, 128-160-96 entries</td>
</tr>
<tr class="odd">
<td>Issue Width-Functional Units</td>
<td>1-1-1-1-1-1, 1-3-2-2-2-2, 2-3-2-2-2-2, 4-3-2-2-2-2, 4-6-2-4-2-4</td>
</tr>
<tr class="even">
<td>Load/Store Queue Sizes</td>
<td>16, 32 entries</td>
</tr>
<tr class="odd">
<td>Cache Hierarchy</td>
<td>32K/4-32K/4-4M/4, 32K/4-32K/4-8M/8, 64K/4-64K/4-4M/4, 64K/4-64K/4-8M/8</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="result-analysis-1" class="slide level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> Result &amp; Analysis</h2>
<ul>
<li>(All-Tests) ISA Affinity
<ul>
<li>All tests preferred uArch/ISA</li>
</ul></li>
<li>Performance and Energy Efficiency</li>
<li>(Particular-Test) ISA Affinity
<ul>
<li>Particular test preferred ISAs</li>
</ul></li>
<li>Migration Cost</li>
</ul>
</section>
<section id="all-tests-isa-affinity" class="slide level2" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> (All-Tests) ISA Affinity</h2>
<p>uArch Design Space Result</p>
<div class="container">
<div class="col">
<ul>
<li>X: uArch parameters</li>
<li>Y: frequency of occurrence</li>
<li>Data: <strong>best designs</strong> from all experiments</li>
</ul>
</div>
<div class="col">
<p><img data-src="./pictures/2014.f8.design_space_exploration.svg" /></p>
</div>
</div>
</section>
<section id="performance-and-energy-efficiency" class="slide level2" data-number="3.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span> Performance and Energy Efficiency</h2>
<div class="container" style="zoom: 70%;">
<div class="col">
<p>Test targets</p>
<ul>
<li>Homogeneous</li>
<li>Single-ISA</li>
<li>ðŸŽ‰<strong>Heterogeneous-ISA</strong></li>
</ul>
</div>
<div class="col">
<p>Tests</p>
<table>
<thead>
<tr class="header">
<th>x</th>
<th>y</th>
<th>workload</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Peak Power</td>
<td>Speedup</td>
<td>Multi Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>Speedup</td>
<td>Multi Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>EDP</td>
<td>Multi Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>EDP</td>
<td>Multi Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>Speedup</td>
<td>Single Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>Speedup</td>
<td>Single Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>EDP</td>
<td>Single Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>EDP</td>
<td>Single Thread</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="isa-affinity" class="slide level2" data-number="3.6">
<h2 data-number="3.6"><span class="header-section-number">3.6</span> ISA Affinity</h2>
<div class="container">
<div class="col" style="zoom: 75%;">
<ul>
<li>4 columns : 4 optimizations
<ul>
<li>Single-thread performance</li>
<li>Multi-program performance</li>
<li>Single-thread EDP (Power)</li>
<li>Multi-program EDP (Power)</li>
</ul></li>
</ul>
</div>
<div class="col">
<p><img data-src="./pictures/2014.f9.isa_affinity.svg" /></p>
</div>
</div>
</section>
<section id="migration-cost-1" class="slide level2" data-number="3.7">
<h2 data-number="3.7"><span class="header-section-number">3.7</span> Migration Cost</h2>
<div class="container">
<div class="col">
<p><img src="./pictures/2014.f10.migration_dynamic_insts_num.svg" style="zoom: 140%;"></p>
<p>Distance to next equivalence</p>
</div>
<div class="col">
<p><img src="./pictures/2014.f11.avg_migration_time.svg" style="zoom: 140%;"></p>
<p>Average time: 4ms</p>
</div>
<div class="col">
<p><img src="./pictures/2014.f12.migration_bt_percent.svg" style="zoom: 140%;"></p>
<p>BT percentage</p>
</div>
</div>
</section>
<section id="summary-1" class="slide level2" data-number="3.8">
<h2 data-number="3.8"><span class="header-section-number">3.8</span> Summary</h2>
<ul>
<li>HM =&gt; single-ISA HT =&gt; HT ISA</li>
<li>uArch design space exploration</li>
<li>+20.8% perf. -23% energy than single-ISA HT</li>
<li>avg migration time: 4ms, bt high%</li>
</ul>
</section></section>
<section id="mitigate-rop-attack" class="title-slide slide level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Mitigate ROP Attack</h1>
<div style="zoom: 60%;">
<p>ROP (Return-Oriented Programming)</p>
</div>
<h2>
HIPStR â€“ Heterogeneous-ISA Program State Relocation
</h2>
<p><strong>Ashish Venkat</strong>, Sriskanda Shamasunder, Dean M. Tullsen, Hovav Shacham</p>
<p>University of California, San Diego</p>
<p>2016 asplos 26</p>
</section>

<section>
<section id="composite-isa" class="title-slide slide level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Composite ISA</h1>
<h2>
Composite-ISA Cores: Enabling Multi-ISA Heterogeneity Using a Single ISA
</h2>
<div class="container">
<div class="col">
<p><strong>Ashish Venkat</strong></p>
<p>University of Virginia</p>
</div>
<div class="col">
<p>Harsha Basavaraj Dean M. Tullsen</p>
<p>University of California, San Diego</p>
</div>
</div>
<p>2019 hpca 17</p>
</section>
<section id="motivation-1" class="slide level2" data-number="5.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> Motivation</h2>
<h3>
HT ISA problems
</h3>
<ul>
<li>licensing</li>
<li>verification costs &amp; barriers</li>
<li>process migration fat binaries</li>
<li>binary translation costs</li>
<li>state transformation costs</li>
</ul>
<h3>
Solution
</h3>
<ul>
<li>Composite ISA
<ul>
<li>Superset ISA resembles x86</li>
<li>Subset ISA HT</li>
</ul></li>
</ul>
</section>
<section id="isa-design-space" class="slide level2" data-number="5.2">
<h2 data-number="5.2"><span class="header-section-number">5.2</span> ISA Design Space</h2>
<!-- | Design Parameter   | Design Choices                                    | -->
<!-- |--------------------|---------------------------------------------------| -->
<!-- | Register Depth     | 8, 16, 32, 64                                     | -->
<!-- | Register Width     | 32, 64                                            | -->
<!-- | Opcode & Addr Mode | RISC(microx86), CISC                              | -->
<!-- | Predication        | partial (x86), full with gpr (this), full with cc | -->
<!-- | Data-Parallel      | with SSE2, without SSE2                           | -->
<div class="container">
<div class="col">

</div>
<div class="col" style="zoom: 100%;">
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>ISA Parameter</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Register depth</td>
<td>8, 16, 32, 64 registers</td>
</tr>
<tr class="even">
<td>Register width</td>
<td>32-bit, 64-bit registers</td>
</tr>
<tr class="odd">
<td>Instruction/Addressing mode complexity</td>
<td>1:1 macroop-microop encoding (load-store x86 micro-op ISA), 1:n macroop-microop encoding (fully CISC x86 ISA)</td>
</tr>
<tr class="even">
<td>Predication Support</td>
<td>Full Predication like IA-64/Hexagon vs Partial (cmov) Predication</td>
</tr>
<tr class="odd">
<td>Data Parallelism</td>
<td>Scalar vs Vector (SIMD) execution</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><img src="./pictures/2019.f1.uarch_design_sapce.svg" style="zoom: 140%;"></p>
</section>
<section id="uarch-design-space-1" class="slide level2" data-number="5.3">
<h2 data-number="5.3"><span class="header-section-number">5.3</span> uArch Design Space</h2>
<div style="zoom: 60%;">
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="header">
<th>Microarchitectural Parameter</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Execution Semantics</td>
<td>Inorder vs Out-Of-Order designs</td>
</tr>
<tr class="even">
<td>Fetch/Issue Width</td>
<td>1, 2, 4</td>
</tr>
<tr class="odd">
<td>Decoder Configurations</td>
<td>1-3 1:1 decoders, 1 1:4 decoder, MSROM</td>
</tr>
<tr class="even">
<td>Micro-op Optimizations</td>
<td>Micro-op Cache, Micro-op Fusion</td>
</tr>
<tr class="odd">
<td>Instruction Queue Sizes</td>
<td>32, 64</td>
</tr>
<tr class="even">
<td>Reorder Buffer Sizes</td>
<td>64, 128</td>
</tr>
<tr class="odd">
<td>Physical Register File Configurations</td>
<td>(96 INT, 64 FP/SIMD), (64 INT, 96 FP/SIMD)</td>
</tr>
<tr class="even">
<td>Branch Predictors</td>
<td>2-level local, gshare, tournament</td>
</tr>
<tr class="odd">
<td>Integer ALUs</td>
<td>1, 3, 6</td>
</tr>
<tr class="even">
<td>FP/SIMD ALUs</td>
<td>1, 2, 4</td>
</tr>
<tr class="odd">
<td>Load/Store Queue Sizes</td>
<td>16, 32</td>
</tr>
<tr class="even">
<td>Instruction Cache</td>
<td>32KB 4-way, 64KB 4-way</td>
</tr>
<tr class="odd">
<td>Private Data Cache</td>
<td>32KB 4-way, 64KB 4-way</td>
</tr>
<tr class="even">
<td>Shared Last Level (L2) Cache</td>
<td>4-banked 4MB 4-way, 4-banked 8MB 8-way</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="results-analysis" class="slide level2" data-number="5.4">
<h2 data-number="5.4"><span class="header-section-number">5.4</span> Results &amp; Analysis</h2>
<ul>
<li>(All-Tests) Feature Affinity
<ul>
<li>All tests preferred feature</li>
</ul></li>
<li>Performance and Energy Efficiency</li>
<li><em>Feature Sensitivity Analysis</em>
<ul>
<li>by removing some feature diversity</li>
</ul></li>
<li><em>(Particular-Test) Feature Affinity</em>
<ul>
<li>Particular test preferred features</li>
</ul></li>
<li>Migration Cost</li>
</ul>
<div style="zoom: 70%;">
<p>by 2 petaflop XSEDE Comet cluster at the San Diego Supercomputing Center</p>
</div>
</section>
<section id="all-tests-feature-affinity" class="slide level2" data-number="5.5">
<h2 data-number="5.5"><span class="header-section-number">5.5</span> (All-Tests) Feature Affinity</h2>
<p>Feature Space Explore Results</p>
<div class="container">
<div class="col">
<p><img src="./pictures/2019.t3.perf_space_explore.svg" style="zoom: 120%;"></p>
<div style="zoom: 80%;">
<p>opt for multi-thread perfermance</p>
</div>
</div>
<div class="col">
<p><img src="./pictures/2019.t4.energy_space_explore.svg" style="zoom: 120%;"></p>
<div style="zoom: 80%;">
<p>opt for multi-thread energy efficiency</p>
</div>
</div>
</div>
</section>
<section id="performance-and-energy-efficiency-1" class="slide level2" data-number="5.6">
<h2 data-number="5.6"><span class="header-section-number">5.6</span> Performance and Energy Efficiency</h2>
<div class="container" style="zoom: 70%;">
<div class="col">
<p>Test targets</p>
<ul>
<li>Homogeneous (x86-64)</li>
<li>Single-ISA Heterogeneous (x86-64)</li>
<li>Composite-ISA fixed feat. (x86-64 + x86ized Thumb + x86ized Alpha)</li>
<li>Heterogeneous ISA (x86-64 + Thumb + Alpha)</li>
<li>ðŸŽ‰<strong>Composite-ISA full feat. (x86-64 + Full Feat. Diversity)</strong></li>
</ul>
</div>
<div class="col">
<p>Tests</p>
<table>
<thead>
<tr class="header">
<th>x</th>
<th>y</th>
<th>workload</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Peak Power</td>
<td>Speedup</td>
<td>Multi Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>Speedup</td>
<td>Multi Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>EDP</td>
<td>Multi Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>EDP</td>
<td>Multi Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>Speedup</td>
<td>Single Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>Speedup</td>
<td>Single Thread</td>
</tr>
<tr class="odd">
<td>Peak Power</td>
<td>EDP</td>
<td>Single Thread</td>
</tr>
<tr class="even">
<td>Area</td>
<td>EDP</td>
<td>Single Thread</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="migration-cost-2" class="slide level2" data-number="5.7">
<h2 data-number="5.7"><span class="header-section-number">5.7</span> Migration Cost</h2>
<div class="container">
<div class="col">
<h3>
Specific feature downgradation
</h3>
<p><img src="./pictures/2019.f14.feat_downgrade_cost.svg" style="zoom: 140%;"></p>
</div>
<div class="col">
<h3>
Overall feature downgradation
</h3>
<p>average 0.42%, max 0.75%</p>
<ul>
<li>1863 migrations
<ul>
<li>125 64-bit =&gt; 32-bit</li>
<li>171 64 regs =&gt; 32 regs</li>
<li>177 64 regs =&gt; 16 regs</li>
<li>8 x86 =&gt; microx86</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="summary-2" class="slide level2" data-number="5.8">
<h2 data-number="5.8"><span class="header-section-number">5.8</span> Summary</h2>
<p>Composite ISA</p>
<ul>
<li>no licensing problem</li>
<li>no fat binary</li>
<li>no state transformation</li>
<li>+19% perf., -30% energy than single-ISA HT</li>
<li>match or outperform HT-ISA</li>
<li>Migration Cost: avg 0.42%, max 0.75%</li>
</ul>
</section>
<section id="doubt" class="slide level2" data-number="5.9">
<h2 data-number="5.9"><span class="header-section-number">5.9</span> Doubt</h2>
<p><img src="./pictures/2019.f4.x86_fetch_decode.svg" style="zoom: 150%;"></p>
<blockquote>
<p>Our implementations of the micro-op cache and fusion are consistent with guidelines mentioned in the Intel Architecture Optimization Manual [112].</p>
</blockquote>
<div style="zoom: 70%;">
<p>[112] Intel R 64 and IA-32 Architectures Optimization Reference Manual.</p>
</div>
</section></section>
<section id="my-works" class="title-slide slide level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> My works</h1>
<ul>
<li>kernel</li>
<li>compiler</li>
<li>uArch</li>
</ul>
</section>
    </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/plugin/search/search.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/reveal.js/4.3.1/plugin/zoom/zoom.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js-plugins@4.1.5/chalkboard/plugin.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js-plugins@4.1.5/customcontrols/plugin.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 700,

        chalkboard: {
          theme: "whiteboard",
        },
        customcontrols: {
          controls: [
            { icon: '<i class="fa fa-pen-square"></i>',
              title: 'Toggle chalkboard (B)',
              action: 'RevealChalkboard.toggleChalkboard();'
            },
            { icon: '<i class="fa fa-pen"></i>',
              title: 'Toggle notes canvas (C)',
              action: 'RevealChalkboard.toggleNotesCanvas();'
            }
          ]
        },
        // reveal.js plugins
        plugins: [
          RevealChalkboard,
          RevealCustomControls,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
